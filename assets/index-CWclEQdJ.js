(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function oA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var am={exports:{}},Ul={};var D_;function lA(){if(D_)return Ul;D_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Ul.Fragment=e,Ul.jsx=n,Ul.jsxs=n,Ul}var O_;function uA(){return O_||(O_=1,am.exports=lA()),am.exports}var S=uA(),om={exports:{}},Ie={};var M_;function cA(){if(M_)return Ie;M_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),C=Symbol.iterator;function M(V){return V===null||typeof V!="object"?null:(V=C&&V[C]||V["@@iterator"],typeof V=="function"?V:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,q={};function ne(V,X,re){this.props=V,this.context=X,this.refs=q,this.updater=re||Q}ne.prototype.isReactComponent={},ne.prototype.setState=function(V,X){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,X,"setState")},ne.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function se(){}se.prototype=ne.prototype;function te(V,X,re){this.props=V,this.context=X,this.refs=q,this.updater=re||Q}var ue=te.prototype=new se;ue.constructor=te,Y(ue,ne.prototype),ue.isPureReactComponent=!0;var fe=Array.isArray;function le(){}var R={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function I(V,X,re){var oe=re.ref;return{$$typeof:r,type:V,key:X,ref:oe!==void 0?oe:null,props:re}}function O(V,X){return I(V.type,X,V.props)}function N(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function L(V){var X={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(re){return X[re]})}var x=/\/+/g;function Ae(V,X){return typeof V=="object"&&V!==null&&V.key!=null?L(""+V.key):X.toString(36)}function ze(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(le,le):(V.status="pending",V.then(function(X){V.status==="pending"&&(V.status="fulfilled",V.value=X)},function(X){V.status==="pending"&&(V.status="rejected",V.reason=X)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function K(V,X,re,oe,_e){var ye=typeof V;(ye==="undefined"||ye==="boolean")&&(V=null);var Me=!1;if(V===null)Me=!0;else switch(ye){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(V.$$typeof){case r:case e:Me=!0;break;case E:return Me=V._init,K(Me(V._payload),X,re,oe,_e)}}if(Me)return _e=_e(V),Me=oe===""?"."+Ae(V,0):oe,fe(_e)?(re="",Me!=null&&(re=Me.replace(x,"$&/")+"/"),K(_e,X,re,"",function(Le){return Le})):_e!=null&&(N(_e)&&(_e=O(_e,re+(_e.key==null||V&&V.key===_e.key?"":(""+_e.key).replace(x,"$&/")+"/")+Me)),X.push(_e)),1;Me=0;var tt=oe===""?".":oe+":";if(fe(V))for(var Be=0;Be<V.length;Be++)oe=V[Be],ye=tt+Ae(oe,Be),Me+=K(oe,X,re,ye,_e);else if(Be=M(V),typeof Be=="function")for(V=Be.call(V),Be=0;!(oe=V.next()).done;)oe=oe.value,ye=tt+Ae(oe,Be++),Me+=K(oe,X,re,ye,_e);else if(ye==="object"){if(typeof V.then=="function")return K(ze(V),X,re,oe,_e);throw X=String(V),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Me}function ie(V,X,re){if(V==null)return V;var oe=[],_e=0;return K(V,oe,"","",function(ye){return X.call(re,ye,_e++)}),oe}function me(V){if(V._status===-1){var X=V._result;X=X(),X.then(function(re){(V._status===0||V._status===-1)&&(V._status=1,V._result=re)},function(re){(V._status===0||V._status===-1)&&(V._status=2,V._result=re)}),V._status===-1&&(V._status=0,V._result=X)}if(V._status===1)return V._result.default;throw V._result}var xe=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},ke={map:ie,forEach:function(V,X,re){ie(V,function(){X.apply(this,arguments)},re)},count:function(V){var X=0;return ie(V,function(){X++}),X},toArray:function(V){return ie(V,function(X){return X})||[]},only:function(V){if(!N(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ie.Activity=T,Ie.Children=ke,Ie.Component=ne,Ie.Fragment=n,Ie.Profiler=o,Ie.PureComponent=te,Ie.StrictMode=s,Ie.Suspense=p,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(V){return R.H.useMemoCache(V)}},Ie.cache=function(V){return function(){return V.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(V,X,re){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var oe=Y({},V.props),_e=V.key;if(X!=null)for(ye in X.key!==void 0&&(_e=""+X.key),X)!w.call(X,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&X.ref===void 0||(oe[ye]=X[ye]);var ye=arguments.length-2;if(ye===1)oe.children=re;else if(1<ye){for(var Me=Array(ye),tt=0;tt<ye;tt++)Me[tt]=arguments[tt+2];oe.children=Me}return I(V.type,_e,oe)},Ie.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Ie.createElement=function(V,X,re){var oe,_e={},ye=null;if(X!=null)for(oe in X.key!==void 0&&(ye=""+X.key),X)w.call(X,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(_e[oe]=X[oe]);var Me=arguments.length-2;if(Me===1)_e.children=re;else if(1<Me){for(var tt=Array(Me),Be=0;Be<Me;Be++)tt[Be]=arguments[Be+2];_e.children=tt}if(V&&V.defaultProps)for(oe in Me=V.defaultProps,Me)_e[oe]===void 0&&(_e[oe]=Me[oe]);return I(V,ye,_e)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(V){return{$$typeof:m,render:V}},Ie.isValidElement=N,Ie.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:me}},Ie.memo=function(V,X){return{$$typeof:y,type:V,compare:X===void 0?null:X}},Ie.startTransition=function(V){var X=R.T,re={};R.T=re;try{var oe=V(),_e=R.S;_e!==null&&_e(re,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(le,xe)}catch(ye){xe(ye)}finally{X!==null&&re.types!==null&&(X.types=re.types),R.T=X}},Ie.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ie.use=function(V){return R.H.use(V)},Ie.useActionState=function(V,X,re){return R.H.useActionState(V,X,re)},Ie.useCallback=function(V,X){return R.H.useCallback(V,X)},Ie.useContext=function(V){return R.H.useContext(V)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(V,X){return R.H.useDeferredValue(V,X)},Ie.useEffect=function(V,X){return R.H.useEffect(V,X)},Ie.useEffectEvent=function(V){return R.H.useEffectEvent(V)},Ie.useId=function(){return R.H.useId()},Ie.useImperativeHandle=function(V,X,re){return R.H.useImperativeHandle(V,X,re)},Ie.useInsertionEffect=function(V,X){return R.H.useInsertionEffect(V,X)},Ie.useLayoutEffect=function(V,X){return R.H.useLayoutEffect(V,X)},Ie.useMemo=function(V,X){return R.H.useMemo(V,X)},Ie.useOptimistic=function(V,X){return R.H.useOptimistic(V,X)},Ie.useReducer=function(V,X,re){return R.H.useReducer(V,X,re)},Ie.useRef=function(V){return R.H.useRef(V)},Ie.useState=function(V){return R.H.useState(V)},Ie.useSyncExternalStore=function(V,X,re){return R.H.useSyncExternalStore(V,X,re)},Ie.useTransition=function(){return R.H.useTransition()},Ie.version="19.2.0",Ie}var V_;function og(){return V_||(V_=1,om.exports=cA()),om.exports}var j=og();const jn=oA(j);var lm={exports:{}},Pl={},um={exports:{}},cm={};var k_;function hA(){return k_||(k_=1,(function(r){function e(K,ie){var me=K.length;K.push(ie);e:for(;0<me;){var xe=me-1>>>1,ke=K[xe];if(0<o(ke,ie))K[xe]=ie,K[me]=ke,me=xe;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var ie=K[0],me=K.pop();if(me!==ie){K[0]=me;e:for(var xe=0,ke=K.length,V=ke>>>1;xe<V;){var X=2*(xe+1)-1,re=K[X],oe=X+1,_e=K[oe];if(0>o(re,me))oe<ke&&0>o(_e,re)?(K[xe]=_e,K[oe]=me,xe=oe):(K[xe]=re,K[X]=me,xe=X);else if(oe<ke&&0>o(_e,me))K[xe]=_e,K[oe]=me,xe=oe;else break e}}return ie}function o(K,ie){var me=K.sortIndex-ie.sortIndex;return me!==0?me:K.id-ie.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var p=[],y=[],E=1,T=null,C=3,M=!1,Q=!1,Y=!1,q=!1,ne=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function ue(K){for(var ie=n(y);ie!==null;){if(ie.callback===null)s(y);else if(ie.startTime<=K)s(y),ie.sortIndex=ie.expirationTime,e(p,ie);else break;ie=n(y)}}function fe(K){if(Y=!1,ue(K),!Q)if(n(p)!==null)Q=!0,le||(le=!0,L());else{var ie=n(y);ie!==null&&ze(fe,ie.startTime-K)}}var le=!1,R=-1,w=5,I=-1;function O(){return q?!0:!(r.unstable_now()-I<w)}function N(){if(q=!1,le){var K=r.unstable_now();I=K;var ie=!0;try{e:{Q=!1,Y&&(Y=!1,se(R),R=-1),M=!0;var me=C;try{t:{for(ue(K),T=n(p);T!==null&&!(T.expirationTime>K&&O());){var xe=T.callback;if(typeof xe=="function"){T.callback=null,C=T.priorityLevel;var ke=xe(T.expirationTime<=K);if(K=r.unstable_now(),typeof ke=="function"){T.callback=ke,ue(K),ie=!0;break t}T===n(p)&&s(p),ue(K)}else s(p);T=n(p)}if(T!==null)ie=!0;else{var V=n(y);V!==null&&ze(fe,V.startTime-K),ie=!1}}break e}finally{T=null,C=me,M=!1}ie=void 0}}finally{ie?L():le=!1}}}var L;if(typeof te=="function")L=function(){te(N)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Ae=x.port2;x.port1.onmessage=N,L=function(){Ae.postMessage(null)}}else L=function(){ne(N,0)};function ze(K,ie){R=ne(function(){K(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_next=function(K){switch(C){case 1:case 2:case 3:var ie=3;break;default:ie=C}var me=C;C=ie;try{return K()}finally{C=me}},r.unstable_requestPaint=function(){q=!0},r.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var me=C;C=K;try{return ie()}finally{C=me}},r.unstable_scheduleCallback=function(K,ie,me){var xe=r.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?xe+me:xe):me=xe,K){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=me+ke,K={id:E++,callback:ie,priorityLevel:K,startTime:me,expirationTime:ke,sortIndex:-1},me>xe?(K.sortIndex=me,e(y,K),n(p)===null&&K===n(y)&&(Y?(se(R),R=-1):Y=!0,ze(fe,me-xe))):(K.sortIndex=ke,e(p,K),Q||M||(Q=!0,le||(le=!0,L()))),K},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(K){var ie=C;return function(){var me=C;C=ie;try{return K.apply(this,arguments)}finally{C=me}}}})(cm)),cm}var L_;function fA(){return L_||(L_=1,um.exports=hA()),um.exports}var hm={exports:{}},pn={};var U_;function dA(){if(U_)return pn;U_=1;var r=og();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:y,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,pn.createPortal=function(p,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,E)},pn.flushSync=function(p){var y=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=y,s.p=E,s.d.f()}},pn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},pn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},pn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var E=y.as,T=m(E,y.crossOrigin),C=typeof y.integrity=="string"?y.integrity:void 0,M=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:C,fetchPriority:M}):E==="script"&&s.d.X(p,{crossOrigin:T,integrity:C,fetchPriority:M,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},pn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=m(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},pn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,T=m(E,y.crossOrigin);s.d.L(p,E,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},pn.preloadModule=function(p,y){if(typeof p=="string")if(y){var E=m(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},pn.requestFormReset=function(p){s.d.r(p)},pn.unstable_batchedUpdates=function(p,y){return p(y)},pn.useFormState=function(p,y,E){return f.H.useFormState(p,y,E)},pn.useFormStatus=function(){return f.H.useHostTransitionStatus()},pn.version="19.2.0",pn}var P_;function U1(){if(P_)return hm.exports;P_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),hm.exports=dA(),hm.exports}var j_;function mA(){if(j_)return Pl;j_=1;var r=fA(),e=og(),n=U1();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function y(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),t;if(d===l)return p(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,b=h.child;b;){if(b===a){v=!0,a=h,l=d;break}if(b===l){v=!0,l=h,a=d;break}b=b.sibling}if(!v){for(b=d.child;b;){if(b===a){v=!0,a=d,l=h;break}if(b===l){v=!0,l=d,a=h;break}b=b.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function E(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=E(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,C=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=N&&t[N]||t["@@iterator"],typeof t=="function"?t:null)}var x=Symbol.for("react.client.reference");function Ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Y:return"Fragment";case ne:return"Profiler";case q:return"StrictMode";case fe:return"Suspense";case le:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Q:return"Portal";case te:return t.displayName||"Context";case se:return(t._context.displayName||"Context")+".Consumer";case ue:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return i=t.displayName||null,i!==null?i:Ae(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return Ae(t(i))}catch{}}return null}var ze=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},xe=[],ke=-1;function V(t){return{current:t}}function X(t){0>ke||(t.current=xe[ke],xe[ke]=null,ke--)}function re(t,i){ke++,xe[ke]=t.current,t.current=i}var oe=V(null),_e=V(null),ye=V(null),Me=V(null);function tt(t,i){switch(re(ye,i),re(_e,t),re(oe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?e_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=e_(i),t=t_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}X(oe),re(oe,t)}function Be(){X(oe),X(_e),X(ye)}function Le(t){t.memoizedState!==null&&re(Me,t);var i=oe.current,a=t_(i,t.type);i!==a&&(re(_e,t),re(oe,a))}function In(t){_e.current===t&&(X(oe),X(_e)),Me.current===t&&(X(Me),Ml._currentValue=me)}var ce,be;function Ce(t){if(ce===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ce=i&&i[1]||"",be=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+t+be}var Ke=!1;function dt(t,i){if(!t||Ke)return"";Ke=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(F){var H=F}Reflect.construct(t,[],Z)}else{try{Z.call()}catch(F){H=F}t.call(Z.prototype)}}else{try{throw Error()}catch(F){H=F}(Z=t())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(F){if(F&&H&&typeof F.stack=="string")return[F.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],b=d[1];if(v&&b){var D=v.split(`
`),B=b.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===B.length)for(l=D.length-1,h=B.length-1;1<=l&&0<=h&&D[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==B[h]){var $=`
`+D[l].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=l&&0<=h);break}}}finally{Ke=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ce(a):""}function Tn(t,i){switch(t.tag){case 26:case 27:case 5:return Ce(t.type);case 16:return Ce("Lazy");case 13:return t.child!==i&&i!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return dt(t.type,!1);case 11:return dt(t.type.render,!1);case 1:return dt(t.type,!0);case 31:return Ce("Activity");default:return""}}function Oi(t){try{var i="",a=null;do i+=Tn(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var yt=Object.prototype.hasOwnProperty,at=r.unstable_scheduleCallback,qn=r.unstable_cancelCallback,Ur=r.unstable_shouldYield,Ms=r.unstable_requestPaint,Xt=r.unstable_now,ar=r.unstable_getCurrentPriorityLevel,Vs=r.unstable_ImmediatePriority,ii=r.unstable_UserBlockingPriority,Sn=r.unstable_NormalPriority,or=r.unstable_LowPriority,ks=r.unstable_IdlePriority,Hn=r.log,Ls=r.unstable_setDisableYieldValue,Gn=null,Ht=null;function fn(t){if(typeof Hn=="function"&&Ls(t),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(Gn,t)}catch{}}var vt=Math.clz32?Math.clz32:Sa,Ta=Math.log,lr=Math.LN2;function Sa(t){return t>>>=0,t===0?32:31-(Ta(t)/lr|0)|0}var ri=256,ur=262144,Ue=4194304;function _t(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Et(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=_t(l):(v&=b,v!==0?h=_t(v):a||(a=b&~t,a!==0&&(h=_t(a))))):(b=l&~d,b!==0?h=_t(b):v!==0?h=_t(v):a||(a=l&~t,a!==0&&(h=_t(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Mt(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function dn(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $t(){var t=Ue;return Ue<<=1,(Ue&62914560)===0&&(Ue=4194304),t}function Rt(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Nn(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ct(t,i,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,D=t.expirationTimes,B=t.hiddenUpdates;for(a=v&~a;0<a;){var $=31-vt(a),Z=1<<$;b[$]=0,D[$]=-1;var H=B[$];if(H!==null)for(B[$]=null,$=0;$<H.length;$++){var F=H[$];F!==null&&(F.lane&=-536870913)}a&=~Z}l!==0&&mn(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function mn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-vt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function gn(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-vt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function An(t,i){var a=i&-i;return a=(a&42)!==0?1:Fn(a),(a&(t.suspendedLanes|i))!==0?0:a}function Fn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function wn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Qn(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:A_(t.type))}function nn(t,i){var a=ie.p;try{return ie.p=t,i()}finally{ie.p=a}}var xn=Math.random().toString(36).slice(2),Vt="__reactFiber$"+xn,Jt="__reactProps$"+xn,Mi="__reactContainer$"+xn,Aa="__reactEvents$"+xn,ff="__reactListeners$"+xn,Nu="__reactHandles$"+xn,Du="__reactResources$"+xn,Vi="__reactMarker$"+xn;function wa(t){delete t[Vt],delete t[Jt],delete t[Aa],delete t[ff],delete t[Nu]}function ki(t){var i=t[Vt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Mi]||a[Vt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=l_(t);t!==null;){if(a=t[Vt])return a;t=l_(t)}return i}t=a,a=t.parentNode}return null}function si(t){if(t=t[Vt]||t[Mi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Kn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Li(t){var i=t[Du];return i||(i=t[Du]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function kt(t){t[Vi]=!0}var zo=new Set,Bo={};function Ui(t,i){Pi(t,i),Pi(t+"Capture",i)}function Pi(t,i){for(Bo[t]=i,t=0;t<i.length;t++)zo.add(i[t])}var qo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ho={},Go={};function Ou(t){return yt.call(Go,t)?!0:yt.call(Ho,t)?!1:qo.test(t)?Go[t]=!0:(Ho[t]=!0,!1)}function xa(t,i,a){if(Ou(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Yn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Lt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Zt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pr(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Fo(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function it(t){if(!t._valueTracker){var i=Pr(t)?"checked":"value";t._valueTracker=Fo(t,i,""+t[i])}}function Us(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Pr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function ji(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ps=/[\n"\\]/g;function Dn(t){return t.replace(Ps,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ra(t,i,a,l,h,d,v,b){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Zt(i)):t.value!==""+Zt(i)&&(t.value=""+Zt(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?Qo(t,v,Zt(i)):a!=null?Qo(t,v,Zt(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Zt(b):t.removeAttribute("name")}function Mu(t,i,a,l,h,d,v,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){it(t);return}a=a!=null?""+Zt(a):"",i=i!=null?""+Zt(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),it(t)}function Qo(t,i,a){i==="number"&&ji(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function jr(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Zt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Vu(t,i,a){if(i!=null&&(i=""+Zt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Zt(a):""}function zr(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ze(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Zt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),it(t)}function On(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ku=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ko(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||ku.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Yo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Ko(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Ko(t,d,i[d])}function Ca(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Br=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ia(t){return Br.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function _i(){}var Xo=null;function ai(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qr=null,zi=null;function js(t){var i=si(t);if(i&&(t=i.stateNode)){var a=t[Jt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Ra(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Dn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Jt]||null;if(!h)throw Error(s(90));Ra(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Us(l)}break e;case"textarea":Vu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&jr(t,!!a.multiple,i,!1)}}}var Na=!1;function Hr(t,i,a){if(Na)return t(i,a);Na=!0;try{var l=t(i);return l}finally{if(Na=!1,(qr!==null||zi!==null)&&(Ic(),qr&&(i=qr,t=zi,zi=qr=null,js(i),t)))for(i=0;i<t.length;i++)js(t[i])}}function Ei(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Jt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zs=!1;if(oi)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){zs=!0}}),window.addEventListener("test",ot,ot),window.removeEventListener("test",ot,ot)}catch{zs=!1}var Bi=null,$o=null,Bs=null;function Jo(){if(Bs)return Bs;var t,i=$o,a=i.length,l,h="value"in Bi?Bi.value:Bi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return Bs=h.slice(t,1<l?1-l:void 0)}function qs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function cr(){return!0}function bi(){return!1}function rn(t){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?cr:bi,this.isPropagationStopped=bi,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),i}var hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qi=rn(hr),Gr=T({},hr,{view:0,detail:0}),Zo=rn(Gr),Fr,Da,Hi,Oa=T({},Gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hi&&(Hi&&t.type==="mousemove"?(Fr=t.screenX-Hi.screenX,Da=t.screenY-Hi.screenY):Da=Fr=0,Hi=t),Fr)},movementY:function(t){return"movementY"in t?t.movementY:Da}}),Wo=rn(Oa),Hs=T({},Oa,{dataTransfer:0}),Uu=rn(Hs),Pu=T({},Gr,{relatedTarget:0}),Gs=rn(Pu),el=T({},hr,{animationName:0,elapsedTime:0,pseudoElement:0}),ju=rn(el),Ma=T({},hr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zu=rn(Ma),Bu=T({},hr,{data:0}),Gi=rn(Bu),qu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Gu[t])?!!i[t]:!1}function Qr(){return Fu}var Rn=T({},Gr,{key:function(t){if(t.key){var i=qu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=qs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qr,charCode:function(t){return t.type==="keypress"?qs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qu=rn(Rn),Ku=T({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fr=rn(Ku),c=T({},Gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qr}),g=rn(c),_=T({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=rn(_),P=T({},Oa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G=rn(P),ae=T({},hr,{newState:0,oldState:0}),De=rn(ae),It=[9,13,27,32],We=oi&&"CompositionEvent"in window,bt=null;oi&&"documentMode"in document&&(bt=document.documentMode);var li=oi&&"TextEvent"in window&&!bt,Fi=oi&&(!We||bt&&8<bt&&11>=bt),Ti=" ",Si=!1;function Fs(t,i){switch(t){case"keyup":return It.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Va(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ka=!1;function DT(t,i){switch(t){case"compositionend":return Va(i);case"keypress":return i.which!==32?null:(Si=!0,Ti);case"textInput":return t=i.data,t===Ti&&Si?null:t;default:return null}}function OT(t,i){if(ka)return t==="compositionend"||!We&&Fs(t,i)?(t=Jo(),Bs=$o=Bi=null,ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Fi&&i.locale!=="ko"?null:i.data;default:return null}}var MT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!MT[t.type]:i==="textarea"}function fp(t,i,a,l){qr?zi?zi.push(l):zi=[l]:qr=l,i=Lc(i,"onChange"),0<i.length&&(a=new qi("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var tl=null,nl=null;function VT(t){Yv(t,0)}function Yu(t){var i=Kn(t);if(Us(i))return t}function dp(t,i){if(t==="change")return i}var mp=!1;if(oi){var df;if(oi){var mf="oninput"in document;if(!mf){var gp=document.createElement("div");gp.setAttribute("oninput","return;"),mf=typeof gp.oninput=="function"}df=mf}else df=!1;mp=df&&(!document.documentMode||9<document.documentMode)}function pp(){tl&&(tl.detachEvent("onpropertychange",yp),nl=tl=null)}function yp(t){if(t.propertyName==="value"&&Yu(nl)){var i=[];fp(i,nl,t,ai(t)),Hr(VT,i)}}function kT(t,i,a){t==="focusin"?(pp(),tl=i,nl=a,tl.attachEvent("onpropertychange",yp)):t==="focusout"&&pp()}function LT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yu(nl)}function UT(t,i){if(t==="click")return Yu(i)}function PT(t,i){if(t==="input"||t==="change")return Yu(i)}function jT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Xn=typeof Object.is=="function"?Object.is:jT;function il(t,i){if(Xn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!yt.call(i,h)||!Xn(t[h],i[h]))return!1}return!0}function vp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _p(t,i){var a=vp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=vp(a)}}function Ep(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Ep(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function bp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ji(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ji(t.document)}return i}function gf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var zT=oi&&"documentMode"in document&&11>=document.documentMode,La=null,pf=null,rl=null,yf=!1;function Tp(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yf||La==null||La!==ji(l)||(l=La,"selectionStart"in l&&gf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),rl&&il(rl,l)||(rl=l,l=Lc(pf,"onSelect"),0<l.length&&(i=new qi("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=La)))}function Qs(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ua={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionrun:Qs("Transition","TransitionRun"),transitionstart:Qs("Transition","TransitionStart"),transitioncancel:Qs("Transition","TransitionCancel"),transitionend:Qs("Transition","TransitionEnd")},vf={},Sp={};oi&&(Sp=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Ks(t){if(vf[t])return vf[t];if(!Ua[t])return t;var i=Ua[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Sp)return vf[t]=i[a];return t}var Ap=Ks("animationend"),wp=Ks("animationiteration"),xp=Ks("animationstart"),BT=Ks("transitionrun"),qT=Ks("transitionstart"),HT=Ks("transitioncancel"),Rp=Ks("transitionend"),Cp=new Map,_f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_f.push("scrollEnd");function Ai(t,i){Cp.set(t,i),Ui(i,[t])}var Xu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ui=[],Pa=0,Ef=0;function $u(){for(var t=Pa,i=Ef=Pa=0;i<t;){var a=ui[i];ui[i++]=null;var l=ui[i];ui[i++]=null;var h=ui[i];ui[i++]=null;var d=ui[i];if(ui[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&Ip(a,h,d)}}function Ju(t,i,a,l){ui[Pa++]=t,ui[Pa++]=i,ui[Pa++]=a,ui[Pa++]=l,Ef|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function bf(t,i,a,l){return Ju(t,i,a,l),Zu(t)}function Ys(t,i){return Ju(t,null,null,i),Zu(t)}function Ip(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-vt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Zu(t){if(50<xl)throw xl=0,Nd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var ja={};function GT(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,i,a,l){return new GT(t,i,a,l)}function Tf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dr(t,i){var a=t.alternate;return a===null?(a=$n(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Np(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Wu(t,i,a,l,h,d){var v=0;if(l=t,typeof t=="function")Tf(t)&&(v=1);else if(typeof t=="string")v=XS(t,a,oe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=$n(31,a,i,h),t.elementType=I,t.lanes=d,t;case Y:return Xs(a.children,h,d,i);case q:v=8,h|=24;break;case ne:return t=$n(12,a,i,h|2),t.elementType=ne,t.lanes=d,t;case fe:return t=$n(13,a,i,h),t.elementType=fe,t.lanes=d,t;case le:return t=$n(19,a,i,h),t.elementType=le,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case te:v=10;break e;case se:v=9;break e;case ue:v=11;break e;case R:v=14;break e;case w:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=$n(v,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Xs(t,i,a,l){return t=$n(7,t,l,i),t.lanes=a,t}function Sf(t,i,a){return t=$n(6,t,null,i),t.lanes=a,t}function Dp(t){var i=$n(18,null,null,0);return i.stateNode=t,i}function Af(t,i,a){return i=$n(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Op=new WeakMap;function ci(t,i){if(typeof t=="object"&&t!==null){var a=Op.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Oi(i)},Op.set(t,i),i)}return{value:t,source:i,stack:Oi(i)}}var za=[],Ba=0,ec=null,sl=0,hi=[],fi=0,Kr=null,Qi=1,Ki="";function mr(t,i){za[Ba++]=sl,za[Ba++]=ec,ec=t,sl=i}function Mp(t,i,a){hi[fi++]=Qi,hi[fi++]=Ki,hi[fi++]=Kr,Kr=t;var l=Qi;t=Ki;var h=32-vt(l)-1;l&=~(1<<h),a+=1;var d=32-vt(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Qi=1<<32-vt(i)+h|a<<h|l,Ki=d+t}else Qi=1<<d|a<<h|l,Ki=t}function wf(t){t.return!==null&&(mr(t,1),Mp(t,1,0))}function xf(t){for(;t===ec;)ec=za[--Ba],za[Ba]=null,sl=za[--Ba],za[Ba]=null;for(;t===Kr;)Kr=hi[--fi],hi[fi]=null,Ki=hi[--fi],hi[fi]=null,Qi=hi[--fi],hi[fi]=null}function Vp(t,i){hi[fi++]=Qi,hi[fi++]=Ki,hi[fi++]=Kr,Qi=i.id,Ki=i.overflow,Kr=t}var sn=null,mt=null,Ye=!1,Yr=null,di=!1,Rf=Error(s(519));function Xr(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw al(ci(i,t)),Rf}function kp(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Vt]=t,i[Jt]=l,a){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(a=0;a<Cl.length;a++)je(Cl[a],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":je("invalid",i),Mu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":je("invalid",i);break;case"textarea":je("invalid",i),zr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Zv(i.textContent,a)?(l.popover!=null&&(je("beforetoggle",i),je("toggle",i)),l.onScroll!=null&&je("scroll",i),l.onScrollEnd!=null&&je("scrollend",i),l.onClick!=null&&(i.onclick=_i),i=!0):i=!1,i||Xr(t,!0)}function Lp(t){for(sn=t.return;sn;)switch(sn.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:sn=sn.return}}function qa(t){if(t!==sn)return!1;if(!Ye)return Lp(t),Ye=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Fd(t.type,t.memoizedProps)),a=!a),a&&mt&&Xr(t),Lp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));mt=o_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));mt=o_(t)}else i===27?(i=mt,us(t.type)?(t=$d,$d=null,mt=t):mt=i):mt=sn?gi(t.stateNode.nextSibling):null;return!0}function $s(){mt=sn=null,Ye=!1}function Cf(){var t=Yr;return t!==null&&(Ln===null?Ln=t:Ln.push.apply(Ln,t),Yr=null),t}function al(t){Yr===null?Yr=[t]:Yr.push(t)}var If=V(null),Js=null,gr=null;function $r(t,i,a){re(If,i._currentValue),i._currentValue=a}function pr(t){t._currentValue=If.current,X(If)}function Nf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Df(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var D=0;D<i.length;D++)if(b.context===i[D]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Nf(d.return,a,t),l||(v=null);break e}d=b.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Nf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Ha(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var b=h.type;Xn(h.pendingProps.value,v.value)||(t!==null?t.push(b):t=[b])}}else if(h===Me.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Ml):t=[Ml])}h=h.return}t!==null&&Df(i,t,a,l),i.flags|=262144}function tc(t){for(t=t.firstContext;t!==null;){if(!Xn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Zs(t){Js=t,gr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function an(t){return Up(Js,t)}function nc(t,i){return Js===null&&Zs(t),Up(t,i)}function Up(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},gr===null){if(t===null)throw Error(s(308));gr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else gr=gr.next=i;return a}var FT=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},QT=r.unstable_scheduleCallback,KT=r.unstable_NormalPriority,Ut={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Of(){return{controller:new FT,data:new Map,refCount:0}}function ol(t){t.refCount--,t.refCount===0&&QT(KT,function(){t.controller.abort()})}var ll=null,Mf=0,Ga=0,Fa=null;function YT(t,i){if(ll===null){var a=ll=[];Mf=0,Ga=Ld(),Fa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Mf++,i.then(Pp,Pp),i}function Pp(){if(--Mf===0&&ll!==null){Fa!==null&&(Fa.status="fulfilled");var t=ll;ll=null,Ga=0,Fa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function XT(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var jp=K.S;K.S=function(t,i){Tv=Xt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&YT(t,i),jp!==null&&jp(t,i)};var Ws=V(null);function Vf(){var t=Ws.current;return t!==null?t:ft.pooledCache}function ic(t,i){i===null?re(Ws,Ws.current):re(Ws,i.pool)}function zp(){var t=Vf();return t===null?null:{parent:Ut._currentValue,pool:t}}var Qa=Error(s(460)),kf=Error(s(474)),rc=Error(s(542)),sc={then:function(){}};function Bp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function qp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(_i,_i),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Gp(t),t;default:if(typeof i.status=="string")i.then(_i,_i);else{if(t=ft,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Gp(t),t}throw ta=i,Qa}}function ea(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ta=a,Qa):a}}var ta=null;function Hp(){if(ta===null)throw Error(s(459));var t=ta;return ta=null,t}function Gp(t){if(t===Qa||t===rc)throw Error(s(483))}var Ka=null,ul=0;function ac(t){var i=ul;return ul+=1,Ka===null&&(Ka=[]),qp(Ka,t,i)}function cl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function oc(t,i){throw i.$$typeof===C?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Fp(t){function i(U,k){if(t){var z=U.deletions;z===null?(U.deletions=[k],U.flags|=16):z.push(k)}}function a(U,k){if(!t)return null;for(;k!==null;)i(U,k),k=k.sibling;return null}function l(U){for(var k=new Map;U!==null;)U.key!==null?k.set(U.key,U):k.set(U.index,U),U=U.sibling;return k}function h(U,k){return U=dr(U,k),U.index=0,U.sibling=null,U}function d(U,k,z){return U.index=z,t?(z=U.alternate,z!==null?(z=z.index,z<k?(U.flags|=67108866,k):z):(U.flags|=67108866,k)):(U.flags|=1048576,k)}function v(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function b(U,k,z,J){return k===null||k.tag!==6?(k=Sf(z,U.mode,J),k.return=U,k):(k=h(k,z),k.return=U,k)}function D(U,k,z,J){var ve=z.type;return ve===Y?$(U,k,z.props.children,J,z.key):k!==null&&(k.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===w&&ea(ve)===k.type)?(k=h(k,z.props),cl(k,z),k.return=U,k):(k=Wu(z.type,z.key,z.props,null,U.mode,J),cl(k,z),k.return=U,k)}function B(U,k,z,J){return k===null||k.tag!==4||k.stateNode.containerInfo!==z.containerInfo||k.stateNode.implementation!==z.implementation?(k=Af(z,U.mode,J),k.return=U,k):(k=h(k,z.children||[]),k.return=U,k)}function $(U,k,z,J,ve){return k===null||k.tag!==7?(k=Xs(z,U.mode,J,ve),k.return=U,k):(k=h(k,z),k.return=U,k)}function Z(U,k,z){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Sf(""+k,U.mode,z),k.return=U,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case M:return z=Wu(k.type,k.key,k.props,null,U.mode,z),cl(z,k),z.return=U,z;case Q:return k=Af(k,U.mode,z),k.return=U,k;case w:return k=ea(k),Z(U,k,z)}if(ze(k)||L(k))return k=Xs(k,U.mode,z,null),k.return=U,k;if(typeof k.then=="function")return Z(U,ac(k),z);if(k.$$typeof===te)return Z(U,nc(U,k),z);oc(U,k)}return null}function H(U,k,z,J){var ve=k!==null?k.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ve!==null?null:b(U,k,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case M:return z.key===ve?D(U,k,z,J):null;case Q:return z.key===ve?B(U,k,z,J):null;case w:return z=ea(z),H(U,k,z,J)}if(ze(z)||L(z))return ve!==null?null:$(U,k,z,J,null);if(typeof z.then=="function")return H(U,k,ac(z),J);if(z.$$typeof===te)return H(U,k,nc(U,z),J);oc(U,z)}return null}function F(U,k,z,J,ve){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return U=U.get(z)||null,b(k,U,""+J,ve);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case M:return U=U.get(J.key===null?z:J.key)||null,D(k,U,J,ve);case Q:return U=U.get(J.key===null?z:J.key)||null,B(k,U,J,ve);case w:return J=ea(J),F(U,k,z,J,ve)}if(ze(J)||L(J))return U=U.get(z)||null,$(k,U,J,ve,null);if(typeof J.then=="function")return F(U,k,z,ac(J),ve);if(J.$$typeof===te)return F(U,k,z,nc(k,J),ve);oc(k,J)}return null}function de(U,k,z,J){for(var ve=null,Je=null,ge=k,Ve=k=0,He=null;ge!==null&&Ve<z.length;Ve++){ge.index>Ve?(He=ge,ge=null):He=ge.sibling;var Ze=H(U,ge,z[Ve],J);if(Ze===null){ge===null&&(ge=He);break}t&&ge&&Ze.alternate===null&&i(U,ge),k=d(Ze,k,Ve),Je===null?ve=Ze:Je.sibling=Ze,Je=Ze,ge=He}if(Ve===z.length)return a(U,ge),Ye&&mr(U,Ve),ve;if(ge===null){for(;Ve<z.length;Ve++)ge=Z(U,z[Ve],J),ge!==null&&(k=d(ge,k,Ve),Je===null?ve=ge:Je.sibling=ge,Je=ge);return Ye&&mr(U,Ve),ve}for(ge=l(ge);Ve<z.length;Ve++)He=F(ge,U,Ve,z[Ve],J),He!==null&&(t&&He.alternate!==null&&ge.delete(He.key===null?Ve:He.key),k=d(He,k,Ve),Je===null?ve=He:Je.sibling=He,Je=He);return t&&ge.forEach(function(ms){return i(U,ms)}),Ye&&mr(U,Ve),ve}function Te(U,k,z,J){if(z==null)throw Error(s(151));for(var ve=null,Je=null,ge=k,Ve=k=0,He=null,Ze=z.next();ge!==null&&!Ze.done;Ve++,Ze=z.next()){ge.index>Ve?(He=ge,ge=null):He=ge.sibling;var ms=H(U,ge,Ze.value,J);if(ms===null){ge===null&&(ge=He);break}t&&ge&&ms.alternate===null&&i(U,ge),k=d(ms,k,Ve),Je===null?ve=ms:Je.sibling=ms,Je=ms,ge=He}if(Ze.done)return a(U,ge),Ye&&mr(U,Ve),ve;if(ge===null){for(;!Ze.done;Ve++,Ze=z.next())Ze=Z(U,Ze.value,J),Ze!==null&&(k=d(Ze,k,Ve),Je===null?ve=Ze:Je.sibling=Ze,Je=Ze);return Ye&&mr(U,Ve),ve}for(ge=l(ge);!Ze.done;Ve++,Ze=z.next())Ze=F(ge,U,Ve,Ze.value,J),Ze!==null&&(t&&Ze.alternate!==null&&ge.delete(Ze.key===null?Ve:Ze.key),k=d(Ze,k,Ve),Je===null?ve=Ze:Je.sibling=Ze,Je=Ze);return t&&ge.forEach(function(aA){return i(U,aA)}),Ye&&mr(U,Ve),ve}function ct(U,k,z,J){if(typeof z=="object"&&z!==null&&z.type===Y&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case M:e:{for(var ve=z.key;k!==null;){if(k.key===ve){if(ve=z.type,ve===Y){if(k.tag===7){a(U,k.sibling),J=h(k,z.props.children),J.return=U,U=J;break e}}else if(k.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===w&&ea(ve)===k.type){a(U,k.sibling),J=h(k,z.props),cl(J,z),J.return=U,U=J;break e}a(U,k);break}else i(U,k);k=k.sibling}z.type===Y?(J=Xs(z.props.children,U.mode,J,z.key),J.return=U,U=J):(J=Wu(z.type,z.key,z.props,null,U.mode,J),cl(J,z),J.return=U,U=J)}return v(U);case Q:e:{for(ve=z.key;k!==null;){if(k.key===ve)if(k.tag===4&&k.stateNode.containerInfo===z.containerInfo&&k.stateNode.implementation===z.implementation){a(U,k.sibling),J=h(k,z.children||[]),J.return=U,U=J;break e}else{a(U,k);break}else i(U,k);k=k.sibling}J=Af(z,U.mode,J),J.return=U,U=J}return v(U);case w:return z=ea(z),ct(U,k,z,J)}if(ze(z))return de(U,k,z,J);if(L(z)){if(ve=L(z),typeof ve!="function")throw Error(s(150));return z=ve.call(z),Te(U,k,z,J)}if(typeof z.then=="function")return ct(U,k,ac(z),J);if(z.$$typeof===te)return ct(U,k,nc(U,z),J);oc(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,k!==null&&k.tag===6?(a(U,k.sibling),J=h(k,z),J.return=U,U=J):(a(U,k),J=Sf(z,U.mode,J),J.return=U,U=J),v(U)):a(U,k)}return function(U,k,z,J){try{ul=0;var ve=ct(U,k,z,J);return Ka=null,ve}catch(ge){if(ge===Qa||ge===rc)throw ge;var Je=$n(29,ge,null,U.mode);return Je.lanes=J,Je.return=U,Je}finally{}}}var na=Fp(!0),Qp=Fp(!1),Jr=!1;function Lf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Zr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Wr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(et&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Zu(t),Ip(t,null,a),i}return Ju(t,l,i,a),Zu(t)}function hl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,gn(t,a)}}function Pf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var jf=!1;function fl(){if(jf){var t=Fa;if(t!==null)throw t}}function dl(t,i,a,l){jf=!1;var h=t.updateQueue;Jr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var D=b,B=D.next;D.next=null,v===null?d=B:v.next=B,v=D;var $=t.alternate;$!==null&&($=$.updateQueue,b=$.lastBaseUpdate,b!==v&&(b===null?$.firstBaseUpdate=B:b.next=B,$.lastBaseUpdate=D))}if(d!==null){var Z=h.baseState;v=0,$=B=D=null,b=d;do{var H=b.lane&-536870913,F=H!==b.lane;if(F?(qe&H)===H:(l&H)===H){H!==0&&H===Ga&&(jf=!0),$!==null&&($=$.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var de=t,Te=b;H=i;var ct=a;switch(Te.tag){case 1:if(de=Te.payload,typeof de=="function"){Z=de.call(ct,Z,H);break e}Z=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=Te.payload,H=typeof de=="function"?de.call(ct,Z,H):de,H==null)break e;Z=T({},Z,H);break e;case 2:Jr=!0}}H=b.callback,H!==null&&(t.flags|=64,F&&(t.flags|=8192),F=h.callbacks,F===null?h.callbacks=[H]:F.push(H))}else F={lane:H,tag:b.tag,payload:b.payload,callback:b.callback,next:null},$===null?(B=$=F,D=Z):$=$.next=F,v|=H;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;F=b,b=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);$===null&&(D=Z),h.baseState=D,h.firstBaseUpdate=B,h.lastBaseUpdate=$,d===null&&(h.shared.lanes=0),rs|=v,t.lanes=v,t.memoizedState=Z}}function Kp(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Yp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Kp(a[t],i)}var Ya=V(null),lc=V(0);function Xp(t,i){t=wr,re(lc,t),re(Ya,i),wr=t|i.baseLanes}function zf(){re(lc,wr),re(Ya,Ya.current)}function Bf(){wr=lc.current,X(Ya),X(lc)}var Jn=V(null),mi=null;function es(t){var i=t.alternate;re(Nt,Nt.current&1),re(Jn,t),mi===null&&(i===null||Ya.current!==null||i.memoizedState!==null)&&(mi=t)}function qf(t){re(Nt,Nt.current),re(Jn,t),mi===null&&(mi=t)}function $p(t){t.tag===22?(re(Nt,Nt.current),re(Jn,t),mi===null&&(mi=t)):ts()}function ts(){re(Nt,Nt.current),re(Jn,Jn.current)}function Zn(t){X(Jn),mi===t&&(mi=null),X(Nt)}var Nt=V(0);function uc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Yd(a)||Xd(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var yr=0,Oe=null,lt=null,Pt=null,cc=!1,Xa=!1,ia=!1,hc=0,ml=0,$a=null,$T=0;function wt(){throw Error(s(321))}function Hf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Xn(t[a],i[a]))return!1;return!0}function Gf(t,i,a,l,h,d){return yr=d,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=t===null||t.memoizedState===null?My:sd,ia=!1,d=a(l,h),ia=!1,Xa&&(d=Zp(i,a,l,h)),Jp(t),d}function Jp(t){K.H=yl;var i=lt!==null&&lt.next!==null;if(yr=0,Pt=lt=Oe=null,cc=!1,ml=0,$a=null,i)throw Error(s(300));t===null||jt||(t=t.dependencies,t!==null&&tc(t)&&(jt=!0))}function Zp(t,i,a,l){Oe=t;var h=0;do{if(Xa&&($a=null),ml=0,Xa=!1,25<=h)throw Error(s(301));if(h+=1,Pt=lt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=Vy,d=i(a,l)}while(Xa);return d}function JT(){var t=K.H,i=t.useState()[0];return i=typeof i.then=="function"?gl(i):i,t=t.useState()[0],(lt!==null?lt.memoizedState:null)!==t&&(Oe.flags|=1024),i}function Ff(){var t=hc!==0;return hc=0,t}function Qf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Kf(t){if(cc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}cc=!1}yr=0,Pt=lt=Oe=null,Xa=!1,ml=hc=0,$a=null}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Oe.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function Dt(){if(lt===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var i=Pt===null?Oe.memoizedState:Pt.next;if(i!==null)Pt=i,lt=t;else{if(t===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Pt===null?Oe.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function fc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(t){var i=ml;return ml+=1,$a===null&&($a=[]),t=qp($a,t,i),i=Oe,(Pt===null?i.memoizedState:Pt.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?My:sd),t}function dc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gl(t);if(t.$$typeof===te)return an(t)}throw Error(s(438,String(t)))}function Yf(t){var i=null,a=Oe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=fc(),Oe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=O;return i.index++,a}function vr(t,i){return typeof i=="function"?i(t):i}function mc(t){var i=Dt();return Xf(i,lt,t)}function Xf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=v=null,D=null,B=i,$=!1;do{var Z=B.lane&-536870913;if(Z!==B.lane?(qe&Z)===Z:(yr&Z)===Z){var H=B.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),Z===Ga&&($=!0);else if((yr&H)===H){B=B.next,H===Ga&&($=!0);continue}else Z={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},D===null?(b=D=Z,v=d):D=D.next=Z,Oe.lanes|=H,rs|=H;Z=B.action,ia&&a(d,Z),d=B.hasEagerState?B.eagerState:a(d,Z)}else H={lane:Z,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},D===null?(b=D=H,v=d):D=D.next=H,Oe.lanes|=Z,rs|=Z;B=B.next}while(B!==null&&B!==i);if(D===null?v=d:D.next=b,!Xn(d,t.memoizedState)&&(jt=!0,$&&(a=Fa,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=D,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function $f(t){var i=Dt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);Xn(d,i.memoizedState)||(jt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Wp(t,i,a){var l=Oe,h=Dt(),d=Ye;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!Xn((lt||h).memoizedState,a);if(v&&(h.memoizedState=a,jt=!0),h=h.queue,Wf(ny.bind(null,l,h,t),[t]),h.getSnapshot!==i||v||Pt!==null&&Pt.memoizedState.tag&1){if(l.flags|=2048,Ja(9,{destroy:void 0},ty.bind(null,l,h,a,i),null),ft===null)throw Error(s(349));d||(yr&127)!==0||ey(l,i,a)}return a}function ey(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Oe.updateQueue,i===null?(i=fc(),Oe.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function ty(t,i,a,l){i.value=a,i.getSnapshot=l,iy(i)&&ry(t)}function ny(t,i,a){return a(function(){iy(i)&&ry(t)})}function iy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Xn(t,a)}catch{return!0}}function ry(t){var i=Ys(t,2);i!==null&&Un(i,t,2)}function Jf(t){var i=Cn();if(typeof t=="function"){var a=t;if(t=a(),ia){fn(!0);try{a()}finally{fn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:t},i}function sy(t,i,a,l){return t.baseState=a,Xf(t,lt,typeof l=="function"?l:vr)}function ZT(t,i,a,l,h){if(yc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,ay(i,d)):(d.next=a.next,i.pending=a.next=d)}}function ay(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=K.T,v={};K.T=v;try{var b=a(h,l),D=K.S;D!==null&&D(v,b),oy(t,i,b)}catch(B){Zf(t,i,B)}finally{d!==null&&v.types!==null&&(d.types=v.types),K.T=d}}else try{d=a(h,l),oy(t,i,d)}catch(B){Zf(t,i,B)}}function oy(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ly(t,i,l)},function(l){return Zf(t,i,l)}):ly(t,i,a)}function ly(t,i,a){i.status="fulfilled",i.value=a,uy(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,ay(t,a)))}function Zf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,uy(i),i=i.next;while(i!==l)}t.action=null}function uy(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function cy(t,i){return i}function hy(t,i){if(Ye){var a=ft.formState;if(a!==null){e:{var l=Oe;if(Ye){if(mt){t:{for(var h=mt,d=di;h.nodeType!==8;){if(!d){h=null;break t}if(h=gi(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){mt=gi(h.nextSibling),l=h.data==="F!";break e}}Xr(l)}l=!1}l&&(i=a[0])}}return a=Cn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cy,lastRenderedState:i},a.queue=l,a=Ny.bind(null,Oe,l),l.dispatch=a,l=Jf(!1),d=rd.bind(null,Oe,!1,l.queue),l=Cn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=ZT.bind(null,Oe,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function fy(t){var i=Dt();return dy(i,lt,t)}function dy(t,i,a){if(i=Xf(t,i,cy)[0],t=mc(vr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=gl(i)}catch(v){throw v===Qa?rc:v}else l=i;i=Dt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Oe.flags|=2048,Ja(9,{destroy:void 0},WT.bind(null,h,a),null)),[l,d,t]}function WT(t,i){t.action=i}function my(t){var i=Dt(),a=lt;if(a!==null)return dy(i,a,t);Dt(),i=i.memoizedState,a=Dt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Ja(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=fc(),Oe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function gy(){return Dt().memoizedState}function gc(t,i,a,l){var h=Cn();Oe.flags|=t,h.memoizedState=Ja(1|i,{destroy:void 0},a,l===void 0?null:l)}function pc(t,i,a,l){var h=Dt();l=l===void 0?null:l;var d=h.memoizedState.inst;lt!==null&&l!==null&&Hf(l,lt.memoizedState.deps)?h.memoizedState=Ja(i,d,a,l):(Oe.flags|=t,h.memoizedState=Ja(1|i,d,a,l))}function py(t,i){gc(8390656,8,t,i)}function Wf(t,i){pc(2048,8,t,i)}function eS(t){Oe.flags|=4;var i=Oe.updateQueue;if(i===null)i=fc(),Oe.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function yy(t){var i=Dt().memoizedState;return eS({ref:i,nextImpl:t}),function(){if((et&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function vy(t,i){return pc(4,2,t,i)}function _y(t,i){return pc(4,4,t,i)}function Ey(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function by(t,i,a){a=a!=null?a.concat([t]):null,pc(4,4,Ey.bind(null,i,t),a)}function ed(){}function Ty(t,i){var a=Dt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Hf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Sy(t,i){var a=Dt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Hf(i,l[1]))return l[0];if(l=t(),ia){fn(!0);try{t()}finally{fn(!1)}}return a.memoizedState=[l,i],l}function td(t,i,a){return a===void 0||(yr&1073741824)!==0&&(qe&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Av(),Oe.lanes|=t,rs|=t,a)}function Ay(t,i,a,l){return Xn(a,i)?a:Ya.current!==null?(t=td(t,a,l),Xn(t,i)||(jt=!0),t):(yr&42)===0||(yr&1073741824)!==0&&(qe&261930)===0?(jt=!0,t.memoizedState=a):(t=Av(),Oe.lanes|=t,rs|=t,i)}function wy(t,i,a,l,h){var d=ie.p;ie.p=d!==0&&8>d?d:8;var v=K.T,b={};K.T=b,rd(t,!1,i,a);try{var D=h(),B=K.S;if(B!==null&&B(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=XT(D,l);pl(t,i,$,ti(t))}else pl(t,i,l,ti(t))}catch(Z){pl(t,i,{then:function(){},status:"rejected",reason:Z},ti())}finally{ie.p=d,v!==null&&b.types!==null&&(v.types=b.types),K.T=v}}function tS(){}function nd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=xy(t).queue;wy(t,h,i,me,a===null?tS:function(){return Ry(t),a(l)})}function xy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:me},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Ry(t){var i=xy(t);i.next===null&&(i=t.alternate.memoizedState),pl(t,i.next.queue,{},ti())}function id(){return an(Ml)}function Cy(){return Dt().memoizedState}function Iy(){return Dt().memoizedState}function nS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=ti();t=Zr(a);var l=Wr(i,t,a);l!==null&&(Un(l,i,a),hl(l,i,a)),i={cache:Of()},t.payload=i;return}i=i.return}}function iS(t,i,a){var l=ti();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},yc(t)?Dy(i,a):(a=bf(t,i,a,l),a!==null&&(Un(a,t,l),Oy(a,i,l)))}function Ny(t,i,a){var l=ti();pl(t,i,a,l)}function pl(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(yc(t))Dy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,b=d(v,a);if(h.hasEagerState=!0,h.eagerState=b,Xn(b,v))return Ju(t,i,h,0),ft===null&&$u(),!1}catch{}finally{}if(a=bf(t,i,h,l),a!==null)return Un(a,t,l),Oy(a,i,l),!0}return!1}function rd(t,i,a,l){if(l={lane:2,revertLane:Ld(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},yc(t)){if(i)throw Error(s(479))}else i=bf(t,a,l,2),i!==null&&Un(i,t,2)}function yc(t){var i=t.alternate;return t===Oe||i!==null&&i===Oe}function Dy(t,i){Xa=cc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Oy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,gn(t,a)}}var yl={readContext:an,use:dc,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};yl.useEffectEvent=wt;var My={readContext:an,use:dc,useCallback:function(t,i){return Cn().memoizedState=[t,i===void 0?null:i],t},useContext:an,useEffect:py,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,gc(4194308,4,Ey.bind(null,i,t),a)},useLayoutEffect:function(t,i){return gc(4194308,4,t,i)},useInsertionEffect:function(t,i){gc(4,2,t,i)},useMemo:function(t,i){var a=Cn();i=i===void 0?null:i;var l=t();if(ia){fn(!0);try{t()}finally{fn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=Cn();if(a!==void 0){var h=a(i);if(ia){fn(!0);try{a(i)}finally{fn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=iS.bind(null,Oe,t),[l.memoizedState,t]},useRef:function(t){var i=Cn();return t={current:t},i.memoizedState=t},useState:function(t){t=Jf(t);var i=t.queue,a=Ny.bind(null,Oe,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:ed,useDeferredValue:function(t,i){var a=Cn();return td(a,t,i)},useTransition:function(){var t=Jf(!1);return t=wy.bind(null,Oe,t.queue,!0,!1),Cn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Oe,h=Cn();if(Ye){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ft===null)throw Error(s(349));(qe&127)!==0||ey(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,py(ny.bind(null,l,d,t),[t]),l.flags|=2048,Ja(9,{destroy:void 0},ty.bind(null,l,d,a,i),null),a},useId:function(){var t=Cn(),i=ft.identifierPrefix;if(Ye){var a=Ki,l=Qi;a=(l&~(1<<32-vt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=hc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=$T++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:id,useFormState:hy,useActionState:hy,useOptimistic:function(t){var i=Cn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=rd.bind(null,Oe,!0,a),a.dispatch=i,[t,i]},useMemoCache:Yf,useCacheRefresh:function(){return Cn().memoizedState=nS.bind(null,Oe)},useEffectEvent:function(t){var i=Cn(),a={impl:t};return i.memoizedState=a,function(){if((et&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},sd={readContext:an,use:dc,useCallback:Ty,useContext:an,useEffect:Wf,useImperativeHandle:by,useInsertionEffect:vy,useLayoutEffect:_y,useMemo:Sy,useReducer:mc,useRef:gy,useState:function(){return mc(vr)},useDebugValue:ed,useDeferredValue:function(t,i){var a=Dt();return Ay(a,lt.memoizedState,t,i)},useTransition:function(){var t=mc(vr)[0],i=Dt().memoizedState;return[typeof t=="boolean"?t:gl(t),i]},useSyncExternalStore:Wp,useId:Cy,useHostTransitionStatus:id,useFormState:fy,useActionState:fy,useOptimistic:function(t,i){var a=Dt();return sy(a,lt,t,i)},useMemoCache:Yf,useCacheRefresh:Iy};sd.useEffectEvent=yy;var Vy={readContext:an,use:dc,useCallback:Ty,useContext:an,useEffect:Wf,useImperativeHandle:by,useInsertionEffect:vy,useLayoutEffect:_y,useMemo:Sy,useReducer:$f,useRef:gy,useState:function(){return $f(vr)},useDebugValue:ed,useDeferredValue:function(t,i){var a=Dt();return lt===null?td(a,t,i):Ay(a,lt.memoizedState,t,i)},useTransition:function(){var t=$f(vr)[0],i=Dt().memoizedState;return[typeof t=="boolean"?t:gl(t),i]},useSyncExternalStore:Wp,useId:Cy,useHostTransitionStatus:id,useFormState:my,useActionState:my,useOptimistic:function(t,i){var a=Dt();return lt!==null?sy(a,lt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Yf,useCacheRefresh:Iy};Vy.useEffectEvent=yy;function ad(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var od={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=ti(),h=Zr(l);h.payload=i,a!=null&&(h.callback=a),i=Wr(t,h,l),i!==null&&(Un(i,t,l),hl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=ti(),h=Zr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Wr(t,h,l),i!==null&&(Un(i,t,l),hl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=ti(),l=Zr(a);l.tag=2,i!=null&&(l.callback=i),i=Wr(t,l,a),i!==null&&(Un(i,t,a),hl(i,t,a))}};function ky(t,i,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!il(a,l)||!il(h,d):!0}function Ly(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&od.enqueueReplaceState(i,i.state,null)}function ra(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Uy(t){Xu(t)}function Py(t){console.error(t)}function jy(t){Xu(t)}function vc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function zy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ld(t,i,a){return a=Zr(a),a.tag=3,a.payload={element:null},a.callback=function(){vc(t,i)},a}function By(t){return t=Zr(t),t.tag=3,t}function qy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){zy(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){zy(i,a,l),typeof h!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function rS(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ha(i,a,h,!0),a=Jn.current,a!==null){switch(a.tag){case 31:case 13:return mi===null?Nc():a.alternate===null&&xt===0&&(xt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===sc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Md(t,l,h)),!1;case 22:return a.flags|=65536,l===sc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Md(t,l,h)),!1}throw Error(s(435,a.tag))}return Md(t,l,h),Nc(),!1}if(Ye)return i=Jn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Rf&&(t=Error(s(422),{cause:l}),al(ci(t,a)))):(l!==Rf&&(i=Error(s(423),{cause:l}),al(ci(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=ci(l,a),h=ld(t.stateNode,l,h),Pf(t,h),xt!==4&&(xt=2)),!1;var d=Error(s(520),{cause:l});if(d=ci(d,a),wl===null?wl=[d]:wl.push(d),xt!==4&&(xt=2),i===null)return!0;l=ci(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=ld(a.stateNode,l,t),Pf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ss===null||!ss.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=By(h),qy(h,t,a,l),Pf(a,h),!1}a=a.return}while(a!==null);return!1}var ud=Error(s(461)),jt=!1;function on(t,i,a,l){i.child=t===null?Qp(i,null,a,l):na(i,t.child,a,l)}function Hy(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var b in l)b!=="ref"&&(v[b]=l[b])}else v=l;return Zs(i),l=Gf(t,i,a,v,d,h),b=Ff(),t!==null&&!jt?(Qf(t,i,h),_r(t,i,h)):(Ye&&b&&wf(i),i.flags|=1,on(t,i,l,h),i.child)}function Gy(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Tf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Fy(t,i,d,l,h)):(t=Wu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!yd(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:il,a(v,l)&&t.ref===i.ref)return _r(t,i,h)}return i.flags|=1,t=dr(d,l),t.ref=i.ref,t.return=i,i.child=t}function Fy(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(il(d,l)&&t.ref===i.ref)if(jt=!1,i.pendingProps=l=d,yd(t,h))(t.flags&131072)!==0&&(jt=!0);else return i.lanes=t.lanes,_r(t,i,h)}return cd(t,i,a,l,h)}function Qy(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return Ky(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&ic(i,d!==null?d.cachePool:null),d!==null?Xp(i,d):zf(),$p(i);else return l=i.lanes=536870912,Ky(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(ic(i,d.cachePool),Xp(i,d),ts(),i.memoizedState=null):(t!==null&&ic(i,null),zf(),ts());return on(t,i,h,a),i.child}function vl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Ky(t,i,a,l,h){var d=Vf();return d=d===null?null:{parent:Ut._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&ic(i,null),zf(),$p(i),t!==null&&Ha(t,i,l,!0),i.childLanes=h,null}function _c(t,i){return i=bc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Yy(t,i,a){return na(i,t.child,null,a),t=_c(i,i.pendingProps),t.flags|=2,Zn(i),i.memoizedState=null,t}function sS(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Ye){if(l.mode==="hidden")return t=_c(i,l),i.lanes=536870912,vl(null,t);if(qf(i),(t=mt)?(t=a_(t,di),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Kr!==null?{id:Qi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},a=Dp(t),a.return=i,i.child=a,sn=i,mt=null)):t=null,t===null)throw Xr(i);return i.lanes=536870912,null}return _c(i,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(qf(i),h)if(i.flags&256)i.flags&=-257,i=Yy(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(jt||Ha(t,i,a,!1),h=(a&t.childLanes)!==0,jt||h){if(l=ft,l!==null&&(v=An(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Ys(t,v),Un(l,t,v),ud;Nc(),i=Yy(t,i,a)}else t=d.treeContext,mt=gi(v.nextSibling),sn=i,Ye=!0,Yr=null,di=!1,t!==null&&Vp(i,t),i=_c(i,l),i.flags|=4096;return i}return t=dr(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Ec(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function cd(t,i,a,l,h){return Zs(i),a=Gf(t,i,a,l,void 0,h),l=Ff(),t!==null&&!jt?(Qf(t,i,h),_r(t,i,h)):(Ye&&l&&wf(i),i.flags|=1,on(t,i,a,h),i.child)}function Xy(t,i,a,l,h,d){return Zs(i),i.updateQueue=null,a=Zp(i,l,a,h),Jp(t),l=Ff(),t!==null&&!jt?(Qf(t,i,d),_r(t,i,d)):(Ye&&l&&wf(i),i.flags|=1,on(t,i,a,d),i.child)}function $y(t,i,a,l,h){if(Zs(i),i.stateNode===null){var d=ja,v=a.contextType;typeof v=="object"&&v!==null&&(d=an(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=od,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Lf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?an(v):ja,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(ad(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&od.enqueueReplaceState(d,d.state,null),dl(i,l,d,h),fl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,D=ra(a,b);d.props=D;var B=d.context,$=a.contextType;v=ja,typeof $=="object"&&$!==null&&(v=an($));var Z=a.getDerivedStateFromProps;$=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,$||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==v)&&Ly(i,d,l,v),Jr=!1;var H=i.memoizedState;d.state=H,dl(i,l,d,h),fl(),B=i.memoizedState,b||H!==B||Jr?(typeof Z=="function"&&(ad(i,a,Z,l),B=i.memoizedState),(D=Jr||ky(i,a,D,l,H,B,v))?($||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=v,l=D):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Uf(t,i),v=i.memoizedProps,$=ra(a,v),d.props=$,Z=i.pendingProps,H=d.context,B=a.contextType,D=ja,typeof B=="object"&&B!==null&&(D=an(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==Z||H!==D)&&Ly(i,d,l,D),Jr=!1,H=i.memoizedState,d.state=H,dl(i,l,d,h),fl();var F=i.memoizedState;v!==Z||H!==F||Jr||t!==null&&t.dependencies!==null&&tc(t.dependencies)?(typeof b=="function"&&(ad(i,a,b,l),F=i.memoizedState),($=Jr||ky(i,a,$,l,H,F,D)||t!==null&&t.dependencies!==null&&tc(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,F,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,F,D)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=D,l=$):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Ec(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=na(i,t.child,null,h),i.child=na(i,null,a,h)):on(t,i,a,h),i.memoizedState=d.state,t=i.child):t=_r(t,i,h),t}function Jy(t,i,a,l){return $s(),i.flags|=256,on(t,i,a,l),i.child}var hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fd(t){return{baseLanes:t,cachePool:zp()}}function dd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=ei),t}function Zy(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Nt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ye){if(h?es(i):ts(),(t=mt)?(t=a_(t,di),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Kr!==null?{id:Qi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},a=Dp(t),a.return=i,i.child=a,sn=i,mt=null)):t=null,t===null)throw Xr(i);return Xd(t)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,h?(ts(),h=i.mode,b=bc({mode:"hidden",children:b},h),l=Xs(l,h,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=fd(a),l.childLanes=dd(t,v,a),i.memoizedState=hd,vl(null,l)):(es(i),md(i,b))}var D=t.memoizedState;if(D!==null&&(b=D.dehydrated,b!==null)){if(d)i.flags&256?(es(i),i.flags&=-257,i=gd(t,i,a)):i.memoizedState!==null?(ts(),i.child=t.child,i.flags|=128,i=null):(ts(),b=l.fallback,h=i.mode,l=bc({mode:"visible",children:l.children},h),b=Xs(b,h,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,na(i,t.child,null,a),l=i.child,l.memoizedState=fd(a),l.childLanes=dd(t,v,a),i.memoizedState=hd,i=vl(null,l));else if(es(i),Xd(b)){if(v=b.nextSibling&&b.nextSibling.dataset,v)var B=v.dgst;v=B,l=Error(s(419)),l.stack="",l.digest=v,al({value:l,source:null,stack:null}),i=gd(t,i,a)}else if(jt||Ha(t,i,a,!1),v=(a&t.childLanes)!==0,jt||v){if(v=ft,v!==null&&(l=An(v,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,Ys(t,l),Un(v,t,l),ud;Yd(b)||Nc(),i=gd(t,i,a)}else Yd(b)?(i.flags|=192,i.child=t.child,i=null):(t=D.treeContext,mt=gi(b.nextSibling),sn=i,Ye=!0,Yr=null,di=!1,t!==null&&Vp(i,t),i=md(i,l.children),i.flags|=4096);return i}return h?(ts(),b=l.fallback,h=i.mode,D=t.child,B=D.sibling,l=dr(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,B!==null?b=dr(B,b):(b=Xs(b,h,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,vl(null,l),l=i.child,b=t.child.memoizedState,b===null?b=fd(a):(h=b.cachePool,h!==null?(D=Ut._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=zp(),b={baseLanes:b.baseLanes|a,cachePool:h}),l.memoizedState=b,l.childLanes=dd(t,v,a),i.memoizedState=hd,vl(t.child,l)):(es(i),a=t.child,t=a.sibling,a=dr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function md(t,i){return i=bc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function bc(t,i){return t=$n(22,t,null,i),t.lanes=0,t}function gd(t,i,a){return na(i,t.child,null,a),t=md(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Wy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Nf(t.return,i,a)}function pd(t,i,a,l,h,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=d)}function ev(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var v=Nt.current,b=(v&2)!==0;if(b?(v=v&1|2,i.flags|=128):v&=1,re(Nt,v),on(t,i,l,a),l=Ye?sl:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wy(t,a,i);else if(t.tag===19)Wy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&uc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),pd(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&uc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}pd(i,!0,a,null,d,l);break;case"together":pd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function _r(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),rs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ha(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=dr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=dr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function yd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&tc(t)))}function aS(t,i,a){switch(i.tag){case 3:tt(i,i.stateNode.containerInfo),$r(i,Ut,t.memoizedState.cache),$s();break;case 27:case 5:Le(i);break;case 4:tt(i,i.stateNode.containerInfo);break;case 10:$r(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,qf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(es(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Zy(t,i,a):(es(i),t=_r(t,i,a),t!==null?t.sibling:null);es(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ha(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return ev(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(Nt,Nt.current),l)break;return null;case 22:return i.lanes=0,Qy(t,i,a,i.pendingProps);case 24:$r(i,Ut,t.memoizedState.cache)}return _r(t,i,a)}function tv(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)jt=!0;else{if(!yd(t,a)&&(i.flags&128)===0)return jt=!1,aS(t,i,a);jt=(t.flags&131072)!==0}else jt=!1,Ye&&(i.flags&1048576)!==0&&Mp(i,sl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=ea(i.elementType),i.type=t,typeof t=="function")Tf(t)?(l=ra(t,l),i.tag=1,i=$y(null,i,t,l,a)):(i.tag=0,i=cd(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===ue){i.tag=11,i=Hy(null,i,t,l,a);break e}else if(h===R){i.tag=14,i=Gy(null,i,t,l,a);break e}}throw i=Ae(t)||t,Error(s(306,i,""))}}return i;case 0:return cd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=ra(l,i.pendingProps),$y(t,i,l,h,a);case 3:e:{if(tt(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Uf(t,i),dl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,$r(i,Ut,l),l!==d.cache&&Df(i,[Ut],a,!0),fl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Jy(t,i,l,a);break e}else if(l!==h){h=ci(Error(s(424)),i),al(h),i=Jy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(mt=gi(t.firstChild),sn=i,Ye=!0,Yr=null,di=!0,a=Qp(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if($s(),l===h){i=_r(t,i,a);break e}on(t,i,l,a)}i=i.child}return i;case 26:return Ec(t,i),t===null?(a=f_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ye||(a=i.type,t=i.pendingProps,l=Uc(ye.current).createElement(a),l[Vt]=i,l[Jt]=t,ln(l,a,t),kt(l),i.stateNode=l):i.memoizedState=f_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Le(i),t===null&&Ye&&(l=i.stateNode=u_(i.type,i.pendingProps,ye.current),sn=i,di=!0,h=mt,us(i.type)?($d=h,mt=gi(l.firstChild)):mt=h),on(t,i,i.pendingProps.children,a),Ec(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ye&&((h=l=mt)&&(l=LS(l,i.type,i.pendingProps,di),l!==null?(i.stateNode=l,sn=i,mt=gi(l.firstChild),di=!1,h=!0):h=!1),h||Xr(i)),Le(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,Fd(h,d)?l=null:v!==null&&Fd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Gf(t,i,JT,null,null,a),Ml._currentValue=h),Ec(t,i),on(t,i,l,a),i.child;case 6:return t===null&&Ye&&((t=a=mt)&&(a=US(a,i.pendingProps,di),a!==null?(i.stateNode=a,sn=i,mt=null,t=!0):t=!1),t||Xr(i)),null;case 13:return Zy(t,i,a);case 4:return tt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=na(i,null,l,a):on(t,i,l,a),i.child;case 11:return Hy(t,i,i.type,i.pendingProps,a);case 7:return on(t,i,i.pendingProps,a),i.child;case 8:return on(t,i,i.pendingProps.children,a),i.child;case 12:return on(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,$r(i,i.type,l.value),on(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Zs(i),h=an(h),l=l(h),i.flags|=1,on(t,i,l,a),i.child;case 14:return Gy(t,i,i.type,i.pendingProps,a);case 15:return Fy(t,i,i.type,i.pendingProps,a);case 19:return ev(t,i,a);case 31:return sS(t,i,a);case 22:return Qy(t,i,a,i.pendingProps);case 24:return Zs(i),l=an(Ut),t===null?(h=Vf(),h===null&&(h=ft,d=Of(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Lf(i),$r(i,Ut,h)):((t.lanes&a)!==0&&(Uf(t,i),dl(i,null,null,a),fl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),$r(i,Ut,l)):(l=d.cache,$r(i,Ut,l),l!==h.cache&&Df(i,[Ut],a,!0))),on(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Er(t){t.flags|=4}function vd(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Cv())t.flags|=8192;else throw ta=sc,kf}else t.flags&=-16777217}function nv(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!y_(i))if(Cv())t.flags|=8192;else throw ta=sc,kf}function Tc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?$t():536870912,t.lanes|=i,to|=i)}function _l(t,i){if(!Ye)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function gt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function oS(t,i,a){var l=i.pendingProps;switch(xf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(i),null;case 1:return gt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),pr(Ut),Be(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(qa(i)?Er(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Cf())),gt(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(Er(i),d!==null?(gt(i),nv(i,d)):(gt(i),vd(i,h,null,l,a))):d?d!==t.memoizedState?(Er(i),gt(i),nv(i,d)):(gt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&Er(i),gt(i),vd(i,h,t,l,a)),null;case 27:if(In(i),a=ye.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Er(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return gt(i),null}t=oe.current,qa(i)?kp(i):(t=u_(h,l,a),i.stateNode=t,Er(i))}return gt(i),null;case 5:if(In(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Er(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return gt(i),null}if(d=oe.current,qa(i))kp(i);else{var v=Uc(ye.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}d[Vt]=i,d[Jt]=l;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=d;e:switch(ln(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Er(i)}}return gt(i),vd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Er(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=ye.current,qa(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=sn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Vt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Zv(t.nodeValue,a)),t||Xr(i,!0)}else t=Uc(t).createTextNode(l),t[Vt]=i,i.stateNode=t}return gt(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=qa(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Vt]=i}else $s(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;gt(i),t=!1}else a=Cf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(Zn(i),i):(Zn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return gt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=qa(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Vt]=i}else $s(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;gt(i),h=!1}else h=Cf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Zn(i),i):(Zn(i),null)}return Zn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Tc(i,i.updateQueue),gt(i),null);case 4:return Be(),t===null&&zd(i.stateNode.containerInfo),gt(i),null;case 10:return pr(i.type),gt(i),null;case 19:if(X(Nt),l=i.memoizedState,l===null)return gt(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)_l(l,!1);else{if(xt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=uc(t),d!==null){for(i.flags|=128,_l(l,!1),t=d.updateQueue,i.updateQueue=t,Tc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Np(a,t),a=a.sibling;return re(Nt,Nt.current&1|2),Ye&&mr(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Xt()>Rc&&(i.flags|=128,h=!0,_l(l,!1),i.lanes=4194304)}else{if(!h)if(t=uc(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Tc(i,t),_l(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ye)return gt(i),null}else 2*Xt()-l.renderingStartTime>Rc&&a!==536870912&&(i.flags|=128,h=!0,_l(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Xt(),t.sibling=null,a=Nt.current,re(Nt,h?a&1|2:a&1),Ye&&mr(i,l.treeForkCount),t):(gt(i),null);case 22:case 23:return Zn(i),Bf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(gt(i),i.subtreeFlags&6&&(i.flags|=8192)):gt(i),a=i.updateQueue,a!==null&&Tc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&X(Ws),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),pr(Ut),gt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function lS(t,i){switch(xf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return pr(Ut),Be(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return In(i),null;case 31:if(i.memoizedState!==null){if(Zn(i),i.alternate===null)throw Error(s(340));$s()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Zn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));$s()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return X(Nt),null;case 4:return Be(),null;case 10:return pr(i.type),null;case 22:case 23:return Zn(i),Bf(),t!==null&&X(Ws),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return pr(Ut),null;case 25:return null;default:return null}}function iv(t,i){switch(xf(i),i.tag){case 3:pr(Ut),Be();break;case 26:case 27:case 5:In(i);break;case 4:Be();break;case 31:i.memoizedState!==null&&Zn(i);break;case 13:Zn(i);break;case 19:X(Nt);break;case 10:pr(i.type);break;case 22:case 23:Zn(i),Bf(),t!==null&&X(Ws);break;case 24:pr(Ut)}}function El(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(b){st(i,i.return,b)}}function ns(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,h=i;var D=a,B=b;try{B()}catch($){st(h,D,$)}}}l=l.next}while(l!==d)}}catch($){st(i,i.return,$)}}function rv(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Yp(i,a)}catch(l){st(t,t.return,l)}}}function sv(t,i,a){a.props=ra(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){st(t,i,l)}}function bl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){st(t,i,h)}}function Yi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){st(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){st(t,i,h)}else a.current=null}function av(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){st(t,t.return,h)}}function _d(t,i,a){try{var l=t.stateNode;NS(l,t.type,a,i),l[Jt]=i}catch(h){st(t,t.return,h)}}function ov(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&us(t.type)||t.tag===4}function Ed(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ov(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&us(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=_i));else if(l!==4&&(l===27&&us(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(bd(t,i,a),t=t.sibling;t!==null;)bd(t,i,a),t=t.sibling}function Sc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&us(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Sc(t,i,a),t=t.sibling;t!==null;)Sc(t,i,a),t=t.sibling}function lv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);ln(i,l,a),i[Vt]=t,i[Jt]=a}catch(d){st(t,t.return,d)}}var br=!1,zt=!1,Td=!1,uv=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function uS(t,i){if(t=t.containerInfo,Hd=Gc,t=bp(t),gf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,b=-1,D=-1,B=0,$=0,Z=t,H=null;t:for(;;){for(var F;Z!==a||h!==0&&Z.nodeType!==3||(b=v+h),Z!==d||l!==0&&Z.nodeType!==3||(D=v+l),Z.nodeType===3&&(v+=Z.nodeValue.length),(F=Z.firstChild)!==null;)H=Z,Z=F;for(;;){if(Z===t)break t;if(H===a&&++B===h&&(b=v),H===d&&++$===l&&(D=v),(F=Z.nextSibling)!==null)break;Z=H,H=Z.parentNode}Z=F}a=b===-1||D===-1?null:{start:b,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Gd={focusedElem:t,selectionRange:a},Gc=!1,Wt=i;Wt!==null;)if(i=Wt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Wt=t;else for(;Wt!==null;){switch(i=Wt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var de=ra(a.type,h);t=l.getSnapshotBeforeUpdate(de,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Te){st(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Kd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Kd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Wt=t;break}Wt=i.return}}function cv(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Sr(t,a),l&4&&El(5,a);break;case 1:if(Sr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){st(a,a.return,v)}else{var h=ra(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){st(a,a.return,v)}}l&64&&rv(a),l&512&&bl(a,a.return);break;case 3:if(Sr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Yp(t,i)}catch(v){st(a,a.return,v)}}break;case 27:i===null&&l&4&&lv(a);case 26:case 5:Sr(t,a),i===null&&l&4&&av(a),l&512&&bl(a,a.return);break;case 12:Sr(t,a);break;case 31:Sr(t,a),l&4&&dv(t,a);break;case 13:Sr(t,a),l&4&&mv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=vS.bind(null,a),PS(t,a))));break;case 22:if(l=a.memoizedState!==null||br,!l){i=i!==null&&i.memoizedState!==null||zt,h=br;var d=zt;br=l,(zt=i)&&!d?Ar(t,a,(a.subtreeFlags&8772)!==0):Sr(t,a),br=h,zt=d}break;case 30:break;default:Sr(t,a)}}function hv(t){var i=t.alternate;i!==null&&(t.alternate=null,hv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&wa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Tt=null,Mn=!1;function Tr(t,i,a){for(a=a.child;a!==null;)fv(t,i,a),a=a.sibling}function fv(t,i,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Gn,a)}catch{}switch(a.tag){case 26:zt||Yi(a,i),Tr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:zt||Yi(a,i);var l=Tt,h=Mn;us(a.type)&&(Tt=a.stateNode,Mn=!1),Tr(t,i,a),Nl(a.stateNode),Tt=l,Mn=h;break;case 5:zt||Yi(a,i);case 6:if(l=Tt,h=Mn,Tt=null,Tr(t,i,a),Tt=l,Mn=h,Tt!==null)if(Mn)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(a.stateNode)}catch(d){st(a,i,d)}else try{Tt.removeChild(a.stateNode)}catch(d){st(a,i,d)}break;case 18:Tt!==null&&(Mn?(t=Tt,r_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),uo(t)):r_(Tt,a.stateNode));break;case 4:l=Tt,h=Mn,Tt=a.stateNode.containerInfo,Mn=!0,Tr(t,i,a),Tt=l,Mn=h;break;case 0:case 11:case 14:case 15:ns(2,a,i),zt||ns(4,a,i),Tr(t,i,a);break;case 1:zt||(Yi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&sv(a,i,l)),Tr(t,i,a);break;case 21:Tr(t,i,a);break;case 22:zt=(l=zt)||a.memoizedState!==null,Tr(t,i,a),zt=l;break;default:Tr(t,i,a)}}function dv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{uo(t)}catch(a){st(i,i.return,a)}}}function mv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{uo(t)}catch(a){st(i,i.return,a)}}function cS(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new uv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new uv),i;default:throw Error(s(435,t.tag))}}function Ac(t,i){var a=cS(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=_S.bind(null,t,l);l.then(h,h)}})}function Vn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=i,b=v;e:for(;b!==null;){switch(b.tag){case 27:if(us(b.type)){Tt=b.stateNode,Mn=!1;break e}break;case 5:Tt=b.stateNode,Mn=!1;break e;case 3:case 4:Tt=b.stateNode.containerInfo,Mn=!0;break e}b=b.return}if(Tt===null)throw Error(s(160));fv(d,v,h),Tt=null,Mn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)gv(i,t),i=i.sibling}var wi=null;function gv(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Vn(i,t),kn(t),l&4&&(ns(3,t,t.return),El(3,t),ns(5,t,t.return));break;case 1:Vn(i,t),kn(t),l&512&&(zt||a===null||Yi(a,a.return)),l&64&&br&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=wi;if(Vn(i,t),kn(t),l&512&&(zt||a===null||Yi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Vi]||d[Vt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),ln(d,l,a),d[Vt]=t,kt(d),l=d;break e;case"link":var v=g_("link","href",h).get(l+(a.href||""));if(v){for(var b=0;b<v.length;b++)if(d=v[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(b,1);break t}}d=h.createElement(l),ln(d,l,a),h.head.appendChild(d);break;case"meta":if(v=g_("meta","content",h).get(l+(a.content||""))){for(b=0;b<v.length;b++)if(d=v[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(b,1);break t}}d=h.createElement(l),ln(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Vt]=t,kt(d),l=d}t.stateNode=l}else p_(h,t.type,t.stateNode);else t.stateNode=m_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?p_(h,t.type,t.stateNode):m_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&_d(t,t.memoizedProps,a.memoizedProps)}break;case 27:Vn(i,t),kn(t),l&512&&(zt||a===null||Yi(a,a.return)),a!==null&&l&4&&_d(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Vn(i,t),kn(t),l&512&&(zt||a===null||Yi(a,a.return)),t.flags&32){h=t.stateNode;try{On(h,"")}catch(de){st(t,t.return,de)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,_d(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Td=!0);break;case 6:if(Vn(i,t),kn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(de){st(t,t.return,de)}}break;case 3:if(zc=null,h=wi,wi=Pc(i.containerInfo),Vn(i,t),wi=h,kn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{uo(i.containerInfo)}catch(de){st(t,t.return,de)}Td&&(Td=!1,pv(t));break;case 4:l=wi,wi=Pc(t.stateNode.containerInfo),Vn(i,t),kn(t),wi=l;break;case 12:Vn(i,t),kn(t);break;case 31:Vn(i,t),kn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ac(t,l)));break;case 13:Vn(i,t),kn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xc=Xt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ac(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,B=br,$=zt;if(br=B||h,zt=$||D,Vn(i,t),zt=$,br=B,kn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||D||br||zt||sa(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){D=a=i;try{if(d=D.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{b=D.stateNode;var Z=D.memoizedProps.style,H=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;b.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(de){st(D,D.return,de)}}}else if(i.tag===6){if(a===null){D=i;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(de){st(D,D.return,de)}}}else if(i.tag===18){if(a===null){D=i;try{var F=D.stateNode;h?s_(F,!0):s_(D.stateNode,!1)}catch(de){st(D,D.return,de)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ac(t,a))));break;case 19:Vn(i,t),kn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ac(t,l)));break;case 30:break;case 21:break;default:Vn(i,t),kn(t)}}function kn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(ov(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Ed(t);Sc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(On(v,""),a.flags&=-33);var b=Ed(t);Sc(t,b,v);break;case 3:case 4:var D=a.stateNode.containerInfo,B=Ed(t);bd(t,B,D);break;default:throw Error(s(161))}}catch($){st(t,t.return,$)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function pv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;pv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Sr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)cv(t,i.alternate,i),i=i.sibling}function sa(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:ns(4,i,i.return),sa(i);break;case 1:Yi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&sv(i,i.return,a),sa(i);break;case 27:Nl(i.stateNode);case 26:case 5:Yi(i,i.return),sa(i);break;case 22:i.memoizedState===null&&sa(i);break;case 30:sa(i);break;default:sa(i)}t=t.sibling}}function Ar(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Ar(h,d,a),El(4,d);break;case 1:if(Ar(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){st(l,l.return,B)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)Kp(D[h],b)}catch(B){st(l,l.return,B)}}a&&v&64&&rv(d),bl(d,d.return);break;case 27:lv(d);case 26:case 5:Ar(h,d,a),a&&l===null&&v&4&&av(d),bl(d,d.return);break;case 12:Ar(h,d,a);break;case 31:Ar(h,d,a),a&&v&4&&dv(h,d);break;case 13:Ar(h,d,a),a&&v&4&&mv(h,d);break;case 22:d.memoizedState===null&&Ar(h,d,a),bl(d,d.return);break;case 30:break;default:Ar(h,d,a)}i=i.sibling}}function Sd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ol(a))}function Ad(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&ol(t))}function xi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)yv(t,i,a,l),i=i.sibling}function yv(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:xi(t,i,a,l),h&2048&&El(9,i);break;case 1:xi(t,i,a,l);break;case 3:xi(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&ol(t)));break;case 12:if(h&2048){xi(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,b=d.onPostCommit;typeof b=="function"&&b(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){st(i,i.return,D)}}else xi(t,i,a,l);break;case 31:xi(t,i,a,l);break;case 13:xi(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?xi(t,i,a,l):Tl(t,i):d._visibility&2?xi(t,i,a,l):(d._visibility|=2,Za(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Sd(v,i);break;case 24:xi(t,i,a,l),h&2048&&Ad(i.alternate,i);break;default:xi(t,i,a,l)}}function Za(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,v=i,b=a,D=l,B=v.flags;switch(v.tag){case 0:case 11:case 15:Za(d,v,b,D,h),El(8,v);break;case 23:break;case 22:var $=v.stateNode;v.memoizedState!==null?$._visibility&2?Za(d,v,b,D,h):Tl(d,v):($._visibility|=2,Za(d,v,b,D,h)),h&&B&2048&&Sd(v.alternate,v);break;case 24:Za(d,v,b,D,h),h&&B&2048&&Ad(v.alternate,v);break;default:Za(d,v,b,D,h)}i=i.sibling}}function Tl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:Tl(a,l),h&2048&&Sd(l.alternate,l);break;case 24:Tl(a,l),h&2048&&Ad(l.alternate,l);break;default:Tl(a,l)}i=i.sibling}}var Sl=8192;function Wa(t,i,a){if(t.subtreeFlags&Sl)for(t=t.child;t!==null;)vv(t,i,a),t=t.sibling}function vv(t,i,a){switch(t.tag){case 26:Wa(t,i,a),t.flags&Sl&&t.memoizedState!==null&&$S(a,wi,t.memoizedState,t.memoizedProps);break;case 5:Wa(t,i,a);break;case 3:case 4:var l=wi;wi=Pc(t.stateNode.containerInfo),Wa(t,i,a),wi=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Sl,Sl=16777216,Wa(t,i,a),Sl=l):Wa(t,i,a));break;default:Wa(t,i,a)}}function _v(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Al(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Wt=l,bv(l,t)}_v(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ev(t),t=t.sibling}function Ev(t){switch(t.tag){case 0:case 11:case 15:Al(t),t.flags&2048&&ns(9,t,t.return);break;case 3:Al(t);break;case 12:Al(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,wc(t)):Al(t);break;default:Al(t)}}function wc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Wt=l,bv(l,t)}_v(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:ns(8,i,i.return),wc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,wc(i));break;default:wc(i)}t=t.sibling}}function bv(t,i){for(;Wt!==null;){var a=Wt;switch(a.tag){case 0:case 11:case 15:ns(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ol(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Wt=l;else e:for(a=t;Wt!==null;){l=Wt;var h=l.sibling,d=l.return;if(hv(l),l===a){Wt=null;break e}if(h!==null){h.return=d,Wt=h;break e}Wt=d}}}var hS={getCacheForType:function(t){var i=an(Ut),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return an(Ut).controller.signal}},fS=typeof WeakMap=="function"?WeakMap:Map,et=0,ft=null,Pe=null,qe=0,rt=0,Wn=null,is=!1,eo=!1,wd=!1,wr=0,xt=0,rs=0,aa=0,xd=0,ei=0,to=0,wl=null,Ln=null,Rd=!1,xc=0,Tv=0,Rc=1/0,Cc=null,ss=null,Gt=0,as=null,no=null,xr=0,Cd=0,Id=null,Sv=null,xl=0,Nd=null;function ti(){return(et&2)!==0&&qe!==0?qe&-qe:K.T!==null?Ld():Qn()}function Av(){if(ei===0)if((qe&536870912)===0||Ye){var t=ur;ur<<=1,(ur&3932160)===0&&(ur=262144),ei=t}else ei=536870912;return t=Jn.current,t!==null&&(t.flags|=32),ei}function Un(t,i,a){(t===ft&&(rt===2||rt===9)||t.cancelPendingCommit!==null)&&(io(t,0),os(t,qe,ei,!1)),Nn(t,a),((et&2)===0||t!==ft)&&(t===ft&&((et&2)===0&&(aa|=a),xt===4&&os(t,qe,ei,!1)),Xi(t))}function wv(t,i,a){if((et&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Mt(t,i),h=l?gS(t,i):Od(t,i,!0),d=l;do{if(h===0){eo&&!l&&os(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!dS(a)){h=Od(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var b=t;h=wl;var D=b.current.memoizedState.isDehydrated;if(D&&(io(b,v).flags|=256),v=Od(b,v,!1),v!==2){if(wd&&!D){b.errorRecoveryDisabledLanes|=d,aa|=d,h=4;break e}d=Ln,Ln=h,d!==null&&(Ln===null?Ln=d:Ln.push.apply(Ln,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){io(t,0),os(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:os(l,i,ei,!is);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=xc+300-Xt(),10<h)){if(os(l,i,ei,!is),Et(l,0,!0)!==0)break e;xr=i,l.timeoutHandle=n_(xv.bind(null,l,a,Ln,Cc,Rd,i,ei,aa,to,is,d,"Throttled",-0,0),h);break e}xv(l,a,Ln,Cc,Rd,i,ei,aa,to,is,d,null,-0,0)}}break}while(!0);Xi(t)}function xv(t,i,a,l,h,d,v,b,D,B,$,Z,H,F){if(t.timeoutHandle=-1,Z=i.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_i},vv(i,d,Z);var de=(d&62914560)===d?xc-Xt():(d&4194048)===d?Tv-Xt():0;if(de=JS(Z,de),de!==null){xr=d,t.cancelPendingCommit=de(Vv.bind(null,t,i,d,a,l,h,v,b,D,$,Z,null,H,F)),os(t,d,v,!B);return}}Vv(t,i,d,a,l,h,v,b,D)}function dS(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Xn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function os(t,i,a,l){i&=~xd,i&=~aa,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-vt(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&mn(t,a,i)}function Ic(){return(et&6)===0?(Rl(0),!1):!0}function Dd(){if(Pe!==null){if(rt===0)var t=Pe.return;else t=Pe,gr=Js=null,Kf(t),Ka=null,ul=0,t=Pe;for(;t!==null;)iv(t.alternate,t),t=t.return;Pe=null}}function io(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,MS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),xr=0,Dd(),ft=t,Pe=a=dr(t.current,null),qe=i,rt=0,Wn=null,is=!1,eo=Mt(t,i),wd=!1,to=ei=xd=aa=rs=xt=0,Ln=wl=null,Rd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-vt(l),d=1<<h;i|=t[h],l&=~d}return wr=i,$u(),a}function Rv(t,i){Oe=null,K.H=yl,i===Qa||i===rc?(i=Hp(),rt=3):i===kf?(i=Hp(),rt=4):rt=i===ud?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Wn=i,Pe===null&&(xt=1,vc(t,ci(i,t.current)))}function Cv(){var t=Jn.current;return t===null?!0:(qe&4194048)===qe?mi===null:(qe&62914560)===qe||(qe&536870912)!==0?t===mi:!1}function Iv(){var t=K.H;return K.H=yl,t===null?yl:t}function Nv(){var t=K.A;return K.A=hS,t}function Nc(){xt=4,is||(qe&4194048)!==qe&&Jn.current!==null||(eo=!0),(rs&134217727)===0&&(aa&134217727)===0||ft===null||os(ft,qe,ei,!1)}function Od(t,i,a){var l=et;et|=2;var h=Iv(),d=Nv();(ft!==t||qe!==i)&&(Cc=null,io(t,i)),i=!1;var v=xt;e:do try{if(rt!==0&&Pe!==null){var b=Pe,D=Wn;switch(rt){case 8:Dd(),v=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(i=!0);var B=rt;if(rt=0,Wn=null,ro(t,b,D,B),a&&eo){v=0;break e}break;default:B=rt,rt=0,Wn=null,ro(t,b,D,B)}}mS(),v=xt;break}catch($){Rv(t,$)}while(!0);return i&&t.shellSuspendCounter++,gr=Js=null,et=l,K.H=h,K.A=d,Pe===null&&(ft=null,qe=0,$u()),v}function mS(){for(;Pe!==null;)Dv(Pe)}function gS(t,i){var a=et;et|=2;var l=Iv(),h=Nv();ft!==t||qe!==i?(Cc=null,Rc=Xt()+500,io(t,i)):eo=Mt(t,i);e:do try{if(rt!==0&&Pe!==null){i=Pe;var d=Wn;t:switch(rt){case 1:rt=0,Wn=null,ro(t,i,d,1);break;case 2:case 9:if(Bp(d)){rt=0,Wn=null,Ov(i);break}i=function(){rt!==2&&rt!==9||ft!==t||(rt=7),Xi(t)},d.then(i,i);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Bp(d)?(rt=0,Wn=null,Ov(i)):(rt=0,Wn=null,ro(t,i,d,7));break;case 5:var v=null;switch(Pe.tag){case 26:v=Pe.memoizedState;case 5:case 27:var b=Pe;if(v?y_(v):b.stateNode.complete){rt=0,Wn=null;var D=b.sibling;if(D!==null)Pe=D;else{var B=b.return;B!==null?(Pe=B,Dc(B)):Pe=null}break t}}rt=0,Wn=null,ro(t,i,d,5);break;case 6:rt=0,Wn=null,ro(t,i,d,6);break;case 8:Dd(),xt=6;break e;default:throw Error(s(462))}}pS();break}catch($){Rv(t,$)}while(!0);return gr=Js=null,K.H=l,K.A=h,et=a,Pe!==null?0:(ft=null,qe=0,$u(),xt)}function pS(){for(;Pe!==null&&!Ur();)Dv(Pe)}function Dv(t){var i=tv(t.alternate,t,wr);t.memoizedProps=t.pendingProps,i===null?Dc(t):Pe=i}function Ov(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Xy(a,i,i.pendingProps,i.type,void 0,qe);break;case 11:i=Xy(a,i,i.pendingProps,i.type.render,i.ref,qe);break;case 5:Kf(i);default:iv(a,i),i=Pe=Np(i,wr),i=tv(a,i,wr)}t.memoizedProps=t.pendingProps,i===null?Dc(t):Pe=i}function ro(t,i,a,l){gr=Js=null,Kf(i),Ka=null,ul=0;var h=i.return;try{if(rS(t,h,i,a,qe)){xt=1,vc(t,ci(a,t.current)),Pe=null;return}}catch(d){if(h!==null)throw Pe=h,d;xt=1,vc(t,ci(a,t.current)),Pe=null;return}i.flags&32768?(Ye||l===1?t=!0:eo||(qe&536870912)!==0?t=!1:(is=t=!0,(l===2||l===9||l===3||l===6)&&(l=Jn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Mv(i,t)):Dc(i)}function Dc(t){var i=t;do{if((i.flags&32768)!==0){Mv(i,is);return}t=i.return;var a=oS(i.alternate,i,wr);if(a!==null){Pe=a;return}if(i=i.sibling,i!==null){Pe=i;return}Pe=i=t}while(i!==null);xt===0&&(xt=5)}function Mv(t,i){do{var a=lS(t.alternate,t);if(a!==null){a.flags&=32767,Pe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Pe=t;return}Pe=t=a}while(t!==null);xt=6,Pe=null}function Vv(t,i,a,l,h,d,v,b,D){t.cancelPendingCommit=null;do Oc();while(Gt!==0);if((et&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Ef,Ct(t,a,d,v,b,D),t===ft&&(Pe=ft=null,qe=0),no=i,as=t,xr=a,Cd=d,Id=h,Sv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ES(Sn,function(){return jv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=ie.p,ie.p=2,v=et,et|=4;try{uS(t,i,a)}finally{et=v,ie.p=h,K.T=l}}Gt=1,kv(),Lv(),Uv()}}function kv(){if(Gt===1){Gt=0;var t=as,i=no,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=ie.p;ie.p=2;var h=et;et|=4;try{gv(i,t);var d=Gd,v=bp(t.containerInfo),b=d.focusedElem,D=d.selectionRange;if(v!==b&&b&&b.ownerDocument&&Ep(b.ownerDocument.documentElement,b)){if(D!==null&&gf(b)){var B=D.start,$=D.end;if($===void 0&&($=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min($,b.value.length);else{var Z=b.ownerDocument||document,H=Z&&Z.defaultView||window;if(H.getSelection){var F=H.getSelection(),de=b.textContent.length,Te=Math.min(D.start,de),ct=D.end===void 0?Te:Math.min(D.end,de);!F.extend&&Te>ct&&(v=ct,ct=Te,Te=v);var U=_p(b,Te),k=_p(b,ct);if(U&&k&&(F.rangeCount!==1||F.anchorNode!==U.node||F.anchorOffset!==U.offset||F.focusNode!==k.node||F.focusOffset!==k.offset)){var z=Z.createRange();z.setStart(U.node,U.offset),F.removeAllRanges(),Te>ct?(F.addRange(z),F.extend(k.node,k.offset)):(z.setEnd(k.node,k.offset),F.addRange(z))}}}}for(Z=[],F=b;F=F.parentNode;)F.nodeType===1&&Z.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<Z.length;b++){var J=Z[b];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Gc=!!Hd,Gd=Hd=null}finally{et=h,ie.p=l,K.T=a}}t.current=i,Gt=2}}function Lv(){if(Gt===2){Gt=0;var t=as,i=no,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=ie.p;ie.p=2;var h=et;et|=4;try{cv(t,i.alternate,i)}finally{et=h,ie.p=l,K.T=a}}Gt=3}}function Uv(){if(Gt===4||Gt===3){Gt=0,Ms();var t=as,i=no,a=xr,l=Sv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Gt=5:(Gt=0,no=as=null,Pv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ss=null),wn(a),i=i.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Gn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=K.T,h=ie.p,ie.p=2,K.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var b=l[v];d(b.value,{componentStack:b.stack})}}finally{K.T=i,ie.p=h}}(xr&3)!==0&&Oc(),Xi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Nd?xl++:(xl=0,Nd=t):xl=0,Rl(0)}}function Pv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,ol(i)))}function Oc(){return kv(),Lv(),Uv(),jv()}function jv(){if(Gt!==5)return!1;var t=as,i=Cd;Cd=0;var a=wn(xr),l=K.T,h=ie.p;try{ie.p=32>a?32:a,K.T=null,a=Id,Id=null;var d=as,v=xr;if(Gt=0,no=as=null,xr=0,(et&6)!==0)throw Error(s(331));var b=et;if(et|=4,Ev(d.current),yv(d,d.current,v,a),et=b,Rl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Gn,d)}catch{}return!0}finally{ie.p=h,K.T=l,Pv(t,i)}}function zv(t,i,a){i=ci(a,i),i=ld(t.stateNode,i,2),t=Wr(t,i,2),t!==null&&(Nn(t,2),Xi(t))}function st(t,i,a){if(t.tag===3)zv(t,t,a);else for(;i!==null;){if(i.tag===3){zv(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ss===null||!ss.has(l))){t=ci(a,t),a=By(2),l=Wr(i,a,2),l!==null&&(qy(a,l,i,t),Nn(l,2),Xi(l));break}}i=i.return}}function Md(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new fS;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(wd=!0,h.add(a),t=yS.bind(null,t,i,a),i.then(t,t))}function yS(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ft===t&&(qe&a)===a&&(xt===4||xt===3&&(qe&62914560)===qe&&300>Xt()-xc?(et&2)===0&&io(t,0):xd|=a,to===qe&&(to=0)),Xi(t)}function Bv(t,i){i===0&&(i=$t()),t=Ys(t,i),t!==null&&(Nn(t,i),Xi(t))}function vS(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Bv(t,a)}function _S(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Bv(t,a)}function ES(t,i){return at(t,i)}var Mc=null,so=null,Vd=!1,Vc=!1,kd=!1,ls=0;function Xi(t){t!==so&&t.next===null&&(so===null?Mc=so=t:so=so.next=t),Vc=!0,Vd||(Vd=!0,TS())}function Rl(t,i){if(!kd&&Vc){kd=!0;do for(var a=!1,l=Mc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-vt(42|t)+1)-1,d&=h&~(v&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Fv(l,d))}else d=qe,d=Et(l,l===ft?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Mt(l,d)||(a=!0,Fv(l,d));l=l.next}while(a);kd=!1}}function bS(){qv()}function qv(){Vc=Vd=!1;var t=0;ls!==0&&OS()&&(t=ls);for(var i=Xt(),a=null,l=Mc;l!==null;){var h=l.next,d=Hv(l,i);d===0?(l.next=null,a===null?Mc=h:a.next=h,h===null&&(so=a)):(a=l,(t!==0||(d&3)!==0)&&(Vc=!0)),l=h}Gt!==0&&Gt!==5||Rl(t),ls!==0&&(ls=0)}function Hv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-vt(d),b=1<<v,D=h[v];D===-1?((b&a)===0||(b&l)!==0)&&(h[v]=dn(b,i)):D<=i&&(t.expiredLanes|=b),d&=~b}if(i=ft,a=qe,a=Et(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(rt===2||rt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&qn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Mt(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&qn(l),wn(a)){case 2:case 8:a=ii;break;case 32:a=Sn;break;case 268435456:a=ks;break;default:a=Sn}return l=Gv.bind(null,t),a=at(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&qn(l),t.callbackPriority=2,t.callbackNode=null,2}function Gv(t,i){if(Gt!==0&&Gt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Oc()&&t.callbackNode!==a)return null;var l=qe;return l=Et(t,t===ft?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(wv(t,l,i),Hv(t,Xt()),t.callbackNode!=null&&t.callbackNode===a?Gv.bind(null,t):null)}function Fv(t,i){if(Oc())return null;wv(t,i,!0)}function TS(){VS(function(){(et&6)!==0?at(Vs,bS):qv()})}function Ld(){if(ls===0){var t=Ga;t===0&&(t=ri,ri<<=1,(ri&261888)===0&&(ri=256)),ls=t}return ls}function Qv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ia(""+t)}function Kv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function SS(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=Qv((h[Jt]||null).action),v=l.submitter;v&&(i=(i=v[Jt]||null)?Qv(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var b=new qi("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ls!==0){var D=v?Kv(h,v):new FormData(h);nd(a,{pending:!0,data:D,method:h.method,action:d},null,D)}}else typeof d=="function"&&(b.preventDefault(),D=v?Kv(h,v):new FormData(h),nd(a,{pending:!0,data:D,method:h.method,action:d},d,D))},currentTarget:h}]})}}for(var Ud=0;Ud<_f.length;Ud++){var Pd=_f[Ud],AS=Pd.toLowerCase(),wS=Pd[0].toUpperCase()+Pd.slice(1);Ai(AS,"on"+wS)}Ai(Ap,"onAnimationEnd"),Ai(wp,"onAnimationIteration"),Ai(xp,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(BT,"onTransitionRun"),Ai(qT,"onTransitionStart"),Ai(HT,"onTransitionCancel"),Ai(Rp,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),Ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cl));function Yv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var b=l[v],D=b.instance,B=b.currentTarget;if(b=b.listener,D!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch($){Xu($)}h.currentTarget=null,d=D}else for(v=0;v<l.length;v++){if(b=l[v],D=b.instance,B=b.currentTarget,b=b.listener,D!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch($){Xu($)}h.currentTarget=null,d=D}}}}function je(t,i){var a=i[Aa];a===void 0&&(a=i[Aa]=new Set);var l=t+"__bubble";a.has(l)||(Xv(i,t,2,!1),a.add(l))}function jd(t,i,a){var l=0;i&&(l|=4),Xv(a,t,l,i)}var kc="_reactListening"+Math.random().toString(36).slice(2);function zd(t){if(!t[kc]){t[kc]=!0,zo.forEach(function(a){a!=="selectionchange"&&(xS.has(a)||jd(a,!1,t),jd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[kc]||(i[kc]=!0,jd("selectionchange",!1,i))}}function Xv(t,i,a,l){switch(A_(i)){case 2:var h=eA;break;case 8:h=tA;break;default:h=tm}a=h.bind(null,i,a,t),h=void 0,!zs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Bd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var b=l.stateNode.containerInfo;if(b===h)break;if(v===4)for(v=l.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;b!==null;){if(v=ki(b),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){l=d=v;continue e}b=b.parentNode}}l=l.return}Hr(function(){var B=d,$=ai(a),Z=[];e:{var H=Cp.get(t);if(H!==void 0){var F=qi,de=t;switch(t){case"keypress":if(qs(a)===0)break e;case"keydown":case"keyup":F=Qu;break;case"focusin":de="focus",F=Gs;break;case"focusout":de="blur",F=Gs;break;case"beforeblur":case"afterblur":F=Gs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=g;break;case Ap:case wp:case xp:F=ju;break;case Rp:F=A;break;case"scroll":case"scrollend":F=Zo;break;case"wheel":F=G;break;case"copy":case"cut":case"paste":F=zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=fr;break;case"toggle":case"beforetoggle":F=De}var Te=(i&4)!==0,ct=!Te&&(t==="scroll"||t==="scrollend"),U=Te?H!==null?H+"Capture":null:H;Te=[];for(var k=B,z;k!==null;){var J=k;if(z=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||z===null||U===null||(J=Ei(k,U),J!=null&&Te.push(Il(k,J,z))),ct)break;k=k.return}0<Te.length&&(H=new F(H,de,null,a,$),Z.push({event:H,listeners:Te}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",H&&a!==Xo&&(de=a.relatedTarget||a.fromElement)&&(ki(de)||de[Mi]))break e;if((F||H)&&(H=$.window===$?$:(H=$.ownerDocument)?H.defaultView||H.parentWindow:window,F?(de=a.relatedTarget||a.toElement,F=B,de=de?ki(de):null,de!==null&&(ct=u(de),Te=de.tag,de!==ct||Te!==5&&Te!==27&&Te!==6)&&(de=null)):(F=null,de=B),F!==de)){if(Te=Wo,J="onMouseLeave",U="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(Te=fr,J="onPointerLeave",U="onPointerEnter",k="pointer"),ct=F==null?H:Kn(F),z=de==null?H:Kn(de),H=new Te(J,k+"leave",F,a,$),H.target=ct,H.relatedTarget=z,J=null,ki($)===B&&(Te=new Te(U,k+"enter",de,a,$),Te.target=z,Te.relatedTarget=ct,J=Te),ct=J,F&&de)t:{for(Te=RS,U=F,k=de,z=0,J=U;J;J=Te(J))z++;J=0;for(var ve=k;ve;ve=Te(ve))J++;for(;0<z-J;)U=Te(U),z--;for(;0<J-z;)k=Te(k),J--;for(;z--;){if(U===k||k!==null&&U===k.alternate){Te=U;break t}U=Te(U),k=Te(k)}Te=null}else Te=null;F!==null&&$v(Z,H,F,Te,!1),de!==null&&ct!==null&&$v(Z,ct,de,Te,!0)}}e:{if(H=B?Kn(B):window,F=H.nodeName&&H.nodeName.toLowerCase(),F==="select"||F==="input"&&H.type==="file")var Je=dp;else if(hp(H))if(mp)Je=PT;else{Je=LT;var ge=kT}else F=H.nodeName,!F||F.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?B&&Ca(B.elementType)&&(Je=dp):Je=UT;if(Je&&(Je=Je(t,B))){fp(Z,Je,a,$);break e}ge&&ge(t,H,B),t==="focusout"&&B&&H.type==="number"&&B.memoizedProps.value!=null&&Qo(H,"number",H.value)}switch(ge=B?Kn(B):window,t){case"focusin":(hp(ge)||ge.contentEditable==="true")&&(La=ge,pf=B,rl=null);break;case"focusout":rl=pf=La=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,Tp(Z,a,$);break;case"selectionchange":if(zT)break;case"keydown":case"keyup":Tp(Z,a,$)}var Ve;if(We)e:{switch(t){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else ka?Fs(t,a)&&(He="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(He="onCompositionStart");He&&(Fi&&a.locale!=="ko"&&(ka||He!=="onCompositionStart"?He==="onCompositionEnd"&&ka&&(Ve=Jo()):(Bi=$,$o="value"in Bi?Bi.value:Bi.textContent,ka=!0)),ge=Lc(B,He),0<ge.length&&(He=new Gi(He,t,null,a,$),Z.push({event:He,listeners:ge}),Ve?He.data=Ve:(Ve=Va(a),Ve!==null&&(He.data=Ve)))),(Ve=li?DT(t,a):OT(t,a))&&(He=Lc(B,"onBeforeInput"),0<He.length&&(ge=new Gi("onBeforeInput","beforeinput",null,a,$),Z.push({event:ge,listeners:He}),ge.data=Ve)),SS(Z,t,B,a,$)}Yv(Z,i)})}function Il(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Lc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Ei(t,a),h!=null&&l.unshift(Il(t,h,d)),h=Ei(t,i),h!=null&&l.push(Il(t,h,d))),t.tag===3)return l;t=t.return}return[]}function RS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function $v(t,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var b=a,D=b.alternate,B=b.stateNode;if(b=b.tag,D!==null&&D===l)break;b!==5&&b!==26&&b!==27||B===null||(D=B,h?(B=Ei(a,d),B!=null&&v.unshift(Il(a,B,D))):h||(B=Ei(a,d),B!=null&&v.push(Il(a,B,D)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var CS=/\r\n?/g,IS=/\u0000|\uFFFD/g;function Jv(t){return(typeof t=="string"?t:""+t).replace(CS,`
`).replace(IS,"")}function Zv(t,i){return i=Jv(i),Jv(t)===i}function ut(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||On(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&On(t,""+l);break;case"className":Yn(t,"class",l);break;case"tabIndex":Yn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Yn(t,a,l);break;case"style":Yo(t,l,d);break;case"data":if(i!=="object"){Yn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ia(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&ut(t,i,"name",h.name,h,null),ut(t,i,"formEncType",h.formEncType,h,null),ut(t,i,"formMethod",h.formMethod,h,null),ut(t,i,"formTarget",h.formTarget,h,null)):(ut(t,i,"encType",h.encType,h,null),ut(t,i,"method",h.method,h,null),ut(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ia(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=_i);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ia(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),xa(t,"popover",l);break;case"xlinkActuate":Lt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Lt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Lt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Lt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Lt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Lt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":xa(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Lu.get(a)||a,xa(t,a,l))}}function qd(t,i,a,l,h,d){switch(a){case"style":Yo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?On(t,l):(typeof l=="number"||typeof l=="bigint")&&On(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=_i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Jt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):xa(t,a,l)}}}function ln(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ut(t,i,d,v,a,null)}}h&&ut(t,i,"srcSet",a.srcSet,a,null),l&&ut(t,i,"src",a.src,a,null);return;case"input":je("invalid",t);var b=d=v=h=null,D=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":h=$;break;case"type":v=$;break;case"checked":D=$;break;case"defaultChecked":B=$;break;case"value":d=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:ut(t,i,l,$,a,null)}}Mu(t,d,b,D,B,v,h,!1);return;case"select":je("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":v=b;break;case"multiple":l=b;default:ut(t,i,h,b,a,null)}i=d,a=v,t.multiple=!!l,i!=null?jr(t,!!l,i,!1):a!=null&&jr(t,!!l,a,!0);return;case"textarea":je("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(b=a[v],b!=null))switch(v){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:ut(t,i,v,b,a,null)}zr(t,l,h,d);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ut(t,i,D,l,a,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<Cl.length;l++)je(Cl[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ut(t,i,B,l,a,null)}return;default:if(Ca(i)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&qd(t,i,$,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&ut(t,i,b,l,a,null))}function NS(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,b=null,D=null,B=null,$=null;for(F in a){var Z=a[F];if(a.hasOwnProperty(F)&&Z!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":D=Z;default:l.hasOwnProperty(F)||ut(t,i,F,null,l,Z)}}for(var H in l){var F=l[H];if(Z=a[H],l.hasOwnProperty(H)&&(F!=null||Z!=null))switch(H){case"type":d=F;break;case"name":h=F;break;case"checked":B=F;break;case"defaultChecked":$=F;break;case"value":v=F;break;case"defaultValue":b=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:F!==Z&&ut(t,i,H,F,l,Z)}}Ra(t,v,b,D,B,$,d,h);return;case"select":F=v=b=H=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":F=D;default:l.hasOwnProperty(d)||ut(t,i,d,null,l,D)}for(h in l)if(d=l[h],D=a[h],l.hasOwnProperty(h)&&(d!=null||D!=null))switch(h){case"value":H=d;break;case"defaultValue":b=d;break;case"multiple":v=d;default:d!==D&&ut(t,i,h,d,l,D)}i=b,a=v,l=F,H!=null?jr(t,!!a,H,!1):!!l!=!!a&&(i!=null?jr(t,!!a,i,!0):jr(t,!!a,a?[]:"",!1));return;case"textarea":F=H=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ut(t,i,b,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":H=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&ut(t,i,v,h,l,d)}Vu(t,H,F);return;case"option":for(var de in a)if(H=a[de],a.hasOwnProperty(de)&&H!=null&&!l.hasOwnProperty(de))switch(de){case"selected":t.selected=!1;break;default:ut(t,i,de,null,l,H)}for(D in l)if(H=l[D],F=a[D],l.hasOwnProperty(D)&&H!==F&&(H!=null||F!=null))switch(D){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:ut(t,i,D,H,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)H=a[Te],a.hasOwnProperty(Te)&&H!=null&&!l.hasOwnProperty(Te)&&ut(t,i,Te,null,l,H);for(B in l)if(H=l[B],F=a[B],l.hasOwnProperty(B)&&H!==F&&(H!=null||F!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:ut(t,i,B,H,l,F)}return;default:if(Ca(i)){for(var ct in a)H=a[ct],a.hasOwnProperty(ct)&&H!==void 0&&!l.hasOwnProperty(ct)&&qd(t,i,ct,void 0,l,H);for($ in l)H=l[$],F=a[$],!l.hasOwnProperty($)||H===F||H===void 0&&F===void 0||qd(t,i,$,H,l,F);return}}for(var U in a)H=a[U],a.hasOwnProperty(U)&&H!=null&&!l.hasOwnProperty(U)&&ut(t,i,U,null,l,H);for(Z in l)H=l[Z],F=a[Z],!l.hasOwnProperty(Z)||H===F||H==null&&F==null||ut(t,i,Z,H,l,F)}function Wv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,v=h.initiatorType,b=h.duration;if(d&&b&&Wv(v)){for(v=0,b=h.responseEnd,l+=1;l<a.length;l++){var D=a[l],B=D.startTime;if(B>b)break;var $=D.transferSize,Z=D.initiatorType;$&&Wv(Z)&&(D=D.responseEnd,v+=$*(D<b?1:(b-B)/(D-B)))}if(--l,i+=8*(d+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Hd=null,Gd=null;function Uc(t){return t.nodeType===9?t:t.ownerDocument}function e_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function t_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Fd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Qd=null;function OS(){var t=window.event;return t&&t.type==="popstate"?t===Qd?!1:(Qd=t,!0):(Qd=null,!1)}var n_=typeof setTimeout=="function"?setTimeout:void 0,MS=typeof clearTimeout=="function"?clearTimeout:void 0,i_=typeof Promise=="function"?Promise:void 0,VS=typeof queueMicrotask=="function"?queueMicrotask:typeof i_<"u"?function(t){return i_.resolve(null).then(t).catch(kS)}:n_;function kS(t){setTimeout(function(){throw t})}function us(t){return t==="head"}function r_(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),uo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Nl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Nl(a);for(var d=a.firstChild;d;){var v=d.nextSibling,b=d.nodeName;d[Vi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&Nl(t.ownerDocument.body);a=h}while(a);uo(i)}function s_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Kd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Kd(a),wa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function LS(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Vi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=gi(t.nextSibling),t===null)break}return null}function US(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=gi(t.nextSibling),t===null))return null;return t}function a_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=gi(t.nextSibling),t===null))return null;return t}function Yd(t){return t.data==="$?"||t.data==="$~"}function Xd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function PS(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function gi(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var $d=null;function o_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return gi(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function l_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function u_(t,i,a){switch(i=Uc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Nl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);wa(t)}var pi=new Map,c_=new Set;function Pc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Rr=ie.d;ie.d={f:jS,r:zS,D:BS,C:qS,L:HS,m:GS,X:QS,S:FS,M:KS};function jS(){var t=Rr.f(),i=Ic();return t||i}function zS(t){var i=si(t);i!==null&&i.tag===5&&i.type==="form"?Ry(i):Rr.r(t)}var ao=typeof document>"u"?null:document;function h_(t,i,a){var l=ao;if(l&&typeof i=="string"&&i){var h=Dn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),c_.has(h)||(c_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),ln(i,"link",t),kt(i),l.head.appendChild(i)))}}function BS(t){Rr.D(t),h_("dns-prefetch",t,null)}function qS(t,i){Rr.C(t,i),h_("preconnect",t,i)}function HS(t,i,a){Rr.L(t,i,a);var l=ao;if(l&&t&&i){var h='link[rel="preload"][as="'+Dn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Dn(a.imageSizes)+'"]')):h+='[href="'+Dn(t)+'"]';var d=h;switch(i){case"style":d=oo(t);break;case"script":d=lo(t)}pi.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),pi.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Dl(d))||i==="script"&&l.querySelector(Ol(d))||(i=l.createElement("link"),ln(i,"link",t),kt(i),l.head.appendChild(i)))}}function GS(t,i){Rr.m(t,i);var a=ao;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Dn(l)+'"][href="'+Dn(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=lo(t)}if(!pi.has(d)&&(t=T({rel:"modulepreload",href:t},i),pi.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ol(d)))return}l=a.createElement("link"),ln(l,"link",t),kt(l),a.head.appendChild(l)}}}function FS(t,i,a){Rr.S(t,i,a);var l=ao;if(l&&t){var h=Li(l).hoistableStyles,d=oo(t);i=i||"default";var v=h.get(d);if(!v){var b={loading:0,preload:null};if(v=l.querySelector(Dl(d)))b.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=pi.get(d))&&Jd(t,a);var D=v=l.createElement("link");kt(D),ln(D,"link",t),D._p=new Promise(function(B,$){D.onload=B,D.onerror=$}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,jc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:b},h.set(d,v)}}}function QS(t,i){Rr.X(t,i);var a=ao;if(a&&t){var l=Li(a).hoistableScripts,h=lo(t),d=l.get(h);d||(d=a.querySelector(Ol(h)),d||(t=T({src:t,async:!0},i),(i=pi.get(h))&&Zd(t,i),d=a.createElement("script"),kt(d),ln(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function KS(t,i){Rr.M(t,i);var a=ao;if(a&&t){var l=Li(a).hoistableScripts,h=lo(t),d=l.get(h);d||(d=a.querySelector(Ol(h)),d||(t=T({src:t,async:!0,type:"module"},i),(i=pi.get(h))&&Zd(t,i),d=a.createElement("script"),kt(d),ln(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function f_(t,i,a,l){var h=(h=ye.current)?Pc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=oo(a.href),a=Li(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=oo(a.href);var d=Li(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(Dl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),pi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},pi.set(t,a),d||YS(h,t,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=lo(a),a=Li(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function oo(t){return'href="'+Dn(t)+'"'}function Dl(t){return'link[rel="stylesheet"]['+t+"]"}function d_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function YS(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),ln(i,"link",a),kt(i),t.head.appendChild(i))}function lo(t){return'[src="'+Dn(t)+'"]'}function Ol(t){return"script[async]"+t}function m_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Dn(a.href)+'"]');if(l)return i.instance=l,kt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),kt(l),ln(l,"style",h),jc(l,a.precedence,t),i.instance=l;case"stylesheet":h=oo(a.href);var d=t.querySelector(Dl(h));if(d)return i.state.loading|=4,i.instance=d,kt(d),d;l=d_(a),(h=pi.get(h))&&Jd(l,h),d=(t.ownerDocument||t).createElement("link"),kt(d);var v=d;return v._p=new Promise(function(b,D){v.onload=b,v.onerror=D}),ln(d,"link",l),i.state.loading|=4,jc(d,a.precedence,t),i.instance=d;case"script":return d=lo(a.src),(h=t.querySelector(Ol(d)))?(i.instance=h,kt(h),h):(l=a,(h=pi.get(d))&&(l=T({},a),Zd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),kt(h),ln(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,jc(l,a.precedence,t));return i.instance}function jc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var b=l[v];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Jd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Zd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var zc=null;function g_(t,i,a){if(zc===null){var l=new Map,h=zc=new Map;h.set(a,l)}else h=zc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Vi]||d[Vt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var b=l.get(v);b?b.push(d):l.set(v,[d])}}return l}function p_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function XS(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function y_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function $S(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=oo(l.href),d=i.querySelector(Dl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Bc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,kt(d);return}d=i.ownerDocument||i,l=d_(l),(h=pi.get(h))&&Jd(l,h),d=d.createElement("link"),kt(d);var v=d;v._p=new Promise(function(b,D){v.onload=b,v.onerror=D}),ln(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Bc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Wd=0;function JS(t,i){return t.stylesheets&&t.count===0&&Hc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Hc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Wd===0&&(Wd=62500*DS());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Hc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Wd?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Bc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var qc=null;function Hc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,qc=new Map,i.forEach(ZS,t),qc=null,Bc.call(t))}function ZS(t,i){if(!(i.state.loading&4)){var a=qc.get(t);if(a)var l=a.get(null);else{a=new Map,qc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=Bc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Ml={$$typeof:te,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function WS(t,i,a,l,h,d,v,b,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rt(0),this.hiddenUpdates=Rt(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function v_(t,i,a,l,h,d,v,b,D,B,$,Z){return t=new WS(t,i,a,v,D,B,$,Z,b),i=1,d===!0&&(i|=24),d=$n(3,null,null,i),t.current=d,d.stateNode=t,i=Of(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Lf(d),t}function __(t){return t?(t=ja,t):ja}function E_(t,i,a,l,h,d){h=__(h),l.context===null?l.context=h:l.pendingContext=h,l=Zr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Wr(t,l,i),a!==null&&(Un(a,t,i),hl(a,t,i))}function b_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function em(t,i){b_(t,i),(t=t.alternate)&&b_(t,i)}function T_(t){if(t.tag===13||t.tag===31){var i=Ys(t,67108864);i!==null&&Un(i,t,67108864),em(t,67108864)}}function S_(t){if(t.tag===13||t.tag===31){var i=ti();i=Fn(i);var a=Ys(t,i);a!==null&&Un(a,t,i),em(t,i)}}var Gc=!0;function eA(t,i,a,l){var h=K.T;K.T=null;var d=ie.p;try{ie.p=2,tm(t,i,a,l)}finally{ie.p=d,K.T=h}}function tA(t,i,a,l){var h=K.T;K.T=null;var d=ie.p;try{ie.p=8,tm(t,i,a,l)}finally{ie.p=d,K.T=h}}function tm(t,i,a,l){if(Gc){var h=nm(l);if(h===null)Bd(t,i,l,Fc,a),w_(t,l);else if(iA(h,t,i,a,l))l.stopPropagation();else if(w_(t,l),i&4&&-1<nA.indexOf(t)){for(;h!==null;){var d=si(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=_t(d.pendingLanes);if(v!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;v;){var D=1<<31-vt(v);b.entanglements[1]|=D,v&=~D}Xi(d),(et&6)===0&&(Rc=Xt()+500,Rl(0))}}break;case 31:case 13:b=Ys(d,2),b!==null&&Un(b,d,2),Ic(),em(d,2)}if(d=nm(l),d===null&&Bd(t,i,l,Fc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Bd(t,i,l,null,a)}}function nm(t){return t=ai(t),im(t)}var Fc=null;function im(t){if(Fc=null,t=ki(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Fc=t,null}function A_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ar()){case Vs:return 2;case ii:return 8;case Sn:case or:return 32;case ks:return 268435456;default:return 32}default:return 32}}var rm=!1,cs=null,hs=null,fs=null,Vl=new Map,kl=new Map,ds=[],nA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function w_(t,i){switch(t){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":Vl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(i.pointerId)}}function Ll(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=si(i),i!==null&&T_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function iA(t,i,a,l,h){switch(i){case"focusin":return cs=Ll(cs,t,i,a,l,h),!0;case"dragenter":return hs=Ll(hs,t,i,a,l,h),!0;case"mouseover":return fs=Ll(fs,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Vl.set(d,Ll(Vl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,kl.set(d,Ll(kl.get(d)||null,t,i,a,l,h)),!0}return!1}function x_(t){var i=ki(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,nn(t.priority,function(){S_(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,nn(t.priority,function(){S_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=nm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Xo=l,a.target.dispatchEvent(l),Xo=null}else return i=si(a),i!==null&&T_(i),t.blockedOn=a,!1;i.shift()}return!0}function R_(t,i,a){Qc(t)&&a.delete(i)}function rA(){rm=!1,cs!==null&&Qc(cs)&&(cs=null),hs!==null&&Qc(hs)&&(hs=null),fs!==null&&Qc(fs)&&(fs=null),Vl.forEach(R_),kl.forEach(R_)}function Kc(t,i){t.blockedOn===i&&(t.blockedOn=null,rm||(rm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,rA)))}var Yc=null;function C_(t){Yc!==t&&(Yc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Yc===t&&(Yc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(im(l||a)===null)continue;break}var d=si(a);d!==null&&(t.splice(i,3),i-=3,nd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function uo(t){function i(D){return Kc(D,t)}cs!==null&&Kc(cs,t),hs!==null&&Kc(hs,t),fs!==null&&Kc(fs,t),Vl.forEach(i),kl.forEach(i);for(var a=0;a<ds.length;a++){var l=ds[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ds.length&&(a=ds[0],a.blockedOn===null);)x_(a),a.blockedOn===null&&ds.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Jt]||null;if(typeof d=="function")v||C_(a);else if(v){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Jt]||null)b=v.formAction;else if(im(h)!==null)continue}else b=v.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),C_(a)}}}function I_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function sm(t){this._internalRoot=t}Xc.prototype.render=sm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=ti();E_(a,l,t,i,null,null)},Xc.prototype.unmount=sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;E_(t.current,2,null,t,null,null),Ic(),i[Mi]=null}};function Xc(t){this._internalRoot=t}Xc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Qn();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ds.length&&i!==0&&i<ds[a].priority;a++);ds.splice(a,0,t),a===0&&x_(t)}};var N_=e.version;if(N_!=="19.2.0")throw Error(s(527,N_,"19.2.0"));ie.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=y(i),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var sA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{Gn=$c.inject(sA),Ht=$c}catch{}}return Pl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Uy,d=Py,v=jy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=v_(t,1,!1,null,null,a,l,null,h,d,v,I_),t[Mi]=i.current,zd(t),new sm(i)},Pl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Uy,v=Py,b=jy,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),i=v_(t,1,!0,i,a??null,l,h,D,d,v,b,I_),i.context=__(null),a=i.current,l=ti(),l=Fn(l),h=Zr(l),h.callback=null,Wr(a,h,l),a=l,i.current.lanes=a,Nn(i,a),Xi(i),t[Mi]=i.current,zd(t),new Xc(i)},Pl.version="19.2.0",Pl}var z_;function gA(){if(z_)return lm.exports;z_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),lm.exports=mA(),lm.exports}var pA=gA();const yA=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vA=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),B_=r=>{const e=vA(r);return e.charAt(0).toUpperCase()+e.slice(1)},P1=(...r)=>r.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),_A=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var EA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const bA=j.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:f,...m},p)=>j.createElement("svg",{ref:p,...EA,width:e,height:e,stroke:r,strokeWidth:s?Number(n)*24/Number(e):n,className:P1("lucide",o),...!u&&!_A(m)&&{"aria-hidden":"true"},...m},[...f.map(([y,E])=>j.createElement(y,E)),...Array.isArray(u)?u:[u]]));const ht=(r,e)=>{const n=j.forwardRef(({className:s,...o},u)=>j.createElement(bA,{ref:u,iconNode:e,className:P1(`lucide-${yA(B_(r))}`,`lucide-${r}`,s),...o}));return n.displayName=B_(r),n};const TA=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],SA=ht("book-open",TA);const AA=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],q_=ht("brain-circuit",AA);const wA=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xA=ht("calendar",wA);const RA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],H_=ht("chevron-down",RA);const CA=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],j1=ht("chevron-right",CA);const IA=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],G_=ht("chevron-up",IA);const NA=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],DA=ht("cpu",NA);const OA=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],F_=ht("database",OA);const MA=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],VA=ht("download",MA);const kA=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],LA=ht("eye-off",kA);const UA=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],PA=ht("eye",UA);const jA=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],zA=ht("grip-vertical",jA);const BA=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],qA=ht("heart",BA);const HA=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],z1=ht("key",HA);const GA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Gl=ht("loader-circle",GA);const FA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],QA=ht("log-out",FA);const KA=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],YA=ht("message-circle",KA);const XA=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Q_=ht("pen-line",XA);const $A=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],JA=ht("pen-tool",$A);const ZA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],B1=ht("plus",ZA);const WA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],q1=ht("settings",WA);const ew=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],tw=ht("sparkles",ew);const nw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jh=ht("trash-2",nw);const iw=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],rw=ht("triangle-alert",iw);const sw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],K_=ht("user-plus",sw);const aw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Y_=ht("user",aw);const ow=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],lw=ht("users",ow);const uw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],H1=ht("x",uw),eu=[{id:"teacher",name:"",role:"",icon:"",color:"bg-green-100 text-green-800",desc:"",isDefault:!0},{id:"friend",name:"",role:"",icon:"",color:"bg-yellow-100 text-yellow-800",desc:"",isDefault:!0},{id:"lover",name:"",role:"",icon:"",color:"bg-pink-100 text-pink-800",desc:"",isDefault:!0},{id:"aunt",name:"",role:"",icon:"",color:"bg-orange-100 text-orange-800",desc:"",isDefault:!0},{id:"celeb",name:"Ray",role:"",icon:"",color:"bg-purple-100 text-purple-800",desc:"",isDefault:!0},{id:"isekai",name:"",role:"",icon:"",color:"bg-gray-800 text-gray-100",desc:"",isDefault:!0}],cw=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],X_=[{id:"green",value:"bg-green-100 text-green-800",label:""},{id:"yellow",value:"bg-yellow-100 text-yellow-800",label:""},{id:"pink",value:"bg-pink-100 text-pink-800",label:""},{id:"orange",value:"bg-orange-100 text-orange-800",label:""},{id:"purple",value:"bg-purple-100 text-purple-800",label:""},{id:"blue",value:"bg-blue-100 text-blue-800",label:""},{id:"red",value:"bg-red-100 text-red-800",label:""},{id:"gray",value:"bg-gray-800 text-gray-100",label:""},{id:"indigo",value:"bg-indigo-100 text-indigo-800",label:""},{id:"teal",value:"bg-teal-100 text-teal-800",label:""}],tu={flash:{id:"gemini-2.5-flash-preview-05-20",name:"Gemini 2.5 Flash",description:"",endpoint:"gemini-2.5-flash-preview-05-20"},pro:{id:"gemini-2.5-pro-preview-06-05",name:"Gemini 2.5 Pro",description:"",endpoint:"gemini-2.5-pro-preview-06-05"}},hw="flash",fw=r=>{localStorage.setItem("gemini_model",r)},lg=()=>localStorage.getItem("gemini_model")||hw,dw=(r,e)=>{const n=r.toLowerCase(),s={negative:["","","","","","","","","",""],positive:["","","","","","","","",""],effort:["","","","","","",""],food:["","","","","","",""],love:["","","","","","",""]},o=Object.keys(s).find(f=>s[f].some(m=>n.includes(m)))||"neutral",u={teacher:{negative:"",positive:"",effort:"",neutral:""},friend:{negative:"",positive:"",effort:"",neutral:""},lover:{negative:"",positive:"",effort:"",neutral:""},aunt:{negative:"",positive:"",effort:"",neutral:""},celeb:{negative:"Rainy days make flowers grow.",positive:"Excellent!",effort:"Dream big.",neutral:"Keep it cool."},isekai:{negative:"...",positive:"",effort:"",neutral:""}};return u[e]?.[o]||u[e]?.neutral||"..."},mw=async(r,e,n,s,o=null)=>{const f=(s||eu).filter(E=>n.includes(E.id)),m=o||lg(),p=tu[m]?.endpoint||tu.flash.endpoint,y=`
    You are a roleplay AI.
    Analyze the user's diary entry and provide a response from EACH of the following characters.
    
    Characters:
    ${f.map(E=>`- ID: "${E.id}", Name: "${E.name}", Role: "${E.role}", Personality: "${E.desc}"`).join(`
`)}
    
    Instructions:
    - Respond in Japanese.
    - Keep each response short (max 2 sentences).
    - Stay strictly in character based on the Personality description.
    - Output MUST be valid JSON with this schema: { "responses": [ { "id": "persona_id", "comment": "comment text" } ] }
    `;try{const E=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${p}:generateContent?key=${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`Diary Entry: "${e}"`}]}],systemInstruction:{parts:[{text:y}]},generationConfig:{responseMimeType:"application/json"}})});if(!E.ok)throw new Error("API request failed");const C=(await E.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(!C)throw new Error("No text generated");const M=JSON.parse(C);if(!M.responses||!Array.isArray(M.responses))throw new Error("Invalid response format");return M.responses.filter(Q=>Q&&typeof Q.id=="string"&&typeof Q.comment=="string").map(Q=>({id:String(Q.id).slice(0,50),comment:String(Q.comment).slice(0,500)}))}catch(E){return console.error("Gemini API Error (Personas):",E),f.map(T=>({id:T.id,comment:dw(e,T.id)}))}},gw=async(r,e,n=null)=>{const s=n||lg(),o=tu[s]?.endpoint||tu.flash.endpoint,u=`
    You are a psychological counselor and fortune teller.
    Analyze the user's diary entry and provide an "Emotional Insight" report.
    
    Output JSON schema:
    {
      "mood_score": number (0-100),
      "emotional_weather": string (e.g., "", "", ""),
      "hidden_emotions": string (Briefly explain subconscious feelings),
      "lucky_action": string (A small, positive action suggested for tomorrow),
      "deep_advice": string (One sentence of profound advice)
    }
    Response in Japanese.
    `;try{const p=(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${o}:generateContent?key=${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`Diary Entry: "${e}"`}]}],systemInstruction:{parts:[{text:u}]},generationConfig:{responseMimeType:"application/json"}})})).json()).candidates?.[0]?.content?.parts?.[0]?.text,y=JSON.parse(p);return{mood_score:Math.min(100,Math.max(0,Number(y.mood_score)||50)),emotional_weather:String(y.emotional_weather||"").slice(0,50),hidden_emotions:String(y.hidden_emotions||"").slice(0,300),lucky_action:String(y.lucky_action||"").slice(0,200),deep_advice:String(y.deep_advice||"").slice(0,300)}}catch(f){return console.error("Gemini API Error (Analysis):",f),null}},pw=()=>{};var $_={};const G1=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},yw=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},F1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let C=(m&15)<<2|y>>6,M=y&63;p||(M=64,f||(C=64)),s.push(n[E],n[T],n[C],n[M])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(G1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):yw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const T=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||y==null||T==null)throw new vw;const C=u<<2|m>>4;if(s.push(C),y!==64){const M=m<<4&240|y>>2;if(s.push(M),T!==64){const Q=y<<6&192|T;s.push(Q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class vw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _w=function(r){const e=G1(r);return F1.encodeByteArray(e,!0)},ph=function(r){return _w(r).replace(/\./g,"")},Q1=function(r){try{return F1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ew(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const bw=()=>Ew().__FIREBASE_DEFAULTS__,Tw=()=>{if(typeof process>"u"||typeof $_>"u")return;const r=$_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Sw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Q1(r[1]);return e&&JSON.parse(e)},zh=()=>{try{return pw()||bw()||Tw()||Sw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},K1=r=>zh()?.emulatorHosts?.[r],Aw=r=>{const e=K1(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Y1=()=>zh()?.config,X1=r=>zh()?.[`_${r}`];class ww{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function No(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $1(r){return(await fetch(r,{credentials:"include"})).ok}function xw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[ph(JSON.stringify(n)),ph(JSON.stringify(f)),""].join(".")}const Fl={};function Rw(){const r={prod:[],emulator:[]};for(const e of Object.keys(Fl))Fl[e]?r.emulator.push(e):r.prod.push(e);return r}function Cw(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let J_=!1;function J1(r,e){if(typeof window>"u"||typeof document>"u"||!No(window.location.host)||Fl[r]===e||Fl[r]||J_)return;Fl[r]=e;function n(C){return`__firebase__banner__${C}`}const s="__firebase__banner",u=Rw().prod.length>0;function f(){const C=document.getElementById(s);C&&C.remove()}function m(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function p(C,M){C.setAttribute("width","24"),C.setAttribute("id",M),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function y(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{J_=!0,f()},C}function E(C,M){C.setAttribute("id",M),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function T(){const C=Cw(s),M=n("text"),Q=document.getElementById(M)||document.createElement("span"),Y=n("learnmore"),q=document.getElementById(Y)||document.createElement("a"),ne=n("preprendIcon"),se=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const te=C.element;m(te),E(q,Y);const ue=y();p(se,ne),te.append(se,Q,q,ue),document.body.appendChild(te)}u?(Q.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Iw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function Nw(){const r=zh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Dw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ow(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Mw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Vw(){const r=En();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function kw(){return!Nw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lw(){try{return typeof indexedDB=="object"}catch{return!1}}function Uw(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const Pw="FirebaseError";class Lr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Pw,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pu.prototype.create)}}class pu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?jw(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Lr(o,m,s)}}function jw(r,e){return r.replace(zw,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const zw=/\{\$([^}]+)}/g;function Bw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function da(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(Z_(u)&&Z_(f)){if(!da(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Z_(r){return r!==null&&typeof r=="object"}function yu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function qw(r,e){const n=new Hw(r,e);return n.subscribe.bind(n)}class Hw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Gw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=fm),o.error===void 0&&(o.error=fm),o.complete===void 0&&(o.complete=fm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gw(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function fm(){}function bn(r){return r&&r._delegate?r._delegate:r}class ma{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const oa="[DEFAULT]";class Fw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new ww;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kw(e))try{this.getOrInitializeService({instanceIdentifier:oa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oa){return this.instances.has(e)}getOptions(e=oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Qw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=oa){return this.component?this.component.multipleInstances?e:oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qw(r){return r===oa?void 0:r}function Kw(r){return r.instantiationMode==="EAGER"}class Yw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Fw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ge||(Ge={}));const Xw={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},$w=Ge.INFO,Jw={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},Zw=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=Jw[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ug{constructor(e){this.name=e,this._logLevel=$w,this._logHandler=Zw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const Ww=(r,e)=>e.some(n=>r instanceof n);let W_,e0;function e2(){return W_||(W_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t2(){return e0||(e0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Z1=new WeakMap,Dm=new WeakMap,W1=new WeakMap,dm=new WeakMap,cg=new WeakMap;function n2(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(bs(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Z1.set(n,r)}).catch(()=>{}),cg.set(e,r),e}function i2(r){if(Dm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Dm.set(r,e)}let Om={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Dm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||W1.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bs(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function r2(r){Om=r(Om)}function s2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(mm(this),e,...n);return W1.set(s,e.sort?e.sort():[e]),bs(s)}:t2().includes(r)?function(...e){return r.apply(mm(this),e),bs(Z1.get(this))}:function(...e){return bs(r.apply(mm(this),e))}}function a2(r){return typeof r=="function"?s2(r):(r instanceof IDBTransaction&&i2(r),Ww(r,e2())?new Proxy(r,Om):r)}function bs(r){if(r instanceof IDBRequest)return n2(r);if(dm.has(r))return dm.get(r);const e=a2(r);return e!==r&&(dm.set(r,e),cg.set(e,r)),e}const mm=r=>cg.get(r);function o2(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),m=bs(f);return s&&f.addEventListener("upgradeneeded",p=>{s(bs(f.result),p.oldVersion,p.newVersion,bs(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const l2=["get","getKey","getAll","getAllKeys","count"],u2=["put","add","delete","clear"],gm=new Map;function t0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(gm.get(e))return gm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=u2.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||l2.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return gm.set(e,u),u}r2(r=>({...r,get:(e,n,s)=>t0(e,n)||r.get(e,n,s),has:(e,n)=>!!t0(e,n)||r.has(e,n)}));class c2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(h2(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function h2(r){return r.getComponent()?.type==="VERSION"}const Mm="@firebase/app",n0="0.14.6";const Or=new ug("@firebase/app"),f2="@firebase/app-compat",d2="@firebase/analytics-compat",m2="@firebase/analytics",g2="@firebase/app-check-compat",p2="@firebase/app-check",y2="@firebase/auth",v2="@firebase/auth-compat",_2="@firebase/database",E2="@firebase/data-connect",b2="@firebase/database-compat",T2="@firebase/functions",S2="@firebase/functions-compat",A2="@firebase/installations",w2="@firebase/installations-compat",x2="@firebase/messaging",R2="@firebase/messaging-compat",C2="@firebase/performance",I2="@firebase/performance-compat",N2="@firebase/remote-config",D2="@firebase/remote-config-compat",O2="@firebase/storage",M2="@firebase/storage-compat",V2="@firebase/firestore",k2="@firebase/ai",L2="@firebase/firestore-compat",U2="firebase",P2="12.6.0";const Vm="[DEFAULT]",j2={[Mm]:"fire-core",[f2]:"fire-core-compat",[m2]:"fire-analytics",[d2]:"fire-analytics-compat",[p2]:"fire-app-check",[g2]:"fire-app-check-compat",[y2]:"fire-auth",[v2]:"fire-auth-compat",[_2]:"fire-rtdb",[E2]:"fire-data-connect",[b2]:"fire-rtdb-compat",[T2]:"fire-fn",[S2]:"fire-fn-compat",[A2]:"fire-iid",[w2]:"fire-iid-compat",[x2]:"fire-fcm",[R2]:"fire-fcm-compat",[C2]:"fire-perf",[I2]:"fire-perf-compat",[N2]:"fire-rc",[D2]:"fire-rc-compat",[O2]:"fire-gcs",[M2]:"fire-gcs-compat",[V2]:"fire-fst",[L2]:"fire-fst-compat",[k2]:"fire-vertex","fire-js":"fire-js",[U2]:"fire-js-all"};const yh=new Map,z2=new Map,km=new Map;function i0(r,e){try{r.container.addComponent(e)}catch(n){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function bo(r){const e=r.name;if(km.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;km.set(e,r);for(const n of yh.values())i0(n,r);for(const n of z2.values())i0(n,r);return!0}function hg(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Ri(r){return r==null?!1:r.settings!==void 0}const B2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new pu("app","Firebase",B2);class q2{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}const Do=P2;function eE(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Vm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ts.create("bad-app-name",{appName:String(o)});if(n||(n=Y1()),!n)throw Ts.create("no-options");const u=yh.get(o);if(u){if(da(n,u.options)&&da(s,u.config))return u;throw Ts.create("duplicate-app",{appName:o})}const f=new Yw(o);for(const p of km.values())f.addComponent(p);const m=new q2(n,s,f);return yh.set(o,m),m}function tE(r=Vm){const e=yh.get(r);if(!e&&r===Vm&&Y1())return eE();if(!e)throw Ts.create("no-app",{appName:r});return e}function Ss(r,e,n){let s=j2[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(f.join(" "));return}bo(new ma(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const H2="firebase-heartbeat-database",G2=1,nu="firebase-heartbeat-store";let pm=null;function nE(){return pm||(pm=o2(H2,G2,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(nu)}catch(n){console.warn(n)}}}}).catch(r=>{throw Ts.create("idb-open",{originalErrorMessage:r.message})})),pm}async function F2(r){try{const n=(await nE()).transaction(nu),s=await n.objectStore(nu).get(iE(r));return await n.done,s}catch(e){if(e instanceof Lr)Or.warn(e.message);else{const n=Ts.create("idb-get",{originalErrorMessage:e?.message});Or.warn(n.message)}}}async function r0(r,e){try{const s=(await nE()).transaction(nu,"readwrite");await s.objectStore(nu).put(e,iE(r)),await s.done}catch(n){if(n instanceof Lr)Or.warn(n.message);else{const s=Ts.create("idb-set",{originalErrorMessage:n?.message});Or.warn(s.message)}}}function iE(r){return`${r.name}!${r.options.appId}`}const Q2=1024,K2=30;class Y2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $2(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=s0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>K2){const o=J2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Or.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=s0(),{heartbeatsToSend:n,unsentEntries:s}=X2(this._heartbeatsCache.heartbeats),o=ph(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Or.warn(e),""}}}function s0(){return new Date().toISOString().substring(0,10)}function X2(r,e=Q2){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),a0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),a0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class $2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lw()?Uw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await F2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return r0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return r0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function a0(r){return ph(JSON.stringify({version:2,heartbeats:r})).length}function J2(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}function Z2(r){bo(new ma("platform-logger",e=>new c2(e),"PRIVATE")),bo(new ma("heartbeat",e=>new Y2(e),"PRIVATE")),Ss(Mm,n0,r),Ss(Mm,n0,"esm2020"),Ss("fire-js","")}Z2("");function rE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W2=rE,sE=new pu("auth","Firebase",rE());const vh=new ug("@firebase/auth");function ex(r,...e){vh.logLevel<=Ge.WARN&&vh.warn(`Auth (${Do}): ${r}`,...e)}function sh(r,...e){vh.logLevel<=Ge.ERROR&&vh.error(`Auth (${Do}): ${r}`,...e)}function nr(r,...e){throw dg(r,...e)}function Ii(r,...e){return dg(r,...e)}function fg(r,e,n){const s={...W2(),[e]:n};return new pu("auth","Firebase",s).create(e,{appName:r.name})}function ca(r){return fg(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tx(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&nr(r,"argument-error"),fg(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dg(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return sE.create(r,...e)}function we(r,e,...n){if(!r)throw dg(e,...n)}function Ir(r){const e="INTERNAL ASSERTION FAILED: "+r;throw sh(e),new Error(e)}function Mr(r,e){r||Ir(e)}function Lm(){return typeof self<"u"&&self.location?.href||""}function nx(){return o0()==="http:"||o0()==="https:"}function o0(){return typeof self<"u"&&self.location?.protocol||null}function ix(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nx()||Ow()||"connection"in navigator)?navigator.onLine:!0}function rx(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class vu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mr(n>e,"Short delay should be less than long delay!"),this.isMobile=Iw()||Mw()}get(){return ix()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mg(r,e){Mr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class aE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const ax=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ox=new vu(3e4,6e4);function gg(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Oo(r,e,n,s,o={}){return oE(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=yu({key:r.config.apiKey,...f}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:p,...u};return Dw()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&No(r.emulatorConfig.host)&&(y.credentials="include"),aE.fetch()(await lE(r,r.config.apiHost,n,m),y)})}async function oE(r,e,n){r._canInitEmulator=!1;const s={...sx,...e};try{const o=new ux(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Jc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jc(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Jc(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw Jc(r,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw fg(r,E,y);nr(r,E)}}catch(o){if(o instanceof Lr)throw o;nr(r,"network-request-failed",{message:String(o)})}}async function lx(r,e,n,s,o={}){const u=await Oo(r,e,n,s,o);return"mfaPendingCredential"in u&&nr(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function lE(r,e,n,s){const o=`${e}${n}?${s}`,u=r,f=u.config.emulator?mg(r.config,o):`${r.config.apiScheme}://${o}`;return ax.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class ux{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ii(this.auth,"network-request-failed")),ox.get())})}}function Jc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Ii(r,e,s);return o.customData._tokenResponse=n,o}async function cx(r,e){return Oo(r,"POST","/v1/accounts:delete",e)}async function _h(r,e){return Oo(r,"POST","/v1/accounts:lookup",e)}function Ql(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hx(r,e=!1){const n=bn(r),s=await n.getIdToken(e),o=pg(s);we(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:Ql(ym(o.auth_time)),issuedAtTime:Ql(ym(o.iat)),expirationTime:Ql(ym(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function ym(r){return Number(r)*1e3}function pg(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return sh("JWT malformed, contained fewer than 3 sections"),null;try{const o=Q1(n);return o?JSON.parse(o):(sh("Failed to decode base64 JWT payload"),null)}catch(o){return sh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function l0(r){const e=pg(r);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function iu(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Lr&&fx(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function fx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class dx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Um{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ql(this.lastLoginAt),this.creationTime=Ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Eh(r){const e=r.auth,n=await r.getIdToken(),s=await iu(r,_h(e,{idToken:n}));we(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?uE(o.providerUserInfo):[],f=gx(r.providerData,u),m=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!f?.length,y=m?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Um(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,E)}async function mx(r){const e=bn(r);await Eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gx(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function uE(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function px(r,e){const n=await oE(r,{},async()=>{const s=yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await lE(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&No(r.emulatorConfig.host)&&(p.credentials="include"),aE.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yx(r,e){return Oo(r,"POST","/v2/accounts:revokeToken",gg(r,e))}class go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):l0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=l0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await px(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new go;return s&&(we(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(we(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(we(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new go,this.toJSON())}_performRefresh(){return Ir("not implemented")}}function gs(r,e){we(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ci{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new dx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Um(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await iu(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hx(this,e)}reload(){return mx(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ci({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Eh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ri(this.auth.app))return Promise.reject(ca(this.auth));const e=await this.getIdToken();return await iu(this,cx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:T,emailVerified:C,isAnonymous:M,providerData:Q,stsTokenManager:Y}=n;we(T&&Y,e,"internal-error");const q=go.fromJSON(this.name,Y);we(typeof T=="string",e,"internal-error"),gs(s,e.name),gs(o,e.name),we(typeof C=="boolean",e,"internal-error"),we(typeof M=="boolean",e,"internal-error"),gs(u,e.name),gs(f,e.name),gs(m,e.name),gs(p,e.name),gs(y,e.name),gs(E,e.name);const ne=new Ci({uid:T,auth:e,email:o,emailVerified:C,displayName:s,isAnonymous:M,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:q,createdAt:y,lastLoginAt:E});return Q&&Array.isArray(Q)&&(ne.providerData=Q.map(se=>({...se}))),p&&(ne._redirectEventId=p),ne}static async _fromIdTokenResponse(e,n,s=!1){const o=new go;o.updateFromServerResponse(n);const u=new Ci({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Eh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];we(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?uE(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new go;m.updateFromIdToken(s);const p=new Ci({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Um(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,y),p}}const u0=new Map;function Nr(r){Mr(r instanceof Function,"Expected a class definition");let e=u0.get(r);return e?(Mr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,u0.set(r,e),e)}class cE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cE.type="NONE";const c0=cE;function ah(r,e,n){return`firebase:${r}:${e}:${n}`}class po{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=ah(this.userKey,o.apiKey,u),this.fullPersistenceKey=ah("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _h(this.auth,{idToken:e}).catch(()=>{});return n?Ci._fromGetAccountInfoResponse(this.auth,n,e):null}return Ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new po(Nr(c0),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Nr(c0);const f=ah(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const E=await y._get(f);if(E){let T;if(typeof E=="string"){const C=await _h(e,{idToken:E}).catch(()=>{});if(!C)break;T=await Ci._fromGetAccountInfoResponse(e,C,E)}else T=Ci._fromJSON(e,E);y!==u&&(m=T),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new po(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new po(u,e,s))}}function h0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pE(e))return"Blackberry";if(yE(e))return"Webos";if(fE(e))return"Safari";if((e.includes("chrome/")||dE(e))&&!e.includes("edge/"))return"Chrome";if(gE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function hE(r=En()){return/firefox\//i.test(r)}function fE(r=En()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dE(r=En()){return/crios\//i.test(r)}function mE(r=En()){return/iemobile/i.test(r)}function gE(r=En()){return/android/i.test(r)}function pE(r=En()){return/blackberry/i.test(r)}function yE(r=En()){return/webos/i.test(r)}function yg(r=En()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function vx(r=En()){return yg(r)&&!!window.navigator?.standalone}function _x(){return Vw()&&document.documentMode===10}function vE(r=En()){return yg(r)||gE(r)||yE(r)||pE(r)||/windows phone/i.test(r)||mE(r)}function _E(r,e=[]){let n;switch(r){case"Browser":n=h0(En());break;case"Worker":n=`${h0(En())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Do}/${s}`}class Ex{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function bx(r,e={}){return Oo(r,"GET","/v2/passwordPolicy",gg(r,e))}const Tx=6;class Sx{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Tx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class Ax{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f0(this),this.idTokenSubscription=new f0(this),this.beforeStateQueue=new Ex(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await po.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _h(this,{idToken:e}),s=await Ci._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ri(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Eh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ri(this.app))return Promise.reject(ca(this));const n=e?bn(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ri(this.app)?Promise.reject(ca(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ri(this.app)?Promise.reject(ca(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bx(this),n=new Sx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await yx(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Nr(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await po.create(this,[Nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_E(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ex(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Bh(r){return bn(r)}class f0{constructor(e){this.auth=e,this.observer=null,this.addObserver=qw(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wx(r){vg=r}function xx(r){return vg.loadJS(r)}function Rx(){return vg.gapiScript}function Cx(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function Ix(r,e){const n=hg(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(da(u,e??{}))return o;nr(o,"already-initialized")}return n.initialize({options:e})}function Nx(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Nr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function Dx(r,e,n){const s=Bh(r);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=EE(e),{host:f,port:m}=Ox(e),p=m===null?"":`:${m}`,y={url:`${u}//${f}${p}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(da(y,s.config.emulator)&&da(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,No(f)?($1(`${u}//${f}${p}`),J1("Auth",!0)):Mx()}function EE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Ox(r){const e=EE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:d0(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:d0(f)}}}function d0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Mx(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class bE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,n){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}}async function yo(r,e){return lx(r,"POST","/v1/accounts:signInWithIdp",gg(r,e))}const Vx="http://localhost";class ga extends bE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new ga(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return yo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,yo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yo(e,n)}buildRequest(){const e={requestUri:Vx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yu(n)}return e}}class _g{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _u extends _g{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ys extends _u{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";ys.PROVIDER_ID="facebook.com";class Cr extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ga._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Cr.credential(n,s)}catch{return null}}}Cr.GOOGLE_SIGN_IN_METHOD="google.com";Cr.PROVIDER_ID="google.com";class vs extends _u{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.GITHUB_SIGN_IN_METHOD="github.com";vs.PROVIDER_ID="github.com";class _s extends _u{constructor(){super("twitter.com")}static credential(e,n){return ga._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return _s.credential(n,s)}catch{return null}}}_s.TWITTER_SIGN_IN_METHOD="twitter.com";_s.PROVIDER_ID="twitter.com";class To{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Ci._fromIdTokenResponse(e,s,o),f=m0(s);return new To({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=m0(s);return new To({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function m0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class bh extends Lr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,bh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new bh(e,n,s,o)}}function TE(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?bh._fromErrorAndOperation(r,u,e,s):u})}async function kx(r,e,n=!1){const s=await iu(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return To._forOperation(r,"link",s)}async function Lx(r,e,n=!1){const{auth:s}=r;if(Ri(s.app))return Promise.reject(ca(s));const o="reauthenticate";try{const u=await iu(r,TE(s,o,e,r),n);we(u.idToken,s,"internal-error");const f=pg(u.idToken);we(f,s,"internal-error");const{sub:m}=f;return we(r.uid===m,s,"user-mismatch"),To._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&nr(s,"user-mismatch"),u}}async function Ux(r,e,n=!1){if(Ri(r.app))return Promise.reject(ca(r));const s="signIn",o=await TE(r,s,e),u=await To._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}function Px(r,e,n,s){return bn(r).onIdTokenChanged(e,n,s)}function jx(r,e,n){return bn(r).beforeAuthStateChanged(e,n)}function zx(r,e,n,s){return bn(r).onAuthStateChanged(e,n,s)}function Bx(r){return bn(r).signOut()}const Th="__sak";class SE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Th,"1"),this.storage.removeItem(Th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const qx=1e3,Hx=10;class AE extends SE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);_x()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Hx):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},qx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AE.type="LOCAL";const Gx=AE;class wE extends SE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}wE.type="SESSION";const xE=wE;function Fx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new qh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async y=>y(n.origin,u)),p=await Fx(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qh.receivers=[];function Eg(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}class Qx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const y=Eg("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(T){const C=T;if(C.data.eventId===y)switch(C.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(C.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Ji(){return window}function Kx(r){Ji().location.href=r}function RE(){return typeof Ji().WorkerGlobalScope<"u"&&typeof Ji().importScripts=="function"}async function Yx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xx(){return navigator?.serviceWorker?.controller||null}function $x(){return RE()?self:null}const CE="firebaseLocalStorageDb",Jx=1,Sh="firebaseLocalStorage",IE="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hh(r,e){return r.transaction([Sh],e?"readwrite":"readonly").objectStore(Sh)}function Zx(){const r=indexedDB.deleteDatabase(CE);return new Eu(r).toPromise()}function Pm(){const r=indexedDB.open(CE,Jx);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Sh,{keyPath:IE})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Sh)?e(s):(s.close(),await Zx(),e(await Pm()))})})}async function g0(r,e,n){const s=Hh(r,!0).put({[IE]:e,value:n});return new Eu(s).toPromise()}async function Wx(r,e){const n=Hh(r,!1).get(e),s=await new Eu(n).toPromise();return s===void 0?null:s.value}function p0(r,e){const n=Hh(r,!0).delete(e);return new Eu(n).toPromise()}const eR=800,tR=3;class NE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>tR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qh._getInstance($x()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Yx(),!this.activeServiceWorker)return;this.sender=new Qx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pm();return await g0(e,Th,"1"),await p0(e,Th),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>g0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Wx(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Hh(o,!1).getAll();return new Eu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NE.type="LOCAL";const nR=NE;new vu(3e4,6e4);function DE(r,e){return e?Nr(e):(we(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class bg extends bE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function iR(r){return Ux(r.auth,new bg(r),r.bypassAuthState)}function rR(r){const{auth:e,user:n}=r;return we(n,e,"internal-error"),Lx(n,new bg(r),r.bypassAuthState)}async function sR(r){const{auth:e,user:n}=r;return we(n,e,"internal-error"),kx(n,new bg(r),r.bypassAuthState)}class OE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iR;case"linkViaPopup":case"linkViaRedirect":return sR;case"reauthViaPopup":case"reauthViaRedirect":return rR;default:nr(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const aR=new vu(2e3,1e4);async function oR(r,e,n){if(Ri(r.app))return Promise.reject(Ii(r,"operation-not-supported-in-this-environment"));const s=Bh(r);tx(r,e,_g);const o=DE(s,n);return new la(s,"signInViaPopup",e,o).executeNotNull()}class la extends OE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,la.currentPopupAction&&la.currentPopupAction.cancel(),la.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=Eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,la.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aR.get())};e()}}la.currentPopupAction=null;const lR="pendingRedirect",oh=new Map;class uR extends OE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=oh.get(this.auth._key());if(!e){try{const s=await cR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}oh.set(this.auth._key(),e)}return this.bypassAuthState||oh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cR(r,e){const n=dR(e),s=fR(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function hR(r,e){oh.set(r._key(),e)}function fR(r){return Nr(r._redirectPersistence)}function dR(r){return ah(lR,r.config.apiKey,r.name)}async function mR(r,e,n=!1){if(Ri(r.app))return Promise.reject(ca(r));const s=Bh(r),o=DE(s,e),f=await new uR(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const gR=600*1e3;class pR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!ME(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ii(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gR&&this.cachedEventUids.clear(),this.cachedEventUids.has(y0(e))}saveEventToCache(e){this.cachedEventUids.add(y0(e)),this.lastProcessedEventTime=Date.now()}}function y0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function ME({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function yR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ME(r);default:return!1}}async function vR(r,e={}){return Oo(r,"GET","/v1/projects",e)}const _R=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ER=/^https?/;async function bR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await vR(r);for(const n of e)try{if(TR(n))return}catch{}nr(r,"unauthorized-domain")}function TR(r){const e=Lm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!ER.test(n))return!1;if(_R.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const SR=new vu(3e4,6e4);function v0(){const r=Ji().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function AR(r){return new Promise((e,n)=>{function s(){v0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v0(),n(Ii(r,"network-request-failed"))},timeout:SR.get()})}if(Ji().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ji().gapi?.load)s();else{const o=Cx("iframefcb");return Ji()[o]=()=>{gapi.load?s():n(Ii(r,"network-request-failed"))},xx(`${Rx()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw lh=null,e})}let lh=null;function wR(r){return lh=lh||AR(r),lh}const xR=new vu(5e3,15e3),RR="__/auth/iframe",CR="emulator/auth/iframe",IR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DR(r){const e=r.config;we(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?mg(e,CR):`https://${r.config.authDomain}/${RR}`,s={apiKey:e.apiKey,appName:r.name,v:Do},o=NR.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${yu(s).slice(1)}`}async function OR(r){const e=await wR(r),n=Ji().gapi;return we(n,r,"internal-error"),e.open({where:document.body,url:DR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IR,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Ii(r,"network-request-failed"),m=Ji().setTimeout(()=>{u(f)},xR.get());function p(){Ji().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}const MR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VR=500,kR=600,LR="_blank",UR="http://localhost";class _0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PR(r,e,n,s=VR,o=kR){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...MR,width:s.toString(),height:o.toString(),top:u,left:f},y=En().toLowerCase();n&&(m=dE(y)?LR:n),hE(y)&&(e=e||UR,p.scrollbars="yes");const E=Object.entries(p).reduce((C,[M,Q])=>`${C}${M}=${Q},`,"");if(vx(y)&&m!=="_self")return jR(e||"",m),new _0(null);const T=window.open(e||"",m,E);we(T,r,"popup-blocked");try{T.focus()}catch{}return new _0(T)}function jR(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const zR="__/auth/handler",BR="emulator/auth/handler",qR=encodeURIComponent("fac");async function E0(r,e,n,s,o,u){we(r.config.authDomain,r,"auth-domain-config-required"),we(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Do,eventId:o};if(e instanceof _g){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",Bw(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))f[E]=T}if(e instanceof _u){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await r._getAppCheckToken(),y=p?`#${qR}=${encodeURIComponent(p)}`:"";return`${HR(r)}?${yu(m).slice(1)}${y}`}function HR({config:r}){return r.emulator?mg(r,BR):`https://${r.authDomain}/${zR}`}const vm="webStorageSupport";class GR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xE,this._completeRedirectFn=mR,this._overrideRedirectResult=hR}async _openPopup(e,n,s,o){Mr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await E0(e,n,s,Lm(),o);return PR(e,u,Eg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await E0(e,n,s,Lm(),o);return Kx(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Mr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await OR(e),s=new pR(e);return n.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vm,{type:vm},o=>{const u=o?.[0]?.[vm];u!==void 0&&n(!!u),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vE()||fE()||yg()}}const FR=GR;var b0="@firebase/auth",T0="1.11.1";class QR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function KR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YR(r){bo(new ma("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;we(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_E(r)},y=new Ax(s,o,u,p);return Nx(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),bo(new ma("auth-internal",e=>{const n=Bh(e.getProvider("auth").getImmediate());return(s=>new QR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss(b0,T0,KR(r)),Ss(b0,T0,"esm2020")}const XR=300,$R=X1("authIdTokenMaxAge")||XR;let S0=null;const JR=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>$R)return;const o=n?.token;S0!==o&&(S0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ZR(r=tE()){const e=hg(r,"auth");if(e.isInitialized())return e.getImmediate();const n=Ix(r,{popupRedirectResolver:FR,persistence:[nR,Gx,xE]}),s=X1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=JR(u.toString());jx(n,f,()=>f(n.currentUser)),Px(n,m=>f(m))}}const o=K1("auth");return o&&Dx(n,`http://${o}`),n}function WR(){return document.getElementsByTagName("head")?.[0]??document}wx({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Ii("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",WR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YR("Browser");var eC="firebase",tC="12.6.0";Ss(eC,tC,"app");var A0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var As,VE;(function(){var r;function e(R,w){function I(){}I.prototype=w.prototype,R.F=w.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(O,N,L){for(var x=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)x[Ae-2]=arguments[Ae];return w.prototype[N].apply(O,x)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,w,I){I||(I=0);const O=Array(16);if(typeof w=="string")for(var N=0;N<16;++N)O[N]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(N=0;N<16;++N)O[N]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=R.g[0],I=R.g[1],N=R.g[2];let L=R.g[3],x;x=w+(L^I&(N^L))+O[0]+3614090360&4294967295,w=I+(x<<7&4294967295|x>>>25),x=L+(N^w&(I^N))+O[1]+3905402710&4294967295,L=w+(x<<12&4294967295|x>>>20),x=N+(I^L&(w^I))+O[2]+606105819&4294967295,N=L+(x<<17&4294967295|x>>>15),x=I+(w^N&(L^w))+O[3]+3250441966&4294967295,I=N+(x<<22&4294967295|x>>>10),x=w+(L^I&(N^L))+O[4]+4118548399&4294967295,w=I+(x<<7&4294967295|x>>>25),x=L+(N^w&(I^N))+O[5]+1200080426&4294967295,L=w+(x<<12&4294967295|x>>>20),x=N+(I^L&(w^I))+O[6]+2821735955&4294967295,N=L+(x<<17&4294967295|x>>>15),x=I+(w^N&(L^w))+O[7]+4249261313&4294967295,I=N+(x<<22&4294967295|x>>>10),x=w+(L^I&(N^L))+O[8]+1770035416&4294967295,w=I+(x<<7&4294967295|x>>>25),x=L+(N^w&(I^N))+O[9]+2336552879&4294967295,L=w+(x<<12&4294967295|x>>>20),x=N+(I^L&(w^I))+O[10]+4294925233&4294967295,N=L+(x<<17&4294967295|x>>>15),x=I+(w^N&(L^w))+O[11]+2304563134&4294967295,I=N+(x<<22&4294967295|x>>>10),x=w+(L^I&(N^L))+O[12]+1804603682&4294967295,w=I+(x<<7&4294967295|x>>>25),x=L+(N^w&(I^N))+O[13]+4254626195&4294967295,L=w+(x<<12&4294967295|x>>>20),x=N+(I^L&(w^I))+O[14]+2792965006&4294967295,N=L+(x<<17&4294967295|x>>>15),x=I+(w^N&(L^w))+O[15]+1236535329&4294967295,I=N+(x<<22&4294967295|x>>>10),x=w+(N^L&(I^N))+O[1]+4129170786&4294967295,w=I+(x<<5&4294967295|x>>>27),x=L+(I^N&(w^I))+O[6]+3225465664&4294967295,L=w+(x<<9&4294967295|x>>>23),x=N+(w^I&(L^w))+O[11]+643717713&4294967295,N=L+(x<<14&4294967295|x>>>18),x=I+(L^w&(N^L))+O[0]+3921069994&4294967295,I=N+(x<<20&4294967295|x>>>12),x=w+(N^L&(I^N))+O[5]+3593408605&4294967295,w=I+(x<<5&4294967295|x>>>27),x=L+(I^N&(w^I))+O[10]+38016083&4294967295,L=w+(x<<9&4294967295|x>>>23),x=N+(w^I&(L^w))+O[15]+3634488961&4294967295,N=L+(x<<14&4294967295|x>>>18),x=I+(L^w&(N^L))+O[4]+3889429448&4294967295,I=N+(x<<20&4294967295|x>>>12),x=w+(N^L&(I^N))+O[9]+568446438&4294967295,w=I+(x<<5&4294967295|x>>>27),x=L+(I^N&(w^I))+O[14]+3275163606&4294967295,L=w+(x<<9&4294967295|x>>>23),x=N+(w^I&(L^w))+O[3]+4107603335&4294967295,N=L+(x<<14&4294967295|x>>>18),x=I+(L^w&(N^L))+O[8]+1163531501&4294967295,I=N+(x<<20&4294967295|x>>>12),x=w+(N^L&(I^N))+O[13]+2850285829&4294967295,w=I+(x<<5&4294967295|x>>>27),x=L+(I^N&(w^I))+O[2]+4243563512&4294967295,L=w+(x<<9&4294967295|x>>>23),x=N+(w^I&(L^w))+O[7]+1735328473&4294967295,N=L+(x<<14&4294967295|x>>>18),x=I+(L^w&(N^L))+O[12]+2368359562&4294967295,I=N+(x<<20&4294967295|x>>>12),x=w+(I^N^L)+O[5]+4294588738&4294967295,w=I+(x<<4&4294967295|x>>>28),x=L+(w^I^N)+O[8]+2272392833&4294967295,L=w+(x<<11&4294967295|x>>>21),x=N+(L^w^I)+O[11]+1839030562&4294967295,N=L+(x<<16&4294967295|x>>>16),x=I+(N^L^w)+O[14]+4259657740&4294967295,I=N+(x<<23&4294967295|x>>>9),x=w+(I^N^L)+O[1]+2763975236&4294967295,w=I+(x<<4&4294967295|x>>>28),x=L+(w^I^N)+O[4]+1272893353&4294967295,L=w+(x<<11&4294967295|x>>>21),x=N+(L^w^I)+O[7]+4139469664&4294967295,N=L+(x<<16&4294967295|x>>>16),x=I+(N^L^w)+O[10]+3200236656&4294967295,I=N+(x<<23&4294967295|x>>>9),x=w+(I^N^L)+O[13]+681279174&4294967295,w=I+(x<<4&4294967295|x>>>28),x=L+(w^I^N)+O[0]+3936430074&4294967295,L=w+(x<<11&4294967295|x>>>21),x=N+(L^w^I)+O[3]+3572445317&4294967295,N=L+(x<<16&4294967295|x>>>16),x=I+(N^L^w)+O[6]+76029189&4294967295,I=N+(x<<23&4294967295|x>>>9),x=w+(I^N^L)+O[9]+3654602809&4294967295,w=I+(x<<4&4294967295|x>>>28),x=L+(w^I^N)+O[12]+3873151461&4294967295,L=w+(x<<11&4294967295|x>>>21),x=N+(L^w^I)+O[15]+530742520&4294967295,N=L+(x<<16&4294967295|x>>>16),x=I+(N^L^w)+O[2]+3299628645&4294967295,I=N+(x<<23&4294967295|x>>>9),x=w+(N^(I|~L))+O[0]+4096336452&4294967295,w=I+(x<<6&4294967295|x>>>26),x=L+(I^(w|~N))+O[7]+1126891415&4294967295,L=w+(x<<10&4294967295|x>>>22),x=N+(w^(L|~I))+O[14]+2878612391&4294967295,N=L+(x<<15&4294967295|x>>>17),x=I+(L^(N|~w))+O[5]+4237533241&4294967295,I=N+(x<<21&4294967295|x>>>11),x=w+(N^(I|~L))+O[12]+1700485571&4294967295,w=I+(x<<6&4294967295|x>>>26),x=L+(I^(w|~N))+O[3]+2399980690&4294967295,L=w+(x<<10&4294967295|x>>>22),x=N+(w^(L|~I))+O[10]+4293915773&4294967295,N=L+(x<<15&4294967295|x>>>17),x=I+(L^(N|~w))+O[1]+2240044497&4294967295,I=N+(x<<21&4294967295|x>>>11),x=w+(N^(I|~L))+O[8]+1873313359&4294967295,w=I+(x<<6&4294967295|x>>>26),x=L+(I^(w|~N))+O[15]+4264355552&4294967295,L=w+(x<<10&4294967295|x>>>22),x=N+(w^(L|~I))+O[6]+2734768916&4294967295,N=L+(x<<15&4294967295|x>>>17),x=I+(L^(N|~w))+O[13]+1309151649&4294967295,I=N+(x<<21&4294967295|x>>>11),x=w+(N^(I|~L))+O[4]+4149444226&4294967295,w=I+(x<<6&4294967295|x>>>26),x=L+(I^(w|~N))+O[11]+3174756917&4294967295,L=w+(x<<10&4294967295|x>>>22),x=N+(w^(L|~I))+O[2]+718787259&4294967295,N=L+(x<<15&4294967295|x>>>17),x=I+(L^(N|~w))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(N+(x<<21&4294967295|x>>>11))&4294967295,R.g[2]=R.g[2]+N&4294967295,R.g[3]=R.g[3]+L&4294967295}s.prototype.v=function(R,w){w===void 0&&(w=R.length);const I=w-this.blockSize,O=this.C;let N=this.h,L=0;for(;L<w;){if(N==0)for(;L<=I;)o(this,R,L),L+=this.blockSize;if(typeof R=="string"){for(;L<w;)if(O[N++]=R.charCodeAt(L++),N==this.blockSize){o(this,O),N=0;break}}else for(;L<w;)if(O[N++]=R[L++],N==this.blockSize){o(this,O),N=0;break}}this.h=N,this.o+=w},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,I=0;I<4;++I)for(let O=0;O<32;O+=8)R[w++]=this.g[I]>>>O&255;return R};function u(R,w){var I=m;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=w(R)}function f(R,w){this.h=w;const I=[];let O=!0;for(let N=R.length-1;N>=0;N--){const L=R[N]|0;O&&L==w||(I[N]=L,O=!1)}this.g=I}var m={};function p(R){return-128<=R&&R<128?u(R,function(w){return new f([w|0],w<0?-1:0)}):new f([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return q(y(-R));const w=[];let I=1;for(let O=0;R>=I;O++)w[O]=R/I|0,I*=4294967296;return new f(w,0)}function E(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return q(E(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=y(Math.pow(w,8));let O=T;for(let L=0;L<R.length;L+=8){var N=Math.min(8,R.length-L);const x=parseInt(R.substring(L,L+N),w);N<8?(N=y(Math.pow(w,N)),O=O.j(N).add(y(x))):(O=O.j(I),O=O.add(y(x)))}return O}var T=p(0),C=p(1),M=p(16777216);r=f.prototype,r.m=function(){if(Y(this))return-q(this).m();let R=0,w=1;for(let I=0;I<this.g.length;I++){const O=this.i(I);R+=(O>=0?O:4294967296+O)*w,w*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(Q(this))return"0";if(Y(this))return"-"+q(this).toString(R);const w=y(Math.pow(R,6));var I=this;let O="";for(;;){const N=ue(I,w).g;I=ne(I,N.j(w));let L=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=N,Q(I))return L+O;for(;L.length<6;)L="0"+L;O=L+O}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function Q(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function Y(R){return R.h==-1}r.l=function(R){return R=ne(this,R),Y(R)?-1:Q(R)?0:1};function q(R){const w=R.g.length,I=[];for(let O=0;O<w;O++)I[O]=~R.g[O];return new f(I,~R.h).add(C)}r.abs=function(){return Y(this)?q(this):this},r.add=function(R){const w=Math.max(this.g.length,R.g.length),I=[];let O=0;for(let N=0;N<=w;N++){let L=O+(this.i(N)&65535)+(R.i(N)&65535),x=(L>>>16)+(this.i(N)>>>16)+(R.i(N)>>>16);O=x>>>16,L&=65535,x&=65535,I[N]=x<<16|L}return new f(I,I[I.length-1]&-2147483648?-1:0)};function ne(R,w){return R.add(q(w))}r.j=function(R){if(Q(this)||Q(R))return T;if(Y(this))return Y(R)?q(this).j(q(R)):q(q(this).j(R));if(Y(R))return q(this.j(q(R)));if(this.l(M)<0&&R.l(M)<0)return y(this.m()*R.m());const w=this.g.length+R.g.length,I=[];for(var O=0;O<2*w;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(let N=0;N<R.g.length;N++){const L=this.i(O)>>>16,x=this.i(O)&65535,Ae=R.i(N)>>>16,ze=R.i(N)&65535;I[2*O+2*N]+=x*ze,se(I,2*O+2*N),I[2*O+2*N+1]+=L*ze,se(I,2*O+2*N+1),I[2*O+2*N+1]+=x*Ae,se(I,2*O+2*N+1),I[2*O+2*N+2]+=L*Ae,se(I,2*O+2*N+2)}for(R=0;R<w;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=w;R<2*w;R++)I[R]=0;return new f(I,0)};function se(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function te(R,w){this.g=R,this.h=w}function ue(R,w){if(Q(w))throw Error("division by zero");if(Q(R))return new te(T,T);if(Y(R))return w=ue(q(R),w),new te(q(w.g),q(w.h));if(Y(w))return w=ue(R,q(w)),new te(q(w.g),w.h);if(R.g.length>30){if(Y(R)||Y(w))throw Error("slowDivide_ only works with positive integers.");for(var I=C,O=w;O.l(R)<=0;)I=fe(I),O=fe(O);var N=le(I,1),L=le(O,1);for(O=le(O,2),I=le(I,2);!Q(O);){var x=L.add(O);x.l(R)<=0&&(N=N.add(I),L=x),O=le(O,1),I=le(I,1)}return w=ne(R,N.j(w)),new te(N,w)}for(N=T;R.l(w)>=0;){for(I=Math.max(1,Math.floor(R.m()/w.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),L=y(I),x=L.j(w);Y(x)||x.l(R)>0;)I-=O,L=y(I),x=L.j(w);Q(L)&&(L=C),N=N.add(L),R=ne(R,x)}return new te(N,R)}r.B=function(R){return ue(this,R).h},r.and=function(R){const w=Math.max(this.g.length,R.g.length),I=[];for(let O=0;O<w;O++)I[O]=this.i(O)&R.i(O);return new f(I,this.h&R.h)},r.or=function(R){const w=Math.max(this.g.length,R.g.length),I=[];for(let O=0;O<w;O++)I[O]=this.i(O)|R.i(O);return new f(I,this.h|R.h)},r.xor=function(R){const w=Math.max(this.g.length,R.g.length),I=[];for(let O=0;O<w;O++)I[O]=this.i(O)^R.i(O);return new f(I,this.h^R.h)};function fe(R){const w=R.g.length+1,I=[];for(let O=0;O<w;O++)I[O]=R.i(O)<<1|R.i(O-1)>>>31;return new f(I,R.h)}function le(R,w){const I=w>>5;w%=32;const O=R.g.length-I,N=[];for(let L=0;L<O;L++)N[L]=w>0?R.i(L+I)>>>w|R.i(L+I+1)<<32-w:R.i(L+I);return new f(N,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,VE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=E,As=f}).apply(typeof A0<"u"?A0:typeof self<"u"?self:typeof window<"u"?window:{});var Zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var kE,jl,LE,uh,jm,UE,PE,jE;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zc=="object"&&Zc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,g){if(g)e:{var _=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var P=c[A];if(!(P in _))break e;_=_[P]}c=c[c.length-1],A=_[c],g=g(A),g!=A&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(g){var _=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&_.push([A,g[A]]);return _}});var u=u||{},f=this||self;function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function p(c,g,_){return c.call.apply(c.bind,arguments)}function y(c,g,_){return y=p,y.apply(null,arguments)}function E(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function T(c,g){function _(){}_.prototype=g.prototype,c.Z=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Ob=function(A,P,G){for(var ae=Array(arguments.length-2),De=2;De<arguments.length;De++)ae[De-2]=arguments[De];return g.prototype[P].apply(A,ae)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function M(c){const g=c.length;if(g>0){const _=Array(g);for(let A=0;A<g;A++)_[A]=c[A];return _}return[]}function Q(c,g){for(let A=1;A<arguments.length;A++){const P=arguments[A];var _=typeof P;if(_=_!="object"?_:P?Array.isArray(P)?"array":_:"null",_=="array"||_=="object"&&typeof P.length=="number"){_=c.length||0;const G=P.length||0;c.length=_+G;for(let ae=0;ae<G;ae++)c[_+ae]=P[ae]}else c.push(P)}}class Y{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function q(c){f.setTimeout(()=>{throw c},0)}function ne(){var c=R;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class se{constructor(){this.h=this.g=null}add(g,_){const A=te.get();A.set(g,_),this.h?this.h.next=A:this.g=A,this.h=A}}var te=new Y(()=>new ue,c=>c.reset());class ue{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,le=!1,R=new se,w=()=>{const c=Promise.resolve(void 0);fe=()=>{c.then(I)}};function I(){for(var c;c=ne();){try{c.h.call(c.g)}catch(_){q(_)}var g=te;g.j(c),g.h<100&&(g.h++,c.next=g.g,g.g=c)}le=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};f.addEventListener("test",_,g),f.removeEventListener("test",_,g)}catch{}return c})();function x(c){return/^[\s\xa0]*$/.test(c)}function Ae(c,g){N.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,g)}T(Ae,N),Ae.prototype.init=function(c,g){const _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget,g||(_=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),K=0;function ie(c,g,_,A,P){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!A,this.ha=P,this.key=++K,this.da=this.fa=!1}function me(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function xe(c,g,_){for(const A in c)g.call(_,c[A],A,c)}function ke(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function V(c){const g={};for(const _ in c)g[_]=c[_];return g}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(c,g){let _,A;for(let P=1;P<arguments.length;P++){A=arguments[P];for(_ in A)c[_]=A[_];for(let G=0;G<X.length;G++)_=X[G],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function oe(c){this.src=c,this.g={},this.h=0}oe.prototype.add=function(c,g,_,A,P){const G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);const ae=ye(c,g,A,P);return ae>-1?(g=c[ae],_||(g.fa=!1)):(g=new ie(g,this.src,G,!!A,P),g.fa=_,c.push(g)),g};function _e(c,g){const _=g.type;if(_ in c.g){var A=c.g[_],P=Array.prototype.indexOf.call(A,g,void 0),G;(G=P>=0)&&Array.prototype.splice.call(A,P,1),G&&(me(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function ye(c,g,_,A){for(let P=0;P<c.length;++P){const G=c[P];if(!G.da&&G.listener==g&&G.capture==!!_&&G.ha==A)return P}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),tt={};function Be(c,g,_,A,P){if(Array.isArray(g)){for(let G=0;G<g.length;G++)Be(c,g[G],_,A,P);return null}return _=Oi(_),c&&c[ze]?c.J(g,_,m(A)?!!A.capture:!1,P):Le(c,g,_,!1,A,P)}function Le(c,g,_,A,P,G){if(!g)throw Error("Invalid event type");const ae=m(P)?!!P.capture:!!P;let De=dt(c);if(De||(c[Me]=De=new oe(c)),_=De.add(g,_,A,ae,G),_.proxy)return _;if(A=In(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)L||(P=ae),P===void 0&&(P=!1),c.addEventListener(g.toString(),A,P);else if(c.attachEvent)c.attachEvent(Ce(g.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function In(){function c(_){return g.call(c.src,c.listener,_)}const g=Ke;return c}function ce(c,g,_,A,P){if(Array.isArray(g))for(var G=0;G<g.length;G++)ce(c,g[G],_,A,P);else A=m(A)?!!A.capture:!!A,_=Oi(_),c&&c[ze]?(c=c.i,G=String(g).toString(),G in c.g&&(g=c.g[G],_=ye(g,_,A,P),_>-1&&(me(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete c.g[G],c.h--)))):c&&(c=dt(c))&&(g=c.g[g.toString()],c=-1,g&&(c=ye(g,_,A,P)),(_=c>-1?g[c]:null)&&be(_))}function be(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[ze])_e(g.i,c);else{var _=c.type,A=c.proxy;g.removeEventListener?g.removeEventListener(_,A,c.capture):g.detachEvent?g.detachEvent(Ce(_),A):g.addListener&&g.removeListener&&g.removeListener(A),(_=dt(g))?(_e(_,c),_.h==0&&(_.src=null,g[Me]=null)):me(c)}}}function Ce(c){return c in tt?tt[c]:tt[c]="on"+c}function Ke(c,g){if(c.da)c=!0;else{g=new Ae(g,this);const _=c.listener,A=c.ha||c.src;c.fa&&be(c),c=_.call(A,g)}return c}function dt(c){return c=c[Me],c instanceof oe?c:null}var Tn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oi(c){return typeof c=="function"?c:(c[Tn]||(c[Tn]=function(g){return c.handleEvent(g)}),c[Tn])}function yt(){O.call(this),this.i=new oe(this),this.M=this,this.G=null}T(yt,O),yt.prototype[ze]=!0,yt.prototype.removeEventListener=function(c,g,_,A){ce(this,c,g,_,A)};function at(c,g){var _,A=c.G;if(A)for(_=[];A;A=A.G)_.push(A);if(c=c.M,A=g.type||g,typeof g=="string")g=new N(g,c);else if(g instanceof N)g.target=g.target||c;else{var P=g;g=new N(A,c),re(g,P)}P=!0;let G,ae;if(_)for(ae=_.length-1;ae>=0;ae--)G=g.g=_[ae],P=qn(G,A,!0,g)&&P;if(G=g.g=c,P=qn(G,A,!0,g)&&P,P=qn(G,A,!1,g)&&P,_)for(ae=0;ae<_.length;ae++)G=g.g=_[ae],P=qn(G,A,!1,g)&&P}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var c=this.i;for(const g in c.g){const _=c.g[g];for(let A=0;A<_.length;A++)me(_[A]);delete c.g[g],c.h--}}this.G=null},yt.prototype.J=function(c,g,_,A){return this.i.add(String(c),g,!1,_,A)},yt.prototype.K=function(c,g,_,A){return this.i.add(String(c),g,!0,_,A)};function qn(c,g,_,A){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();let P=!0;for(let G=0;G<g.length;++G){const ae=g[G];if(ae&&!ae.da&&ae.capture==_){const De=ae.listener,It=ae.ha||ae.src;ae.fa&&_e(c.i,ae),P=De.call(It,A)!==!1&&P}}return P&&!A.defaultPrevented}function Ur(c,g){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(c,g||0)}function Ms(c){c.g=Ur(()=>{c.g=null,c.i&&(c.i=!1,Ms(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Xt extends O{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ms(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ar(c){O.call(this),this.h=c,this.g={}}T(ar,O);var Vs=[];function ii(c){xe(c.g,function(g,_){this.g.hasOwnProperty(_)&&be(g)},c),c.g={}}ar.prototype.N=function(){ar.Z.N.call(this),ii(this)},ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sn=f.JSON.stringify,or=f.JSON.parse,ks=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function Hn(){}function Ls(){}var Gn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ht(){N.call(this,"d")}T(Ht,N);function fn(){N.call(this,"c")}T(fn,N);var vt={},Ta=null;function lr(){return Ta=Ta||new yt}vt.Ia="serverreachability";function Sa(c){N.call(this,vt.Ia,c)}T(Sa,N);function ri(c){const g=lr();at(g,new Sa(g))}vt.STAT_EVENT="statevent";function ur(c,g){N.call(this,vt.STAT_EVENT,c),this.stat=g}T(ur,N);function Ue(c){const g=lr();at(g,new ur(g,c))}vt.Ja="timingevent";function _t(c,g){N.call(this,vt.Ja,c),this.size=g}T(_t,N);function Et(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},g)}function Mt(){this.g=!0}Mt.prototype.ua=function(){this.g=!1};function dn(c,g,_,A,P,G){c.info(function(){if(c.g)if(G){var ae="",De=G.split("&");for(let We=0;We<De.length;We++){var It=De[We].split("=");if(It.length>1){const bt=It[0];It=It[1];const li=bt.split("_");ae=li.length>=2&&li[1]=="type"?ae+(bt+"="+It+"&"):ae+(bt+"=redacted&")}}}else ae=null;else ae=G;return"XMLHTTP REQ ("+A+") [attempt "+P+"]: "+g+`
`+_+`
`+ae})}function $t(c,g,_,A,P,G,ae){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+P+"]: "+g+`
`+_+`
`+G+" "+ae})}function Rt(c,g,_,A){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ct(c,_)+(A?" "+A:"")})}function Nn(c,g){c.info(function(){return"TIMEOUT: "+g})}Mt.prototype.info=function(){};function Ct(c,g){if(!c.g)return g;if(!g)return null;try{const G=JSON.parse(g);if(G){for(c=0;c<G.length;c++)if(Array.isArray(G[c])){var _=G[c];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var P=A[0];if(P!="noop"&&P!="stop"&&P!="close")for(let ae=1;ae<A.length;ae++)A[ae]=""}}}}return Sn(G)}catch{return g}}var mn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},An;function Fn(){}T(Fn,Hn),Fn.prototype.g=function(){return new XMLHttpRequest},An=new Fn;function wn(c){return encodeURIComponent(String(c))}function Qn(c){var g=1;c=c.split(":");const _=[];for(;g>0&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function nn(c,g,_,A){this.j=c,this.i=g,this.l=_,this.S=A||1,this.V=new ar(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xn}function xn(){this.i=null,this.g="",this.h=!1}var Vt={},Jt={};function Mi(c,g,_){c.M=1,c.A=Us(Lt(g)),c.u=_,c.R=!0,Aa(c,null)}function Aa(c,g){c.F=Date.now(),Vi(c),c.B=Lt(c.A);var _=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Ca(_.i,"t",A),c.C=0,_=c.j.L,c.h=new xn,c.g=Gu(c.j,_?g:null,!c.u),c.P>0&&(c.O=new Xt(y(c.Y,c,c.g),c.P)),g=c.V,_=c.g,A=c.ba;var P="readystatechange";Array.isArray(P)||(P&&(Vs[0]=P.toString()),P=Vs);for(let G=0;G<P.length;G++){const ae=Be(_,P[G],A||g.handleEvent,!1,g.h||g);if(!ae)break;g.g[ae.key]=ae}g=c.J?V(c.J):{},c.u?(c.v||(c.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,g)):(c.v="GET",c.g.ea(c.B,c.v,null,g)),ri(),dn(c.i,c.v,c.B,c.l,c.S,c.u)}nn.prototype.ba=function(c){c=c.target;const g=this.O;g&&bi(c)==3?g.j():this.Y(c)},nn.prototype.Y=function(c){try{if(c==this.g)e:{const De=bi(this.g),It=this.g.ya(),We=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||rn(this.g)))){this.K||De!=4||It==7||(It==8||We<=0?ri(3):ri(2)),ki(this);var g=this.g.ca();this.X=g;var _=ff(this);if(this.o=g==200,$t(this.i,this.v,this.B,this.l,this.S,De,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,P=this.g;if((A=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(A)){var G=A;break t}}G=null}if(c=G)Rt(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Li(this,c);else{this.o=!1,this.m=3,Ue(12),Kn(this),si(this);break e}}if(this.R){c=!0;let bt;for(;!this.K&&this.C<_.length;)if(bt=Du(this,_),bt==Jt){De==4&&(this.m=4,Ue(14),c=!1),Rt(this.i,this.l,null,"[Incomplete Response]");break}else if(bt==Vt){this.m=4,Ue(15),Rt(this.i,this.l,_,"[Invalid Chunk]"),c=!1;break}else Rt(this.i,this.l,bt,null),Li(this,bt);if(Nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||_.length!=0||this.h.h||(this.m=1,Ue(16),c=!1),this.o=this.o&&c,!c)Rt(this.i,this.l,_,"[Invalid Chunked Response]"),Kn(this),si(this);else if(_.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),el(ae),ae.P=!0,Ue(11))}}else Rt(this.i,this.l,_,null),Li(this,_);De==4&&Kn(this),this.o&&!this.K&&(De==4?zu(this.j,this):(this.o=!1,Vi(this)))}else hr(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ue(12)):(this.m=0,Ue(13)),Kn(this),si(this)}}}catch{}finally{}};function ff(c){if(!Nu(c))return c.g.la();const g=rn(c.g);if(g==="")return"";let _="";const A=g.length,P=bi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Kn(c),si(c),"";c.h.i=new f.TextDecoder}for(let G=0;G<A;G++)c.h.h=!0,_+=c.h.i.decode(g[G],{stream:!(P&&G==A-1)});return g.length=0,c.h.g+=_,c.C=0,c.h.g}function Nu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Du(c,g){var _=c.C,A=g.indexOf(`
`,_);return A==-1?Jt:(_=Number(g.substring(_,A)),isNaN(_)?Vt:(A+=1,A+_>g.length?Jt:(g=g.slice(A,A+_),c.C=A+_,g)))}nn.prototype.cancel=function(){this.K=!0,Kn(this)};function Vi(c){c.T=Date.now()+c.H,wa(c,c.H)}function wa(c,g){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Et(y(c.aa,c),g)}function ki(c){c.D&&(f.clearTimeout(c.D),c.D=null)}nn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Nn(this.i,this.B),this.M!=2&&(ri(),Ue(17)),Kn(this),this.m=2,si(this)):wa(this,this.T-c)};function si(c){c.j.I==0||c.K||zu(c.j,c)}function Kn(c){ki(c);var g=c.O;g&&typeof g.dispose=="function"&&g.dispose(),c.O=null,ii(c.V),c.g&&(g=c.g,c.g=null,g.abort(),g.dispose())}function Li(c,g){try{var _=c.j;if(_.I!=0&&(_.g==c||Pi(_.h,c))){if(!c.L&&Pi(_.h,c)&&_.I==3){try{var A=_.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var P=A;if(P[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<c.F)Ma(_),Fr(_);else break e;Gs(_),Ue(18)}}else _.xa=P[1],0<_.xa-_.K&&P[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Et(y(_.Va,_),6e3));Ui(_.h)<=1&&_.ta&&(_.ta=void 0)}else Gi(_,11)}else if((c.L||_.g==c)&&Ma(_),!x(g))for(P=_.Ba.g.parse(g),g=0;g<P.length;g++){let We=P[g];const bt=We[0];if(!(bt<=_.K))if(_.K=bt,We=We[1],_.I==2)if(We[0]=="c"){_.M=We[1],_.ba=We[2];const li=We[3];li!=null&&(_.ka=li,_.j.info("VER="+_.ka));const Fi=We[4];Fi!=null&&(_.za=Fi,_.j.info("SVER="+_.za));const Ti=We[5];Ti!=null&&typeof Ti=="number"&&Ti>0&&(A=1.5*Ti,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Si=c.g;if(Si){const Fs=Si.g?Si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var G=A.h;G.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(qo(G,G.h),G.h=null))}if(A.G){const Va=Si.g?Si.g.getResponseHeader("X-HTTP-Session-Id"):null;Va&&(A.wa=Va,it(A.J,A.G,Va))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-c.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var ae=c;if(A.na=Hu(A,A.L?A.ba:null,A.W),ae.L){Ho(A.h,ae);var De=ae,It=A.O;It&&(De.H=It),De.D&&(ki(De),Vi(De)),A.g=ae}else Pu(A);_.i.length>0&&Hi(_)}else We[0]!="stop"&&We[0]!="close"||Gi(_,7);else _.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Gi(_,7):Zo(_):We[0]!="noop"&&_.l&&_.l.qa(We),_.A=0)}}ri(4)}catch{}}var kt=class{constructor(c,g){this.g=c,this.map=g}};function zo(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ui(c){return c.h?1:c.g?c.g.size:0}function Pi(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function qo(c,g){c.g?c.g.add(g):c.h=g}function Ho(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}zo.prototype.cancel=function(){if(this.i=Go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Go(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.G);return g}return M(c.i)}var Ou=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xa(c,g){if(c){c=c.split("&");for(let _=0;_<c.length;_++){const A=c[_].indexOf("=");let P,G=null;A>=0?(P=c[_].substring(0,A),G=c[_].substring(A+1)):P=c[_],g(P,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Yn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;c instanceof Yn?(this.l=c.l,Zt(this,c.j),this.o=c.o,this.g=c.g,Pr(this,c.u),this.h=c.h,Fo(this,Lu(c.i)),this.m=c.m):c&&(g=String(c).match(Ou))?(this.l=!1,Zt(this,g[1]||"",!0),this.o=ji(g[2]||""),this.g=ji(g[3]||"",!0),Pr(this,g[4]),this.h=ji(g[5]||"",!0),Fo(this,g[6]||"",!0),this.m=ji(g[7]||"")):(this.l=!1,this.i=new zr(null,this.l))}Yn.prototype.toString=function(){const c=[];var g=this.j;g&&c.push(Ps(g,Ra,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Ps(g,Ra,!0),"@"),c.push(wn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&c.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Ps(_,_.charAt(0)=="/"?Qo:Mu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Ps(_,Vu)),c.join("")},Yn.prototype.resolve=function(c){const g=Lt(this);let _=!!c.j;_?Zt(g,c.j):_=!!c.o,_?g.o=c.o:_=!!c.g,_?g.g=c.g:_=c.u!=null;var A=c.h;if(_)Pr(g,c.u);else if(_=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var P=g.h.lastIndexOf("/");P!=-1&&(A=g.h.slice(0,P+1)+A)}if(P=A,P==".."||P==".")A="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){A=P.lastIndexOf("/",0)==0,P=P.split("/");const G=[];for(let ae=0;ae<P.length;){const De=P[ae++];De=="."?A&&ae==P.length&&G.push(""):De==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),A&&ae==P.length&&G.push("")):(G.push(De),A=!0)}A=G.join("/")}else A=P}return _?g.h=A:_=c.i.toString()!=="",_?Fo(g,Lu(c.i)):_=!!c.m,_&&(g.m=c.m),g};function Lt(c){return new Yn(c)}function Zt(c,g,_){c.j=_?ji(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Pr(c,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);c.u=g}else c.u=null}function Fo(c,g,_){g instanceof zr?(c.i=g,Ia(c.i,c.l)):(_||(g=Ps(g,jr)),c.i=new zr(g,c.l))}function it(c,g,_){c.i.set(g,_)}function Us(c){return it(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ji(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ps(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Dn),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Dn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ra=/[#\/\?@]/g,Mu=/[#\?:]/g,Qo=/[#\?]/g,jr=/[#\?@]/g,Vu=/#/g;function zr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function On(c){c.g||(c.g=new Map,c.h=0,c.i&&xa(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=zr.prototype,r.add=function(c,g){On(this),this.i=null,c=Br(this,c);let _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function ku(c,g){On(c),g=Br(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Ko(c,g){return On(c),g=Br(c,g),c.g.has(g)}r.forEach=function(c,g){On(this),this.g.forEach(function(_,A){_.forEach(function(P){c.call(g,P,A,this)},this)},this)};function Yo(c,g){On(c);let _=[];if(typeof g=="string")Ko(c,g)&&(_=_.concat(c.g.get(Br(c,g))));else for(c=Array.from(c.g.values()),g=0;g<c.length;g++)_=_.concat(c[g]);return _}r.set=function(c,g){return On(this),this.i=null,c=Br(this,c),Ko(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},r.get=function(c,g){return c?(c=Yo(this,c),c.length>0?String(c[0]):g):g};function Ca(c,g,_){ku(c,g),_.length>0&&(c.i=null,c.g.set(Br(c,g),M(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var _=g[A];const P=wn(_);_=Yo(this,_);for(let G=0;G<_.length;G++){let ae=P;_[G]!==""&&(ae+="="+wn(_[G])),c.push(ae)}}return this.i=c.join("&")};function Lu(c){const g=new zr;return g.i=c.i,c.g&&(g.g=new Map(c.g),g.h=c.h),g}function Br(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Ia(c,g){g&&!c.j&&(On(c),c.i=null,c.g.forEach(function(_,A){const P=A.toLowerCase();A!=P&&(ku(this,A),Ca(this,P,_))},c)),c.j=g}function _i(c,g){const _=new Mt;if(f.Image){const A=new Image;A.onload=E(ai,_,"TestLoadImage: loaded",!0,g,A),A.onerror=E(ai,_,"TestLoadImage: error",!1,g,A),A.onabort=E(ai,_,"TestLoadImage: abort",!1,g,A),A.ontimeout=E(ai,_,"TestLoadImage: timeout",!1,g,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else g(!1)}function Xo(c,g){const _=new Mt,A=new AbortController,P=setTimeout(()=>{A.abort(),ai(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:A.signal}).then(G=>{clearTimeout(P),G.ok?ai(_,"TestPingServer: ok",!0,g):ai(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(P),ai(_,"TestPingServer: error",!1,g)})}function ai(c,g,_,A,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),A(_)}catch{}}function qr(){this.g=new ks}function zi(c){this.i=c.Sb||null,this.h=c.ab||!1}T(zi,Hn),zi.prototype.g=function(){return new js(this.i,this.h)};function js(c,g){yt.call(this),this.H=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(js,yt),r=js.prototype,r.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=g,this.readyState=1,Ei(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(g.body=c),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hr(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Na(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Na(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Hr(this):Ei(this),this.readyState==3&&Na(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,Hr(this))},r.Na=function(c){this.g&&(this.response=c,Hr(this))},r.ga=function(){this.g&&Hr(this)};function Hr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Ei(c)}r.setRequestHeader=function(c,g){this.A.append(c,g)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Ei(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function oi(c){let g="";return xe(c,function(_,A){g+=A,g+=":",g+=_,g+=`\r
`}),g}function zs(c,g,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=oi(_),typeof c=="string"?_!=null&&wn(_):it(c,g,_))}function ot(c){yt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ot,yt);var Bi=/^https?$/i,$o=["POST","PUT"];r=ot.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,g,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():An.g(),this.g.onreadystatechange=C(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(G){Bs(this,G);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var P in A)_.set(P,A[P]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const G of A.keys())_.set(G,A.get(G));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),P=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call($o,g,void 0)>=0)||A||P||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ae]of _)this.g.setRequestHeader(G,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(G){Bs(this,G)}};function Bs(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.o=5,Jo(c),cr(c)}function Jo(c){c.A||(c.A=!0,at(c,"complete"),at(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,at(this,"complete"),at(this,"abort"),cr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cr(this,!0)),ot.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?qs(this):this.Xa())},r.Xa=function(){qs(this)};function qs(c){if(c.h&&typeof u<"u"){if(c.v&&bi(c)==4)setTimeout(c.Ca.bind(c),0);else if(at(c,"readystatechange"),bi(c)==4){c.h=!1;try{const G=c.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var A;if(A=G===0){let ae=String(c.D).match(Ou)[1]||null;!ae&&f.self&&f.self.location&&(ae=f.self.location.protocol.slice(0,-1)),A=!Bi.test(ae?ae.toLowerCase():"")}_=A}if(_)at(c,"complete"),at(c,"success");else{c.o=6;try{var P=bi(c)>2?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.ca()+"]",Jo(c)}}finally{cr(c)}}}}function cr(c,g){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const _=c.g;c.g=null,g||at(c,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function bi(c){return c.g?c.g.readyState:0}r.ca=function(){try{return bi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),or(g)}};function rn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function hr(c){const g={};c=(c.g&&bi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(x(c[A]))continue;var _=Qn(c[A]);const P=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=g[P]||[];g[P]=G,G.push(_)}ke(g,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qi(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function Gr(c){this.za=0,this.i=[],this.j=new Mt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qi("baseRetryDelayMs",5e3,c),this.Za=qi("retryDelaySeedMs",1e4,c),this.Ta=qi("forwardChannelMaxRetries",2,c),this.va=qi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new zo(c&&c.concurrentRequestLimit),this.Ba=new qr,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Gr.prototype,r.ka=8,r.I=1,r.connect=function(c,g,_,A){Ue(0),this.W=c,this.H=g||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=Hu(this,null,this.W),Hi(this)};function Zo(c){if(Da(c),c.I==3){var g=c.V++,_=Lt(c.J);if(it(_,"SID",c.M),it(_,"RID",g),it(_,"TYPE","terminate"),Hs(c,_),g=new nn(c,c.j,g),g.M=2,g.A=Us(Lt(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=g.A,_=!0),_||(g.g=Gu(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Vi(g)}qu(c)}function Fr(c){c.g&&(el(c),c.g.cancel(),c.g=null)}function Da(c){Fr(c),c.v&&(f.clearTimeout(c.v),c.v=null),Ma(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Hi(c){if(!Bo(c.h)&&!c.m){c.m=!0;var g=c.Ea;fe||w(),le||(fe(),le=!0),R.add(g,c),c.D=0}}function Oa(c,g){return Ui(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=g.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Et(y(c.Ea,c,g),Bu(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const P=new nn(this,this.j,c);let G=this.o;if(this.U&&(G?(G=V(G),re(G,this.U)):G=this.U),this.u!==null||this.R||(P.J=G,G=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Uu(this,P,g),_=Lt(this.J),it(_,"RID",c),it(_,"CVER",22),this.G&&it(_,"X-HTTP-Session-Id",this.G),Hs(this,_),G&&(this.R?g="headers="+wn(oi(G))+"&"+g:this.u&&zs(_,this.u,G)),qo(this.h,P),this.Ra&&it(_,"TYPE","init"),this.S?(it(_,"$req",g),it(_,"SID","null"),P.U=!0,Mi(P,_,null)):Mi(P,_,g),this.I=2}}else this.I==3&&(c?Wo(this,c):this.i.length==0||Bo(this.h)||Wo(this))};function Wo(c,g){var _;g?_=g.l:_=c.V++;const A=Lt(c.J);it(A,"SID",c.M),it(A,"RID",_),it(A,"AID",c.K),Hs(c,A),c.u&&c.o&&zs(A,c.u,c.o),_=new nn(c,c.j,_,c.D+1),c.u===null&&(_.J=c.o),g&&(c.i=g.G.concat(c.i)),g=Uu(c,_,1e3),_.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),qo(c.h,_),Mi(_,A,g)}function Hs(c,g){c.H&&xe(c.H,function(_,A){it(g,A,_)}),c.l&&xe({},function(_,A){it(g,A,_)})}function Uu(c,g,_){_=Math.min(c.i.length,_);const A=c.l?y(c.l.Ka,c.l,c):null;e:{var P=c.i;let De=-1;for(;;){const It=["count="+_];De==-1?_>0?(De=P[0].g,It.push("ofs="+De)):De=0:It.push("ofs="+De);let We=!0;for(let bt=0;bt<_;bt++){var G=P[bt].g;const li=P[bt].map;if(G-=De,G<0)De=Math.max(0,P[bt].g-100),We=!1;else try{G="req"+G+"_"||"";try{var ae=li instanceof Map?li:Object.entries(li);for(const[Fi,Ti]of ae){let Si=Ti;m(Ti)&&(Si=Sn(Ti)),It.push(G+Fi+"="+encodeURIComponent(Si))}}catch(Fi){throw It.push(G+"type="+encodeURIComponent("_badmap")),Fi}}catch{A&&A(li)}}if(We){ae=It.join("&");break e}}ae=void 0}return c=c.i.splice(0,_),g.G=c,ae}function Pu(c){if(!c.g&&!c.v){c.Y=1;var g=c.Da;fe||w(),le||(fe(),le=!0),R.add(g,c),c.A=0}}function Gs(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Et(y(c.Da,c),Bu(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,ju(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Et(y(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ue(10),Fr(this),ju(this))};function el(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function ju(c){c.g=new nn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var g=Lt(c.na);it(g,"RID","rpc"),it(g,"SID",c.M),it(g,"AID",c.K),it(g,"CI",c.F?"0":"1"),!c.F&&c.ia&&it(g,"TO",c.ia),it(g,"TYPE","xmlhttp"),Hs(c,g),c.u&&c.o&&zs(g,c.u,c.o),c.O&&(c.g.H=c.O);var _=c.g;c=c.ba,_.M=1,_.A=Us(Lt(g)),_.u=null,_.R=!0,Aa(_,c)}r.Va=function(){this.C!=null&&(this.C=null,Fr(this),Gs(this),Ue(19))};function Ma(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function zu(c,g){var _=null;if(c.g==g){Ma(c),el(c),c.g=null;var A=2}else if(Pi(c.h,g))_=g.G,Ho(c.h,g),A=1;else return;if(c.I!=0){if(g.o)if(A==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var P=c.D;A=lr(),at(A,new _t(A,_)),Hi(c)}else Pu(c);else if(P=g.m,P==3||P==0&&g.X>0||!(A==1&&Oa(c,g)||A==2&&Gs(c)))switch(_&&_.length>0&&(g=c.h,g.i=g.i.concat(_)),P){case 1:Gi(c,5);break;case 4:Gi(c,10);break;case 3:Gi(c,6);break;default:Gi(c,2)}}}function Bu(c,g){let _=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(_*=2),_*g}function Gi(c,g){if(c.j.info("Error code "+g),g==2){var _=y(c.bb,c),A=c.Ua;const P=!A;A=new Yn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Zt(A,"https"),Us(A),P?_i(A.toString(),_):Xo(A.toString(),_)}else Ue(2);c.I=0,c.l&&c.l.pa(g),qu(c),Da(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ue(2)):(this.j.info("Failed to ping google.com"),Ue(1))};function qu(c){if(c.I=0,c.ja=[],c.l){const g=Go(c.h);(g.length!=0||c.i.length!=0)&&(Q(c.ja,g),Q(c.ja,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.oa()}}function Hu(c,g,_){var A=_ instanceof Yn?Lt(_):new Yn(_);if(A.g!="")g&&(A.g=g+"."+A.g),Pr(A,A.u);else{var P=f.location;A=P.protocol,g=g?g+"."+P.hostname:P.hostname,P=+P.port;const G=new Yn(null);A&&Zt(G,A),g&&(G.g=g),P&&Pr(G,P),_&&(G.h=_),A=G}return _=c.G,g=c.wa,_&&g&&it(A,_,g),it(A,"VER",c.ka),Hs(c,A),A}function Gu(c,g,_){if(g&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Aa&&!c.ma?new ot(new zi({ab:_})):new ot(c.ma),g.Fa(c.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}r=Fu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Qr(){}Qr.prototype.g=function(c,g){return new Rn(c,g)};function Rn(c,g){yt.call(this),this.g=new Gr(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(c?c["X-WebChannel-Client-Profile"]=g.sa:c={"X-WebChannel-Client-Profile":g.sa}),this.g.U=c,(c=g&&g.Qb)&&!x(c)&&(this.g.u=c),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!x(g)&&(this.g.G=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new fr(this)}T(Rn,yt),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){Zo(this.g)},Rn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.v&&(_={},_.__data__=Sn(c),c=_);g.i.push(new kt(g.Ya++,c)),g.I==3&&Hi(g)},Rn.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,Rn.Z.N.call(this)};function Qu(c){Ht.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}T(Qu,Ht);function Ku(){fn.call(this),this.status=1}T(Ku,fn);function fr(c){this.g=c}T(fr,Fu),fr.prototype.ra=function(){at(this.g,"a")},fr.prototype.qa=function(c){at(this.g,new Qu(c))},fr.prototype.pa=function(c){at(this.g,new Ku)},fr.prototype.oa=function(){at(this.g,"b")},Qr.prototype.createWebChannel=Qr.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,jE=function(){return new Qr},PE=function(){return lr()},UE=vt,jm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},mn.NO_ERROR=0,mn.TIMEOUT=8,mn.HTTP_ERROR=6,uh=mn,gn.COMPLETE="complete",LE=gn,Ls.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",yt.prototype.listen=yt.prototype.J,jl=Ls,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,kE=ot}).apply(typeof Zc<"u"?Zc:typeof self<"u"?self:typeof window<"u"?window:{});const w0="@firebase/firestore",x0="4.9.2";class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");let Mo="12.3.0";const pa=new ug("@firebase/firestore");function co(){return pa.logLevel}function he(r,...e){if(pa.logLevel<=Ge.DEBUG){const n=e.map(Tg);pa.debug(`Firestore (${Mo}): ${r}`,...n)}}function Vr(r,...e){if(pa.logLevel<=Ge.ERROR){const n=e.map(Tg);pa.error(`Firestore (${Mo}): ${r}`,...n)}}function So(r,...e){if(pa.logLevel<=Ge.WARN){const n=e.map(Tg);pa.warn(`Firestore (${Mo}): ${r}`,...n)}}function Tg(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Se(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,zE(r,s,n)}function zE(r,e,n){let s=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Vr(s),new Error(s)}function nt(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||zE(e,o,s)}function Ne(r,e){return r}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ha{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class BE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(vn.UNAUTHENTICATED)))}shutdown(){}}class iC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class rC{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new ha;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ha,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ha)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nt(typeof s.accessToken=="string",31837,{l:s}),new BE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class sC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new sC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class R0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ri(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nt(this.o===void 0,3512);const s=u=>{u.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,he("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new R0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new R0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function lC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class Sg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=lC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Fe(r,e){return r<e?-1:r>e?1:0}function zm(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return _m(o)===_m(u)?Fe(o,u):_m(o)?1:-1}return Fe(r.length,e.length)}const uC=55296,cC=57343;function _m(r){const e=r.charCodeAt(0);return e>=uC&&e<=cC}function Ao(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}const C0="__name__";class $i{constructor(e,n,s){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Se(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return $i.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $i?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=$i.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Fe(e.length,n.length)}static compareSegments(e,n){const s=$i.isNumericId(e),o=$i.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?$i.extractNumericId(e).compare($i.extractNumericId(n)):zm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return As.fromString(e.substring(4,e.length-2))}}class St extends $i{construct(e,n,s){return new St(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new St(n)}static emptyPath(){return new St([])}}const hC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends $i{construct(e,n,s){return new cn(e,n,s)}static isValidIdentifier(e){return hC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===C0}static keyField(){return new cn([C0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new pe(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new pe(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new pe(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(n)}static emptyPath(){return new cn([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(St.fromString(e))}static fromName(e){return new Ee(St.fromString(e).popFirst(5))}static empty(){return new Ee(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return St.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new St(e.slice()))}}function fC(r,e,n){if(!n)throw new pe(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function dC(r,e,n,s){if(e===!0&&s===!0)throw new pe(ee.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function I0(r){if(!Ee.isDocumentKey(r))throw new pe(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function qE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ag(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function Dr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new pe(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ag(r);throw new pe(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function qt(r,e){const n={typeString:r};return e&&(n.value=e),n}function bu(r,e){if(!qE(r))throw new pe(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new pe(ee.INVALID_ARGUMENT,n);return!0}const N0=-62135596800,D0=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*D0);return new pt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<N0)throw new pe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/D0}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bu(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-N0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:qt("string",pt._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new pt(0,0))}static max(){return new Re(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ru=-1;function mC(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new pt(n+1,0):new pt(n,s));return new ws(o,Ee.empty(),e)}function gC(r){return new ws(r.readTime,r.key,ru)}class ws{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ws(Re.min(),Ee.empty(),ru)}static max(){return new ws(Re.max(),Ee.empty(),ru)}}function pC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(r.documentKey,e.documentKey),n!==0?n:Fe(r.largestBatchId,e.largestBatchId))}const yC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vo(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==yC)throw r;he("LocalStore","Unexpectedly lost primary lease")}class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,s)=>{n(e)}))}static reject(e){return new W(((n,s)=>{s(e)}))}static waitFor(e){return new W(((n,s)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(p=>s(p)))})),f=!0,u===o&&n()}))}static or(e){let n=W.resolve(!1);for(const s of e)n=n.next((o=>o?W.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new W(((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next((E=>{f[y]=E,++m,m===u&&s(f)}),(E=>o(E)))}}))}static doWhile(e,n){return new W(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function _C(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ko(r){return r.name==="IndexedDbTransactionError"}class Gh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gh.ce=-1;const wg=-1;function Fh(r){return r==null}function Ah(r){return r===0&&1/r==-1/0}function EC(r){return typeof r=="number"&&Number.isInteger(r)&&!Ah(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const HE="";function bC(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=O0(e)),e=TC(r.get(n),e);return O0(e)}function TC(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case HE:n+="";break;default:n+=u}}return n}function O0(r){return r+HE+""}function M0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Ds(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function GE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class At{constructor(e,n){this.comparator=e,this.root=n||un.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wc(this.root,e,this.comparator,!0)}}class Wc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??un.RED,this.left=o??un.EMPTY,this.right=u??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new un(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return un.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new un(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Yt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new V0(this.data.getIterator())}getIteratorFrom(e){return new V0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Yt(this.comparator);return n.data=e,n}}class V0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ni{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new ni([])}unionWith(e){let n=new Yt(cn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ni(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class FE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new FE("Invalid base64 string: "+u):u}})(e);return new hn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const SC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(r){if(nt(!!r,39018),typeof r=="string"){let e=0;const n=SC.exec(r);if(nt(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ot(r.seconds),nanos:Ot(r.nanos)}}function Ot(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Rs(r){return typeof r=="string"?hn.fromBase64String(r):hn.fromUint8Array(r)}const QE="server_timestamp",KE="__type__",YE="__previous_value__",XE="__local_write_time__";function xg(r){return(r?.mapValue?.fields||{})[KE]?.stringValue===QE}function Qh(r){const e=r.mapValue.fields[YE];return xg(e)?Qh(e):e}function su(r){const e=xs(r.mapValue.fields[XE].timestampValue);return new pt(e.seconds,e.nanos)}class AC{constructor(e,n,s,o,u,f,m,p,y,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=E}}const wh="(default)";class au{constructor(e,n){this.projectId=e,this.database=n||wh}static empty(){return new au("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof au&&e.projectId===this.projectId&&e.database===this.database}}const $E="__type__",wC="__max__",eh={mapValue:{}},JE="__vector__",xh="value";function Cs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?xg(r)?4:RC(r)?9007199254740991:xC(r)?10:11:Se(28295,{value:r})}function ir(r,e){if(r===e)return!0;const n=Cs(r);if(n!==Cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return su(r).isEqual(su(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=xs(o.timestampValue),m=xs(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return Rs(o.bytesValue).isEqual(Rs(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return Ot(o.geoPointValue.latitude)===Ot(u.geoPointValue.latitude)&&Ot(o.geoPointValue.longitude)===Ot(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Ot(o.integerValue)===Ot(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Ot(o.doubleValue),m=Ot(u.doubleValue);return f===m?Ah(f)===Ah(m):isNaN(f)&&isNaN(m)}return!1})(r,e);case 9:return Ao(r.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(M0(f)!==M0(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!ir(f[p],m[p])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function ou(r,e){return(r.values||[]).find((n=>ir(n,e)))!==void 0}function wo(r,e){if(r===e)return 0;const n=Cs(r),s=Cs(e);if(n!==s)return Fe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=Ot(u.integerValue||u.doubleValue),p=Ot(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,e);case 3:return k0(r.timestampValue,e.timestampValue);case 4:return k0(su(r),su(e));case 5:return zm(r.stringValue,e.stringValue);case 6:return(function(u,f){const m=Rs(u),p=Rs(f);return m.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),p=f.split("/");for(let y=0;y<m.length&&y<p.length;y++){const E=Fe(m[y],p[y]);if(E!==0)return E}return Fe(m.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=Fe(Ot(u.latitude),Ot(f.latitude));return m!==0?m:Fe(Ot(u.longitude),Ot(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return L0(r.arrayValue,e.arrayValue);case 10:return(function(u,f){const m=u.fields||{},p=f.fields||{},y=m[xh]?.arrayValue,E=p[xh]?.arrayValue,T=Fe(y?.values?.length||0,E?.values?.length||0);return T!==0?T:L0(y,E)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===eh.mapValue&&f===eh.mapValue)return 0;if(u===eh.mapValue)return 1;if(f===eh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=f.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const C=zm(p[T],E[T]);if(C!==0)return C;const M=wo(m[p[T]],y[E[T]]);if(M!==0)return M}return Fe(p.length,E.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{he:n})}}function k0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Fe(r,e);const n=xs(r),s=xs(e),o=Fe(n.seconds,s.seconds);return o!==0?o:Fe(n.nanos,s.nanos)}function L0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=wo(n[o],s[o]);if(u)return u}return Fe(n.length,s.length)}function xo(r){return Bm(r)}function Bm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=xs(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Rs(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Ee.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Bm(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Bm(n.fields[f])}`;return o+"}"})(r.mapValue):Se(61005,{value:r})}function ch(r){switch(Cs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qh(r);return e?16+ch(e):16;case 5:return 2*r.stringValue.length;case 6:return Rs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+ch(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ds(s.fields,((u,f)=>{o+=u.length+ch(f)})),o})(r.mapValue);default:throw Se(13486,{value:r})}}function qm(r){return!!r&&"integerValue"in r}function Rg(r){return!!r&&"arrayValue"in r}function U0(r){return!!r&&"nullValue"in r}function P0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function hh(r){return!!r&&"mapValue"in r}function xC(r){return(r?.mapValue?.fields||{})[$E]?.stringValue===JE}function Kl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ds(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Kl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kl(r.arrayValue.values[n]);return e}return{...r}}function RC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===wC}class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!hh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(n)}setAll(e){let n=cn.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Kl(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());hh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];hh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ds(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new zn(Kl(this.value))}}function ZE(r){const e=[];return Ds(r.fields,((n,s)=>{const o=new cn([n]);if(hh(s)){const u=ZE(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new ni(e)}class _n{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new _n(e,0,Re.min(),Re.min(),Re.min(),zn.empty(),0)}static newFoundDocument(e,n,s,o){return new _n(e,1,n,Re.min(),s,o,0)}static newNoDocument(e,n){return new _n(e,2,n,Re.min(),Re.min(),zn.empty(),0)}static newUnknownDocument(e,n){return new _n(e,3,n,Re.min(),Re.min(),zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rh{constructor(e,n){this.position=e,this.inclusive=n}}function j0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=Ee.comparator(Ee.fromName(f.referenceValue),n.key):s=wo(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function z0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!ir(r.position[n],e.position[n]))return!1;return!0}class Ch{constructor(e,n="asc"){this.field=e,this.dir=n}}function CC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class WE{}class Qt extends WE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new NC(e,n,s):n==="array-contains"?new MC(e,s):n==="in"?new VC(e,s):n==="not-in"?new kC(e,s):n==="array-contains-any"?new LC(e,s):new Qt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new DC(e,s):new OC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wo(n,this.value)):n!==null&&Cs(this.value)===Cs(n)&&this.matchesComparison(wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends WE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new rr(e,n)}matches(e){return eb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eb(r){return r.op==="and"}function tb(r){return IC(r)&&eb(r)}function IC(r){for(const e of r.filters)if(e instanceof rr)return!1;return!0}function Hm(r){if(r instanceof Qt)return r.field.canonicalString()+r.op.toString()+xo(r.value);if(tb(r))return r.filters.map((e=>Hm(e))).join(",");{const e=r.filters.map((n=>Hm(n))).join(",");return`${r.op}(${e})`}}function nb(r,e){return r instanceof Qt?(function(s,o){return o instanceof Qt&&s.op===o.op&&s.field.isEqual(o.field)&&ir(s.value,o.value)})(r,e):r instanceof rr?(function(s,o){return o instanceof rr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&nb(f,o.filters[m])),!0):!1})(r,e):void Se(19439)}function ib(r){return r instanceof Qt?(function(n){return`${n.field.canonicalString()} ${n.op} ${xo(n.value)}`})(r):r instanceof rr?(function(n){return n.op.toString()+" {"+n.getFilters().map(ib).join(" ,")+"}"})(r):"Filter"}class NC extends Qt{constructor(e,n,s){super(e,n,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class DC extends Qt{constructor(e,n){super(e,"in",n),this.keys=rb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class OC extends Qt{constructor(e,n){super(e,"not-in",n),this.keys=rb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function rb(r,e){return(e.arrayValue?.values||[]).map((n=>Ee.fromName(n.referenceValue)))}class MC extends Qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rg(n)&&ou(n.arrayValue,this.value)}}class VC extends Qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ou(this.value.arrayValue,n)}}class kC extends Qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ou(this.value.arrayValue,n)}}class LC extends Qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>ou(this.value.arrayValue,s)))}}class UC{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function B0(r,e=null,n=[],s=[],o=null,u=null,f=null){return new UC(r,e,n,s,o,u,f)}function Cg(r){const e=Ne(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Hm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Fh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>xo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>xo(s))).join(",")),e.Te=n}return e.Te}function Ig(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!CC(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!nb(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!z0(r.startAt,e.startAt)&&z0(r.endAt,e.endAt)}function Gm(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Kh{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function PC(r,e,n,s,o,u,f,m){return new Kh(r,e,n,s,o,u,f,m)}function Ng(r){return new Kh(r)}function q0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function jC(r){return r.collectionGroup!==null}function Yl(r){const e=Ne(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Yt(cn.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Ch(u,s))})),n.has(cn.keyField().canonicalString())||e.Ie.push(new Ch(cn.keyField(),s))}return e.Ie}function Zi(r){const e=Ne(r);return e.Ee||(e.Ee=zC(e,Yl(r))),e.Ee}function zC(r,e){if(r.limitType==="F")return B0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Ch(o.field,u)}));const n=r.endAt?new Rh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Rh(r.startAt.position,r.startAt.inclusive):null;return B0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Fm(r,e,n){return new Kh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Yh(r,e){return Ig(Zi(r),Zi(e))&&r.limitType===e.limitType}function sb(r){return`${Cg(Zi(r))}|lt:${r.limitType}`}function ho(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>ib(o))).join(", ")}]`),Fh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>xo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>xo(o))).join(",")),`Target(${s})`})(Zi(r))}; limitType=${r.limitType})`}function Xh(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Ee.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of Yl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,p){const y=j0(f,m,p);return f.inclusive?y<=0:y<0})(s.startAt,Yl(s),o)||s.endAt&&!(function(f,m,p){const y=j0(f,m,p);return f.inclusive?y>=0:y>0})(s.endAt,Yl(s),o))})(r,e)}function BC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ab(r){return(e,n)=>{let s=!1;for(const o of Yl(r)){const u=qC(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function qC(r,e,n){const s=r.field.isKeyField()?Ee.comparator(e.key,n.key):(function(u,f,m){const p=f.data.field(u),y=m.data.field(u);return p!==null&&y!==null?wo(p,y):Se(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Se(19790,{direction:r.dir})}}class _a{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return GE(this.inner)}size(){return this.innerSize}}const HC=new At(Ee.comparator);function kr(){return HC}const ob=new At(Ee.comparator);function zl(...r){let e=ob;for(const n of r)e=e.insert(n.key,n);return e}function lb(r){let e=ob;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function ua(){return Xl()}function ub(){return Xl()}function Xl(){return new _a((r=>r.toString()),((r,e)=>r.isEqual(e)))}const GC=new At(Ee.comparator),FC=new Yt(Ee.comparator);function Qe(...r){let e=FC;for(const n of r)e=e.add(n);return e}const QC=new Yt(Fe);function KC(){return QC}function Dg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function cb(r){return{integerValue:""+r}}function YC(r,e){return EC(e)?cb(e):Dg(r,e)}class $h{constructor(){this._=void 0}}function XC(r,e,n){return r instanceof lu?(function(o,u){const f={fields:{[KE]:{stringValue:QE},[XE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&xg(u)&&(u=Qh(u)),u&&(f.fields[YE]=u),{mapValue:f}})(n,e):r instanceof uu?fb(r,e):r instanceof cu?db(r,e):(function(o,u){const f=hb(o,u),m=H0(f)+H0(o.Ae);return qm(f)&&qm(o.Ae)?cb(m):Dg(o.serializer,m)})(r,e)}function $C(r,e,n){return r instanceof uu?fb(r,e):r instanceof cu?db(r,e):n}function hb(r,e){return r instanceof Ih?(function(s){return qm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class lu extends $h{}class uu extends $h{constructor(e){super(),this.elements=e}}function fb(r,e){const n=mb(e);for(const s of r.elements)n.some((o=>ir(o,s)))||n.push(s);return{arrayValue:{values:n}}}class cu extends $h{constructor(e){super(),this.elements=e}}function db(r,e){let n=mb(e);for(const s of r.elements)n=n.filter((o=>!ir(o,s)));return{arrayValue:{values:n}}}class Ih extends $h{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function H0(r){return Ot(r.integerValue||r.doubleValue)}function mb(r){return Rg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class JC{constructor(e,n){this.field=e,this.transform=n}}function ZC(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof uu&&o instanceof uu||s instanceof cu&&o instanceof cu?Ao(s.elements,o.elements,ir):s instanceof Ih&&o instanceof Ih?ir(s.Ae,o.Ae):s instanceof lu&&o instanceof lu})(r.transform,e.transform)}class WC{constructor(e,n){this.version=e,this.transformResults=n}}class Ni{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ni}static exists(e){return new Ni(void 0,e)}static updateTime(e){return new Ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Jh{}function gb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Og(r.key,Ni.none()):new Tu(r.key,r.data,Ni.none());{const n=r.data,s=zn.empty();let o=new Yt(cn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Os(r.key,s,new ni(o.toArray()),Ni.none())}}function eI(r,e,n){r instanceof Tu?(function(o,u,f){const m=o.value.clone(),p=F0(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,e,n):r instanceof Os?(function(o,u,f){if(!fh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=F0(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(pb(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function $l(r,e,n,s){return r instanceof Tu?(function(u,f,m,p){if(!fh(u.precondition,f))return m;const y=u.value.clone(),E=Q0(u.fieldTransforms,p,f);return y.setAll(E),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,e,n,s):r instanceof Os?(function(u,f,m,p){if(!fh(u.precondition,f))return m;const y=Q0(u.fieldTransforms,p,f),E=f.data;return E.setAll(pb(u)),E.setAll(y),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,e,n,s):(function(u,f,m){return fh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(r,e,n)}function tI(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=hb(s.transform,o||null);u!=null&&(n===null&&(n=zn.empty()),n.set(s.field,u))}return n||null}function G0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ao(s,o,((u,f)=>ZC(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Tu extends Jh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Os extends Jh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function pb(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function F0(r,e,n){const s=new Map;nt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,$C(f,m,n[o]))}return s}function Q0(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,XC(u,f,e))}return s}class Og extends Jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nI extends Jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&eI(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=$l(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=$l(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=ub();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=gb(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Qe())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,((n,s)=>G0(n,s)))&&Ao(this.baseMutations,e.baseMutations,((n,s)=>G0(n,s)))}}class Mg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){nt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return GC})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Mg(e,n,s,o)}}class rI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class sI{constructor(e,n){this.count=e,this.unchangedNames=n}}var Bt,$e;function aI(r){switch(r){case ee.OK:return Se(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function yb(r){if(r===void 0)return Vr("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Bt.OK:return ee.OK;case Bt.CANCELLED:return ee.CANCELLED;case Bt.UNKNOWN:return ee.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return ee.INTERNAL;case Bt.UNAVAILABLE:return ee.UNAVAILABLE;case Bt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Bt.NOT_FOUND:return ee.NOT_FOUND;case Bt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Bt.ABORTED:return ee.ABORTED;case Bt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Bt.DATA_LOSS:return ee.DATA_LOSS;default:return Se(39323,{code:r})}}($e=Bt||(Bt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";function oI(){return new TextEncoder}const lI=new As([4294967295,4294967295],0);function K0(r){const e=oI().encode(r),n=new VE;return n.update(e),new Uint8Array(n.digest())}function Y0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new As([n,s],0),new As([o,u],0)]}class Vg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Bl(`Invalid padding: ${n}`);if(s<0)throw new Bl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Bl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Bl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=As.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(As.fromNumber(s)));return o.compare(lI)===1&&(o=new As([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=K0(e),[s,o]=Y0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Vg(u,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=K0(e),[s,o]=Y0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Zh(Re.min(),o,new At(Fe),kr(),Qe())}}class Su{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Su(s,n,Qe(),Qe(),Qe())}}class dh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class vb{constructor(e,n){this.targetId=e,this.Ce=n}}class _b{constructor(e,n,s=hn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class X0{constructor(){this.ve=0,this.Fe=$0(),this.Me=hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qe(),n=Qe(),s=Qe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Se(38017,{changeType:u})}})),new Su(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=$0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uI{constructor(e){this.Ge=e,this.ze=new Map,this.je=kr(),this.Je=th(),this.He=th(),this.Ye=new At(Fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Gm(u))if(s===0){const f=new Ee(u.path);this.et(n,f,_n.newNoDocument(f,Re.min()))}else nt(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),p=m?this.ct(m,e,f):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Rs(s).toUint8Array()}catch(p){if(p instanceof FE)return So("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Vg(f,o,u)}catch(p){return So(p instanceof Bl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&Gm(m.target)){const p=new Ee(m.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,_n.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=Qe();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new Zh(e,n,this.Ye,this.je,s);return this.je=kr(),this.Je=th(),this.He=th(),this.Ye=new At(Fe),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new X0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Yt(Fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Yt(Fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new X0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function th(){return new At(Ee.comparator)}function $0(){return new At(Ee.comparator)}const cI={asc:"ASCENDING",desc:"DESCENDING"},hI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fI={and:"AND",or:"OR"};class dI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qm(r,e){return r.useProto3Json||Fh(e)?e:{value:e}}function Nh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Eb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function mI(r,e){return Nh(r,e.toTimestamp())}function Wi(r){return nt(!!r,49232),Re.fromTimestamp((function(n){const s=xs(n);return new pt(s.seconds,s.nanos)})(r))}function kg(r,e){return Km(r,e).canonicalString()}function Km(r,e){const n=(function(o){return new St(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function bb(r){const e=St.fromString(r);return nt(xb(e),10190,{key:e.toString()}),e}function Ym(r,e){return kg(r.databaseId,e.path)}function Em(r,e){const n=bb(e);if(n.get(1)!==r.databaseId.projectId)throw new pe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new pe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ee(Sb(n))}function Tb(r,e){return kg(r.databaseId,e)}function gI(r){const e=bb(r);return e.length===4?St.emptyPath():Sb(e)}function Xm(r){return new St(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Sb(r){return nt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function J0(r,e,n){return{name:Ym(r,e),fields:n.value.mapValue.fields}}function pI(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Se(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,E){return y.useProto3Json?(nt(E===void 0||typeof E=="string",58123),hn.fromBase64String(E||"")):(nt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),hn.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(y){const E=y.code===void 0?ee.UNKNOWN:yb(y.code);return new pe(E,y.message||"")})(f);n=new _b(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Em(r,s.document.name),u=Wi(s.document.updateTime),f=s.document.createTime?Wi(s.document.createTime):Re.min(),m=new zn({mapValue:{fields:s.document.fields}}),p=_n.newFoundDocument(o,u,f,m),y=s.targetIds||[],E=s.removedTargetIds||[];n=new dh(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Em(r,s.document),u=s.readTime?Wi(s.readTime):Re.min(),f=_n.newNoDocument(o,u),m=s.removedTargetIds||[];n=new dh([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Em(r,s.document),u=s.removedTargetIds||[];n=new dh([],u,o,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new sI(o,u),m=s.targetId;n=new vb(m,f)}}return n}function yI(r,e){let n;if(e instanceof Tu)n={update:J0(r,e.key,e.value)};else if(e instanceof Og)n={delete:Ym(r,e.key)};else if(e instanceof Os)n={update:J0(r,e.key,e.data),updateMask:xI(e.fieldMask)};else{if(!(e instanceof nI))return Se(16599,{Vt:e.type});n={verify:Ym(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof lu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof uu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof cu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ih)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Se(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:mI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Se(27497)})(r,e.precondition)),n}function vI(r,e){return r&&r.length>0?(nt(e!==void 0,14353),r.map((n=>(function(o,u){let f=o.updateTime?Wi(o.updateTime):Wi(u);return f.isEqual(Re.min())&&(f=Wi(u)),new WC(f,o.transformResults||[])})(n,e)))):[]}function _I(r,e){return{documents:[Tb(r,e.path)]}}function EI(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Tb(r,o);const u=(function(y){if(y.length!==0)return wb(rr.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((E=>(function(C){return{field:fo(C.field),direction:SI(C.dir)}})(E)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Qm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function bI(r){let e=gI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){nt(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const C=Ab(T);return C instanceof rr&&tb(C)?C.getFilters():[C]})(n.where));let f=[];n.orderBy&&(f=(function(T){return T.map((C=>(function(Q){return new Ch(mo(Q.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(C)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let C;return C=typeof T=="object"?T.value:T,Fh(C)?null:C})(n.limit));let p=null;n.startAt&&(p=(function(T){const C=!!T.before,M=T.values||[];return new Rh(M,C)})(n.startAt));let y=null;return n.endAt&&(y=(function(T){const C=!T.before,M=T.values||[];return new Rh(M,C)})(n.endAt)),PC(e,o,f,u,m,"F",p,y)}function TI(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ab(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=mo(n.unaryFilter.field);return Qt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=mo(n.unaryFilter.field);return Qt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=mo(n.unaryFilter.field);return Qt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=mo(n.unaryFilter.field);return Qt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Qt.create(mo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return rr.create(n.compositeFilter.filters.map((s=>Ab(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(n.compositeFilter.op))})(r):Se(30097,{filter:r})}function SI(r){return cI[r]}function AI(r){return hI[r]}function wI(r){return fI[r]}function fo(r){return{fieldPath:r.canonicalString()}}function mo(r){return cn.fromServerFormat(r.fieldPath)}function wb(r){return r instanceof Qt?(function(n){if(n.op==="=="){if(P0(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NAN"}};if(U0(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(P0(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NAN"}};if(U0(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(n.field),op:AI(n.op),value:n.value}}})(r):r instanceof rr?(function(n){const s=n.getFilters().map((o=>wb(o)));return s.length===1?s[0]:{compositeFilter:{op:wI(n.op),filters:s}}})(r):Se(54877,{filter:r})}function xI(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function xb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Es{constructor(e,n,s,o,u=Re.min(),f=Re.min(),m=hn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class RI{constructor(e){this.yt=e}}function CI(r){const e=bI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Fm(e,e.limit,"L"):e}class II{constructor(){this.Cn=new NI}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(ws.min())}updateCollectionGroup(e,n,s){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class NI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Yt(St.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Yt(St.comparator)).toArray()}}const Z0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rb=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(Rb,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class Ro{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ro(0)}static cr(){return new Ro(-1)}}const W0="LruGarbageCollector",DI=1048576;function e1([r,e],[n,s]){const o=Fe(r,n);return o===0?Fe(e,s):o}class OI{constructor(e){this.Ir=e,this.buffer=new Yt(e1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();e1(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(W0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ko(n)?he(W0,"Ignoring IndexedDB error during garbage collection: ",n):await Vo(n)}await this.Vr(3e5)}))}}class VI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(Gh.ce);const s=new OI(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(Z0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,f,m,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(y=Date.now(),co()<=Ge.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function kI(r,e){return new VI(r,e)}class LI{constructor(){this.changes=new _a((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?W.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class UI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class PI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&$l(s.mutation,o,ni.empty(),pt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Qe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Qe()){const o=ua();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=zl();return u.forEach(((m,p)=>{f=f.insert(m,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=ua();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Qe())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let u=kr();const f=Xl(),m=(function(){return Xl()})();return n.forEach(((p,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Os)?u=u.insert(y.key,y):E!==void 0?(f.set(y.key,E.mutation.getFieldMask()),$l(E.mutation,y,E.mutation.getFieldMask(),pt.now())):f.set(y.key,ni.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,E)=>f.set(y,E))),n.forEach(((y,E)=>m.set(y,new UI(E,f.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Xl();let o=new At(((f,m)=>f-m)),u=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let E=s.get(p)||ni.empty();E=m.applyToLocalView(y,E),s.set(p,E);const T=(o.get(m.batchId)||Qe()).add(p);o=o.insert(m.batchId,T)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,E=p.value,T=ub();E.forEach((C=>{if(!u.has(C)){const M=gb(n.get(C),s.get(C));M!==null&&T.set(C,M),u=u.add(C)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,T))}return W.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return Ee.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):W.resolve(ua());let m=ru,p=u;return f.next((y=>W.forEach(y,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?W.resolve():this.remoteDocumentCache.getEntry(e,E).next((C=>{p=p.insert(E,C)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,Qe()))).next((E=>({batchId:m,changes:lb(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((s=>{let o=zl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=zl();return this.indexManager.getCollectionParents(e,u).next((m=>W.forEach(m,(p=>{const y=(function(T,C){return new Kh(C,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((E=>{E.forEach(((T,C)=>{f=f.insert(T,C)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((p,y)=>{const E=y.getKey();f.get(E)===null&&(f=f.insert(E,_n.newInvalidDocument(E)))}));let m=zl();return f.forEach(((p,y)=>{const E=u.get(p);E!==void 0&&$l(E.mutation,y,ni.empty(),pt.now()),Xh(n,y)&&(m=m.insert(p,y))})),m}))}}class jI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Wi(o.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:CI(o.bundledQuery),readTime:Wi(o.readTime)}})(n)),W.resolve()}}class zI{constructor(){this.overlays=new At(Ee.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ua();return W.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),W.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),W.resolve()}getOverlaysForCollection(e,n,s){const o=ua(),u=n.length+1,f=new Ee(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return W.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new At(((y,E)=>y-E));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let E=u.get(y.largestBatchId);E===null&&(E=ua(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=ua(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,E)=>m.set(y,E))),!(m.size()>=o)););return W.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new rI(n,s));let u=this.qr.get(n);u===void 0&&(u=Qe(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}class BI{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}class Lg{constructor(){this.Qr=new Yt(en.$r),this.Ur=new Yt(en.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new en(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new en(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Ee(new St([])),s=new en(n,e),o=new en(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ee(new St([])),s=new en(n,e),o=new en(n,e+1);let u=Qe();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new en(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class en{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ee.comparator(e.key,n.key)||Fe(e.Yr,n.Yr)}static Kr(e,n){return Fe(e.Yr,n.Yr)||Ee.comparator(e.key,n.key)}}class qI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Yt(en.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new iI(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new en(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?wg:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new en(n,0),o=new en(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);u.push(m)})),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Yt(Fe);return n.forEach((o=>{const u=new en(o,0),f=new en(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{s=s.add(m.Yr)}))})),W.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Ee.isDocumentKey(u)||(u=u.child(""));const f=new en(new Ee(u),0);let m=new Yt(Fe);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Yr)),!0)}),f),W.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){nt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return W.forEach(n.mutations,(o=>{const u=new en(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new en(n,0),o=this.Zr.firstAfterOrEqual(s);return W.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class HI{constructor(e){this.ri=e,this.docs=(function(){return new At(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return W.resolve(s?s.document.mutableCopy():_n.newInvalidDocument(n))}getEntries(e,n){let s=kr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():_n.newInvalidDocument(o))})),W.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=kr();const f=n.path,m=new Ee(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||pC(gC(E),s)<=0||(o.has(E.key)||Xh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Se(9500)}ii(e,n){return W.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new GI(this)}getSize(e){return W.resolve(this.size)}}class GI extends LI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class FI{constructor(e){this.persistence=e,this.si=new _a((n=>Cg(n)),Ig),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Lg,this.targetCount=0,this.ai=Ro.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ro(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),W.waitFor(u).next((()=>o))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return W.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),W.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),W.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return W.resolve(s)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}class Cb{constructor(e,n){this.ui={},this.overlays={},this.ci=new Gh(0),this.li=!1,this.li=!0,this.hi=new BI,this.referenceDelegate=e(this),this.Pi=new FI(this),this.indexManager=new II,this.remoteDocumentCache=(function(o){return new HI(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new RI(n),this.Ii=new jI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new qI(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){he("MemoryPersistence","Starting transaction:",e);const o=new QI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return W.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class QI extends vC{constructor(e){super(),this.currentSequenceNumber=e}}class Ug{constructor(e){this.persistence=e,this.Ri=new Lg,this.Vi=null}static mi(e){return new Ug(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),W.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(s=>{const o=Ee.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Dh{constructor(e,n){this.persistence=e,this.pi=new _a((s=>bC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=kI(this,n)}static mi(e,n){return new Dh(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return W.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?W.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,u.removeEntry(f,Re.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ch(e.data.value)),n}br(e,n,s){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return W.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Pg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Qe(),o=Qe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Pg(e,n.fromCache,s,o)}}class KI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class YI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return kw()?8:_C(En())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new KI;return this.Ss(e,n,f).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(co()<=Ge.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(co()<=Ge.DEBUG&&he("QueryEngine","Query:",ho(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(co()<=Ge.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zi(n))):W.resolve())}ys(e,n){if(q0(n))return W.resolve(null);let s=Zi(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Fm(n,null,"F"),s=Zi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=Qe(...u);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.Ds(n,m);return this.Cs(n,y,f,p.readTime)?this.ys(e,Fm(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,s,o){return q0(n)||o.isEqual(Re.min())?W.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?W.resolve(null):(co()<=Ge.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ho(n)),this.vs(e,f,n,mC(o,ru)).next((m=>m)))}))}Ds(e,n){let s=new Yt(ab(e));return n.forEach(((o,u)=>{Xh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return co()<=Ge.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",ho(n)),this.ps.getDocumentsMatchingQuery(e,n,ws.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const jg="LocalStore",XI=3e8;class $I{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new At(Fe),this.xs=new _a((u=>Cg(u)),Ig),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function JI(r,e,n,s){return new $I(r,e,n,s)}async function Ib(r,e){const n=Ne(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let p=Qe();for(const y of o){f.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:m})))}))}))}function ZI(r,e){const n=Ne(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,y,E){const T=y.batch,C=T.keys();let M=W.resolve();return C.forEach((Q=>{M=M.next((()=>E.getEntry(p,Q))).next((Y=>{const q=y.docVersions.get(Q);nt(q!==null,48541),Y.version.compareTo(q)<0&&(T.applyToRemoteDocument(Y,y),Y.isValidDocument()&&(Y.setReadTime(y.commitVersion),E.addEntry(Y)))}))})),M.next((()=>m.mutationQueue.removeMutationBatch(p,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Qe();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Nb(r){const e=Ne(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function WI(r,e){const n=Ne(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((E,T)=>{const C=o.get(T);if(!C)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,T))));let M=C.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?M=M.withResumeToken(hn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,s)),o=o.insert(T,M),(function(Y,q,ne){return Y.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=XI?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(C,M,E)&&m.push(n.Pi.updateTargetData(u,M))}));let p=kr(),y=Qe();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(eN(u,f,e.documentUpdates).next((E=>{p=E.ks,y=E.qs}))),!s.isEqual(Re.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return W.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function eN(r,e,n){let s=Qe(),o=Qe();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let f=kr();return n.forEach(((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):he(jg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)})),{ks:f,qs:o}}))}function tN(r,e){const n=Ne(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=wg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function nN(r,e){const n=Ne(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,W.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new Es(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function $m(r,e,n){const s=Ne(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!ko(f))throw f;he(jg,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function t1(r,e,n){const s=Ne(r);let o=Re.min(),u=Qe();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,y,E){const T=Ne(p),C=T.xs.get(E);return C!==void 0?W.resolve(T.Ms.get(C)):T.Pi.getTargetData(y,E)})(s,f,Zi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:Re.min(),n?u:Qe()))).next((m=>(iN(s,BC(e),m),{documents:m,Qs:u})))))}function iN(r,e,n){let s=r.Os.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class n1{constructor(){this.activeTargetIds=KC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rN{constructor(){this.Mo=new n1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new n1,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sN{Oo(e){}shutdown(){}}const i1="ConnectivityMonitor";class r1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(i1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(i1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let nh=null;function Jm(){return nh===null?nh=(function(){return 268435456+Math.round(2147483648*Math.random())})():nh++,"0x"+nh.toString(16)}const bm="RestConnection",aN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===wh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const f=Jm(),m=this.zo(e,n.toUriEncodedString());he(bm,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:y}=new URL(m),E=No(y);return this.Jo(e,m,p,s,E).then((T=>(he(bm,`Received RPC '${e}' ${f}: `,T),T)),(T=>{throw So(bm,`RPC '${e}' ${f} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(e,n,s,o,u,f){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=aN[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class lN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const yn="WebChannelConnection";class uN extends oN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=Jm();return new Promise(((m,p)=>{const y=new kE;y.setWithCredentials(!0),y.listenOnce(LE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case uh.NO_ERROR:const T=y.getResponseJson();he(yn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(T)),m(T);break;case uh.TIMEOUT:he(yn,`RPC '${e}' ${f} timed out`),p(new pe(ee.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const C=y.getStatus();if(he(yn,`RPC '${e}' ${f} failed with status:`,C,"response text:",y.getResponseText()),C>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const Q=M?.error;if(Q&&Q.status&&Q.message){const Y=(function(ne){const se=ne.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(se)>=0?se:ee.UNKNOWN})(Q.status);p(new pe(Y,Q.message))}else p(new pe(ee.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new pe(ee.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(yn,`RPC '${e}' ${f} completed.`)}}));const E=JSON.stringify(o);he(yn,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",E,s,15)}))}T_(e,n,s){const o=Jm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=jE(),m=PE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");he(yn,`Creating RPC '${e}' stream ${o}: ${E}`,p);const T=f.createWebChannel(E,p);this.I_(T);let C=!1,M=!1;const Q=new lN({Yo:q=>{M?he(yn,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(C||(he(yn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),C=!0),he(yn,`RPC '${e}' stream ${o} sending:`,q),T.send(q))},Zo:()=>T.close()}),Y=(q,ne,se)=>{q.listen(ne,(te=>{try{se(te)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return Y(T,jl.EventType.OPEN,(()=>{M||(he(yn,`RPC '${e}' stream ${o} transport opened.`),Q.o_())})),Y(T,jl.EventType.CLOSE,(()=>{M||(M=!0,he(yn,`RPC '${e}' stream ${o} transport closed`),Q.a_(),this.E_(T))})),Y(T,jl.EventType.ERROR,(q=>{M||(M=!0,So(yn,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),Q.a_(new pe(ee.UNAVAILABLE,"The operation could not be completed")))})),Y(T,jl.EventType.MESSAGE,(q=>{if(!M){const ne=q.data[0];nt(!!ne,16349);const se=ne,te=se?.error||se[0]?.error;if(te){he(yn,`RPC '${e}' stream ${o} received error:`,te);const ue=te.status;let fe=(function(w){const I=Bt[w];if(I!==void 0)return yb(I)})(ue),le=te.message;fe===void 0&&(fe=ee.INTERNAL,le="Unknown error status: "+ue+" with message "+te.message),M=!0,Q.a_(new pe(fe,le)),T.close()}else he(yn,`RPC '${e}' stream ${o} received:`,ne),Q.u_(ne)}})),Y(m,UE.STAT_EVENT,(q=>{q.stat===jm.PROXY?he(yn,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===jm.NOPROXY&&he(yn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Q.__()}),0),Q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Tm(){return typeof document<"u"?document:null}function Wh(r){return new dI(r,!0)}class Db{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const s1="PersistentStream";class Ob{constructor(e,n,s,o,u,f,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Db(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(Vr(n.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new pe(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(s1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(he(s1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cN extends Ob{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=pI(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Re.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Re.min():f.readTime?Wi(f.readTime):Re.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Xm(this.serializer),n.addTarget=(function(u,f){let m;const p=f.target;if(m=Gm(p)?{documents:_I(u,p)}:{query:EI(u,p).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=Eb(u,f.resumeToken);const y=Qm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(Re.min())>0){m.readTime=Nh(u,f.snapshotVersion.toTimestamp());const y=Qm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=TI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Xm(this.serializer),n.removeTarget=e,this.q_(n)}}class hN extends Ob{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=vI(e.writeResults,e.commitTime),s=Wi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Xm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>yI(this.serializer,s)))};this.q_(n)}}class fN{}class dN extends fN{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Km(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(ee.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,Km(n,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new pe(ee.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class mN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vr(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ya="RemoteStore";class gN{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{Ea(this)&&(he(ya,"Restarting streams for network reachability change."),await(async function(p){const y=Ne(p);y.Ea.add(4),await Au(y),y.Ra.set("Unknown"),y.Ea.delete(4),await ef(y)})(this))}))})),this.Ra=new mN(s,o)}}async function ef(r){if(Ea(r))for(const e of r.da)await e(!0)}async function Au(r){for(const e of r.da)await e(!1)}function Mb(r,e){const n=Ne(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Hg(n)?qg(n):Lo(n).O_()&&Bg(n,e))}function zg(r,e){const n=Ne(r),s=Lo(n);n.Ia.delete(e),s.O_()&&Vb(n,e),n.Ia.size===0&&(s.O_()?s.L_():Ea(n)&&n.Ra.set("Unknown"))}function Bg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lo(r).Y_(e)}function Vb(r,e){r.Va.Ue(e),Lo(r).Z_(e)}function qg(r){r.Va=new uI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Lo(r).start(),r.Ra.ua()}function Hg(r){return Ea(r)&&!Lo(r).x_()&&r.Ia.size>0}function Ea(r){return Ne(r).Ea.size===0}function kb(r){r.Va=void 0}async function pN(r){r.Ra.set("Online")}async function yN(r){r.Ia.forEach(((e,n)=>{Bg(r,e)}))}async function vN(r,e){kb(r),Hg(r)?(r.Ra.ha(e),qg(r)):r.Ra.set("Unknown")}async function _N(r,e,n){if(r.Ra.set("Online"),e instanceof _b&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){he(ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Oh(r,s)}else if(e instanceof dh?r.Va.Ze(e):e instanceof vb?r.Va.st(e):r.Va.tt(e),!n.isEqual(Re.min()))try{const s=await Nb(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ia.get(y);E&&u.Ia.set(y,E.withResumeToken(p.resumeToken,f))}})),m.targetMismatches.forEach(((p,y)=>{const E=u.Ia.get(p);if(!E)return;u.Ia.set(p,E.withResumeToken(hn.EMPTY_BYTE_STRING,E.snapshotVersion)),Vb(u,p);const T=new Es(E.target,p,y,E.sequenceNumber);Bg(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){he(ya,"Failed to raise snapshot:",s),await Oh(r,s)}}async function Oh(r,e,n){if(!ko(e))throw e;r.Ea.add(1),await Au(r),r.Ra.set("Offline"),n||(n=()=>Nb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{he(ya,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await ef(r)}))}function Lb(r,e){return e().catch((n=>Oh(r,n,e)))}async function tf(r){const e=Ne(r),n=Is(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wg;for(;EN(e);)try{const o=await tN(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,bN(e,o)}catch(o){await Oh(e,o)}Ub(e)&&Pb(e)}function EN(r){return Ea(r)&&r.Ta.length<10}function bN(r,e){r.Ta.push(e);const n=Is(r);n.O_()&&n.X_&&n.ea(e.mutations)}function Ub(r){return Ea(r)&&!Is(r).x_()&&r.Ta.length>0}function Pb(r){Is(r).start()}async function TN(r){Is(r).ra()}async function SN(r){const e=Is(r);for(const n of r.Ta)e.ea(n.mutations)}async function AN(r,e,n){const s=r.Ta.shift(),o=Mg.from(s,e,n);await Lb(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await tf(r)}async function wN(r,e){e&&Is(r).X_&&await(async function(s,o){if((function(f){return aI(f)&&f!==ee.ABORTED})(o.code)){const u=s.Ta.shift();Is(s).B_(),await Lb(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await tf(s)}})(r,e),Ub(r)&&Pb(r)}async function a1(r,e){const n=Ne(r);n.asyncQueue.verifyOperationInProgress(),he(ya,"RemoteStore received new credentials");const s=Ea(n);n.Ea.add(3),await Au(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ef(n)}async function xN(r,e){const n=Ne(r);e?(n.Ea.delete(2),await ef(n)):e||(n.Ea.add(2),await Au(n),n.Ra.set("Unknown"))}function Lo(r){return r.ma||(r.ma=(function(n,s,o){const u=Ne(n);return u.sa(),new cN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:pN.bind(null,r),t_:yN.bind(null,r),r_:vN.bind(null,r),H_:_N.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Hg(r)?qg(r):r.Ra.set("Unknown")):(await r.ma.stop(),kb(r))}))),r.ma}function Is(r){return r.fa||(r.fa=(function(n,s,o){const u=Ne(n);return u.sa(),new hN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:TN.bind(null,r),r_:wN.bind(null,r),ta:SN.bind(null,r),na:AN.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await tf(r)):(await r.fa.stop(),r.Ta.length>0&&(he(ya,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Gg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ha,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new Gg(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fg(r,e){if(Vr("AsyncQueue",`${e}: ${r}`),ko(r))return new pe(ee.UNAVAILABLE,`${e}: ${r}`);throw r}class vo{static emptySet(e){return new vo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ee.comparator(n.key,s.key):(n,s)=>Ee.comparator(n.key,s.key),this.keyedMap=zl(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new vo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class o1{constructor(){this.ga=new At(Ee.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Co{constructor(e,n,s,o,u,f,m,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Co(e,n,vo.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class RN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class CN{constructor(){this.queries=l1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ne(n),u=o.queries;o.queries=l1(),u.forEach(((f,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new pe(ee.ABORTED,"Firestore shutting down"))}}function l1(){return new _a((r=>sb(r)),Yh)}async function IN(r,e){const n=Ne(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new RN,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Fg(f,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Qg(n)}async function NN(r,e){const n=Ne(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function DN(r,e){const n=Ne(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&Qg(n)}function ON(r,e,n){const s=Ne(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Qg(r){r.Ca.forEach((e=>{e.next()}))}var Zm,u1;(u1=Zm||(Zm={})).Ma="default",u1.Cache="cache";class MN{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Co(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zm.Cache}}class jb{constructor(e){this.key=e}}class zb{constructor(e){this.key=e}}class VN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qe(),this.mutatedKeys=Qe(),this.eu=ab(e),this.tu=new vo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new o1,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const C=o.get(E),M=Xh(this.query,T)?T:null,Q=!!C&&this.mutatedKeys.has(C.key),Y=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let q=!1;C&&M?C.data.isEqual(M.data)?Q!==Y&&(s.track({type:3,doc:M}),q=!0):this.su(C,M)||(s.track({type:2,doc:M}),q=!0,(p&&this.eu(M,p)>0||y&&this.eu(M,y)<0)&&(m=!0)):!C&&M?(s.track({type:0,doc:M}),q=!0):C&&!M&&(s.track({type:1,doc:C}),q=!0,(p||y)&&(m=!0)),q&&(M?(f=f.add(M),u=Y?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((E,T)=>(function(M,Q){const Y=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:q})}};return Y(M)-Y(Q)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,f.length!==0||y?{snapshot:new Co(this.query,e.tu,u,f,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new o1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Qe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new zb(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new jb(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Qe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Co.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kg="SyncEngine";class kN{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class LN{constructor(e){this.key=e,this.hu=!1}}class UN{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new _a((m=>sb(m)),Yh),this.Iu=new Map,this.Eu=new Set,this.du=new At(Ee.comparator),this.Au=new Map,this.Ru=new Lg,this.Vu={},this.mu=new Map,this.fu=Ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PN(r,e,n=!0){const s=Qb(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await Bb(s,e,n,!0),o}async function jN(r,e){const n=Qb(r);await Bb(n,e,!0,!1)}async function Bb(r,e,n,s){const o=await nN(r.localStore,Zi(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await zN(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&Mb(r.remoteStore,o),m}async function zN(r,e,n,s,o){r.pu=(T,C,M)=>(async function(Y,q,ne,se){let te=q.view.ru(ne);te.Cs&&(te=await t1(Y.localStore,q.query,!1).then((({documents:R})=>q.view.ru(R,te))));const ue=se&&se.targetChanges.get(q.targetId),fe=se&&se.targetMismatches.get(q.targetId)!=null,le=q.view.applyChanges(te,Y.isPrimaryClient,ue,fe);return h1(Y,q.targetId,le.au),le.snapshot})(r,T,C,M);const u=await t1(r.localStore,e,!0),f=new VN(e,u.Qs),m=f.ru(u.documents),p=Su.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=f.applyChanges(m,r.isPrimaryClient,p);h1(r,n,y.au);const E=new kN(e,n,f);return r.Tu.set(e,E),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function BN(r,e,n){const s=Ne(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!Yh(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await $m(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&zg(s.remoteStore,o.targetId),Wm(s,o.targetId)})).catch(Vo)):(Wm(s,o.targetId),await $m(s.localStore,o.targetId,!0))}async function qN(r,e){const n=Ne(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),zg(n.remoteStore,s.targetId))}async function HN(r,e,n){const s=$N(r);try{const o=await(function(f,m){const p=Ne(f),y=pt.now(),E=m.reduce(((M,Q)=>M.add(Q.key)),Qe());let T,C;return p.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let Q=kr(),Y=Qe();return p.Ns.getEntries(M,E).next((q=>{Q=q,Q.forEach(((ne,se)=>{se.isValidDocument()||(Y=Y.add(ne))}))})).next((()=>p.localDocuments.getOverlayedDocuments(M,Q))).next((q=>{T=q;const ne=[];for(const se of m){const te=tI(se,T.get(se.key).overlayedDocument);te!=null&&ne.push(new Os(se.key,te,ZE(te.value.mapValue),Ni.exists(!0)))}return p.mutationQueue.addMutationBatch(M,y,ne,m)})).next((q=>{C=q;const ne=q.applyToLocalDocumentSet(T,Y);return p.documentOverlayCache.saveOverlays(M,q.batchId,ne)}))})).then((()=>({batchId:C.batchId,changes:lb(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,p){let y=f.Vu[f.currentUser.toKey()];y||(y=new At(Fe)),y=y.insert(m,p),f.Vu[f.currentUser.toKey()]=y})(s,o.batchId,n),await wu(s,o.changes),await tf(s.remoteStore)}catch(o){const u=Fg(o,"Failed to persist write");n.reject(u)}}async function qb(r,e){const n=Ne(r);try{const s=await WI(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?nt(f.hu,14607):o.removedDocuments.size>0&&(nt(f.hu,42227),f.hu=!1))})),await wu(n,s,e)}catch(s){await Vo(s)}}function c1(r,e,n){const s=Ne(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const p=Ne(f);p.onlineState=m;let y=!1;p.queries.forEach(((E,T)=>{for(const C of T.Sa)C.va(m)&&(y=!0)})),y&&Qg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function GN(r,e,n){const s=Ne(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new At(Ee.comparator);f=f.insert(u,_n.newNoDocument(u,Re.min()));const m=Qe().add(u),p=new Zh(Re.min(),new Map,new At(Fe),f,m);await qb(s,p),s.du=s.du.remove(u),s.Au.delete(e),Yg(s)}else await $m(s.localStore,e,!1).then((()=>Wm(s,e,n))).catch(Vo)}async function FN(r,e){const n=Ne(r),s=e.batch.batchId;try{const o=await ZI(n.localStore,e);Gb(n,s,null),Hb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await wu(n,o)}catch(o){await Vo(o)}}async function QN(r,e,n){const s=Ne(r);try{const o=await(function(f,m){const p=Ne(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return p.mutationQueue.lookupMutationBatch(y,m).next((T=>(nt(T!==null,37113),E=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>p.localDocuments.getDocuments(y,E)))}))})(s.localStore,e);Gb(s,e,n),Hb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await wu(s,o)}catch(o){await Vo(o)}}function Hb(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function Gb(r,e,n){const s=Ne(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Wm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||Fb(r,s)}))}function Fb(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(zg(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Yg(r))}function h1(r,e,n){for(const s of n)s instanceof jb?(r.Ru.addReference(s.key,e),KN(r,s)):s instanceof zb?(he(Kg,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||Fb(r,s.key)):Se(19791,{wu:s})}function KN(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(he(Kg,"New document in limbo: "+n),r.Eu.add(s),Yg(r))}function Yg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Ee(St.fromString(e)),s=r.fu.next();r.Au.set(s,new LN(n)),r.du=r.du.insert(n,s),Mb(r.remoteStore,new Es(Zi(Ng(n.path)),s,"TargetPurposeLimboResolution",Gh.ce))}}async function wu(r,e,n){const s=Ne(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{f.push(s.pu(p,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const E=y?!y.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Pg.As(p.targetId,y);u.push(E)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(p,y){const E=Ne(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>W.forEach(y,(C=>W.forEach(C.Es,(M=>E.persistence.referenceDelegate.addReference(T,C.targetId,M))).next((()=>W.forEach(C.ds,(M=>E.persistence.referenceDelegate.removeReference(T,C.targetId,M)))))))))}catch(T){if(!ko(T))throw T;he(jg,"Failed to update sequence numbers: "+T)}for(const T of y){const C=T.targetId;if(!T.fromCache){const M=E.Ms.get(C),Q=M.snapshotVersion,Y=M.withLastLimboFreeSnapshotVersion(Q);E.Ms=E.Ms.insert(C,Y)}}})(s.localStore,u))}async function YN(r,e){const n=Ne(r);if(!n.currentUser.isEqual(e)){he(Kg,"User change. New user:",e.toKey());const s=await Ib(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new pe(ee.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await wu(n,s.Ls)}}function XN(r,e){const n=Ne(r),s=n.Au.get(e);if(s&&s.hu)return Qe().add(s.key);{let o=Qe();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function Qb(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=qb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GN.bind(null,e),e.Pu.H_=DN.bind(null,e.eventManager),e.Pu.yu=ON.bind(null,e.eventManager),e}function $N(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QN.bind(null,e),e}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return JI(this.persistence,new YI,e.initialUser,this.serializer)}Cu(e){return new Cb(Ug.mi,this.serializer)}Du(e){return new rN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class JN extends Mh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){nt(this.persistence.referenceDelegate instanceof Dh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new MI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new Cb((s=>Dh.mi(s,n)),this.serializer)}}class eg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>c1(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=YN.bind(null,this.syncEngine),await xN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new CN})()}createDatastore(e){const n=Wh(e.databaseInfo.databaseId),s=(function(u){return new uN(u)})(e.databaseInfo);return(function(u,f,m,p){return new dN(u,f,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,m){return new gN(s,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>c1(this.syncEngine,n,0)),(function(){return r1.v()?new r1:new sN})())}createSyncEngine(e,n){return(function(o,u,f,m,p,y,E){const T=new UN(o,u,f,m,p,y);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ne(n);he(ya,"RemoteStore shutting down."),s.Ea.add(5),await Au(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}eg.provider={build:()=>new eg};class ZN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ns="FirestoreClient";class WN{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=vn.UNAUTHENTICATED,this.clientId=Sg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{he(Ns,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(he(Ns,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ha;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Fg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Sm(r,e){r.asyncQueue.verifyOperationInProgress(),he(Ns,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Ib(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function f1(r,e){r.asyncQueue.verifyOperationInProgress();const n=await eD(r);he(Ns,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>a1(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>a1(e.remoteStore,o))),r._onlineComponents=e}async function eD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he(Ns,"Using user provided OfflineComponentProvider");try{await Sm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;So("Error using user provided cache. Falling back to memory cache: "+n),await Sm(r,new Mh)}}else he(Ns,"Using default OfflineComponentProvider"),await Sm(r,new JN(void 0));return r._offlineComponents}async function Kb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he(Ns,"Using user provided OnlineComponentProvider"),await f1(r,r._uninitializedComponentsProvider._online)):(he(Ns,"Using default OnlineComponentProvider"),await f1(r,new eg))),r._onlineComponents}function tD(r){return Kb(r).then((e=>e.syncEngine))}async function d1(r){const e=await Kb(r),n=e.eventManager;return n.onListen=PN.bind(null,e.syncEngine),n.onUnlisten=BN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qN.bind(null,e.syncEngine),n}function Yb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const m1=new Map;const Xb="firestore.googleapis.com",g1=!0;class p1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Xb,this.ssl=g1}else this.host=e.host,this.ssl=e.ssl??g1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DI)throw new pe(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yb(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xg{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new nC;switch(s.type){case"firstParty":return new aC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=m1.get(n);s&&(he("ComponentProvider","Removing Datastore"),m1.delete(n),s.terminate())})(this),Promise.resolve()}}function nD(r,e,n,s={}){r=Dr(r,Xg);const o=No(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&($1(`https://${m}`),J1("Firestore",!0)),u.host!==Xb&&u.host!==m&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!da(p,f)&&(r._setSettings(p),s.mockUserToken)){let y,E;if(typeof s.mockUserToken=="string")y=s.mockUserToken,E=vn.MOCK_USER;else{y=xw(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new pe(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new vn(T)}r._authCredentials=new iC(new BE(y,E))}}class nf{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new nf(this.firestore,e,this._query)}}class Kt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(bu(n,Kt._jsonSchema))return new Kt(e,s||null,new Ee(St.fromString(n.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:qt("string",Kt._jsonSchemaVersion),referencePath:qt("string")};class hu extends nf{constructor(e,n,s){super(e,n,Ng(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new Ee(e))}withConverter(e){return new hu(this.firestore,e,this._path)}}function iD(r,e,...n){if(r=bn(r),arguments.length===1&&(e=Sg.newId()),fC("doc","path",e),r instanceof Xg){const s=St.fromString(e,...n);return I0(s),new Kt(r,null,new Ee(s))}{if(!(r instanceof Kt||r instanceof hu))throw new pe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(St.fromString(e,...n));return I0(s),new Kt(r.firestore,r instanceof hu?r.converter:null,new Ee(s))}}const y1="AsyncQueue";class v1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Db(this,"async_queue_retry"),this._c=()=>{const s=Tm();s&&he(y1,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Tm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Tm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ha;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ko(e))throw e;he(y1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Vr("INTERNAL UNHANDLED ERROR: ",_1(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Gg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:_1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function _1(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function E1(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class Io extends Xg{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new v1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new v1(e),this._firestoreClient=void 0,await e}}}function rD(r,e){const n=typeof r=="object"?r:tE(),s=typeof r=="string"?r:wh,o=hg(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=Aw("firestore");u&&nD(o,...u)}return o}function $b(r){if(r._terminated)throw new pe(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||sD(r),r._firestoreClient}function sD(r){const e=r._freezeSettings(),n=(function(o,u,f,m){return new AC(o,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Yb(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new WN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class vi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vi(hn.fromBase64String(e))}catch(n){throw new pe(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vi(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bu(e,vi._jsonSchema))return vi.fromBase64String(e.bytes)}}vi._jsonSchemaVersion="firestore/bytes/1.0",vi._jsonSchema={type:qt("string",vi._jsonSchemaVersion),bytes:qt("string")};class rf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sf{constructor(e){this._methodName=e}}class er{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:er._jsonSchemaVersion}}static fromJSON(e){if(bu(e,er._jsonSchema))return new er(e.latitude,e.longitude)}}er._jsonSchemaVersion="firestore/geoPoint/1.0",er._jsonSchema={type:qt("string",er._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};class tr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bu(e,tr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new tr(e.vectorValues);throw new pe(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}tr._jsonSchemaVersion="firestore/vectorValue/1.0",tr._jsonSchema={type:qt("string",tr._jsonSchemaVersion),vectorValues:qt("object")};const aD=/^__.*__$/;class oD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tu(e,this.data,n,this.fieldTransforms)}}class Jb{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Zb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:r})}}class $g{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $g({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Zb(this.Ac)&&aD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class lD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Wh(e)}Cc(e,n,s,o=!1){return new $g({Ac:e,methodName:n,Dc:s,path:cn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wb(r){const e=r._freezeSettings(),n=Wh(r._databaseId);return new lD(r._databaseId,!!e.ignoreUndefinedProperties,n)}function uD(r,e,n,s,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);Zg("Data must be an object, but it was:",f,s);const m=eT(s,f);let p,y;if(u.merge)p=new ni(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const C=tg(e,T,n);if(!f.contains(C))throw new pe(ee.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);nT(E,C)||E.push(C)}p=new ni(E),y=f.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=f.fieldTransforms;return new oD(new zn(m),p,y)}class af extends sf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof af}}class Jg extends sf{_toFieldTransform(e){return new JC(e.path,new lu)}isEqual(e){return e instanceof Jg}}function cD(r,e,n,s){const o=r.Cc(1,e,n);Zg("Data must be an object, but it was:",o,s);const u=[],f=zn.empty();Ds(s,((p,y)=>{const E=Wg(e,p,n);y=bn(y);const T=o.yc(E);if(y instanceof af)u.push(E);else{const C=of(y,T);C!=null&&(u.push(E),f.set(E,C))}}));const m=new ni(u);return new Jb(f,m,o.fieldTransforms)}function hD(r,e,n,s,o,u){const f=r.Cc(1,e,n),m=[tg(e,s,n)],p=[o];if(u.length%2!=0)throw new pe(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<u.length;C+=2)m.push(tg(e,u[C])),p.push(u[C+1]);const y=[],E=zn.empty();for(let C=m.length-1;C>=0;--C)if(!nT(y,m[C])){const M=m[C];let Q=p[C];Q=bn(Q);const Y=f.yc(M);if(Q instanceof af)y.push(M);else{const q=of(Q,Y);q!=null&&(y.push(M),E.set(M,q))}}const T=new ni(y);return new Jb(E,T,f.fieldTransforms)}function of(r,e){if(tT(r=bn(r)))return Zg("Unsupported field value:",e,r),eT(r,e);if(r instanceof sf)return(function(s,o){if(!Zb(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let p=of(m,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=bn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return YC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=pt.fromDate(s);return{timestampValue:Nh(o.serializer,u)}}if(s instanceof pt){const u=new pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Nh(o.serializer,u)}}if(s instanceof er)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof vi)return{bytesValue:Eb(o.serializer,s._byteString)};if(s instanceof Kt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:kg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof tr)return(function(f,m){return{mapValue:{fields:{[$E]:{stringValue:JE},[xh]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return Dg(m.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Ag(s)}`)})(r,e)}function eT(r,e){const n={};return GE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(r,((s,o)=>{const u=of(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function tT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof pt||r instanceof er||r instanceof vi||r instanceof Kt||r instanceof sf||r instanceof tr)}function Zg(r,e,n){if(!tT(n)||!qE(n)){const s=Ag(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function tg(r,e,n){if((e=bn(e))instanceof rf)return e._internalPath;if(typeof e=="string")return Wg(r,e);throw Vh("Field path arguments must be of type string or ",r,!1,void 0,n)}const fD=new RegExp("[~\\*/\\[\\]]");function Wg(r,e,n){if(e.search(fD)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new rf(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Vh(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new pe(ee.INVALID_ARGUMENT,m+r+p)}function nT(r,e){return r.some((n=>n.isEqual(e)))}class iT{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dD extends iT{data(){return super.data()}}function rT(r,e){return typeof e=="string"?Wg(r,e):e instanceof rf?e._internalPath:e._delegate._internalPath}function mD(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pe(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gD{convertValue(e,n="none"){switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ds(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[xh].arrayValue?.values?.map((s=>Ot(s.doubleValue)));return new tr(n)}convertGeoPoint(e){return new er(Ot(e.latitude),Ot(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Qh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(su(e));default:return null}}convertTimestamp(e){const n=xs(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=St.fromString(e);nt(xb(s),9688,{name:e});const o=new au(s.get(1),s.get(3)),u=new Ee(s.popFirst(5));return o.isEqual(n)||Vr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}function pD(r,e,n){let s;return s=r?r.toFirestore(e):e,s}class ql{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fa extends iT{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(rT("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fa._jsonSchemaVersion="firestore/documentSnapshot/1.0",fa._jsonSchema={type:qt("string",fa._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class mh extends fa{data(e={}){return super.data(e)}}class _o{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ql(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new mh(this._firestore,this._userDataWriter,s.key,s,new ql(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const p=new mh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ql(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new mh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ql(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:yD(m.type),doc:p,oldIndex:y,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}_o._jsonSchemaVersion="firestore/querySnapshot/1.0",_o._jsonSchema={type:qt("string",_o._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};class sT extends gD{constructor(e){super(),this.firestore=e}convertBytes(e){return new vi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function vD(r,e,n){r=Dr(r,Kt);const s=Dr(r.firestore,Io),o=pD(r.converter,e);return ep(s,[uD(Wb(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Ni.none())])}function xu(r,e,n,...s){r=Dr(r,Kt);const o=Dr(r.firestore,Io),u=Wb(o);let f;return f=typeof(e=bn(e))=="string"||e instanceof rf?hD(u,"updateDoc",r._key,e,n,s):cD(u,"updateDoc",r._key,e),ep(o,[f.toMutation(r._key,Ni.exists(!0))])}function _D(r){return ep(Dr(r.firestore,Io),[new Og(r._key,Ni.none())])}function ED(r,...e){r=bn(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||E1(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(E1(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,f,m;if(r instanceof Kt)f=Dr(r.firestore,Io),m=Ng(r._key.path),u={next:p=>{e[s]&&e[s](bD(f,r,p))},error:e[s+1],complete:e[s+2]};else{const p=Dr(r,nf);f=Dr(p.firestore,Io),m=p._query;const y=new sT(f);u={next:E=>{e[s]&&e[s](new _o(f,y,p,E))},error:e[s+1],complete:e[s+2]},mD(r._query)}return(function(y,E,T,C){const M=new ZN(C),Q=new MN(E,M,T);return y.asyncQueue.enqueueAndForget((async()=>IN(await d1(y),Q))),()=>{M.Nu(),y.asyncQueue.enqueueAndForget((async()=>NN(await d1(y),Q)))}})($b(f),m,o,u)}function ep(r,e){return(function(s,o){const u=new ha;return s.asyncQueue.enqueueAndForget((async()=>HN(await tD(s),o,u))),u.promise})($b(r),e)}function bD(r,e,n){const s=n.docs.get(e._key),o=new sT(r);return new fa(r,o,e._key,s,new ql(n.hasPendingWrites,n.fromCache),e.converter)}function va(){return new Jg("serverTimestamp")}(function(e,n=!0){(function(o){Mo=o})(Do),bo(new ma("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new Io(new rC(s.getProvider("auth-internal")),new oC(f,s.getProvider("app-check-internal")),(function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new pe(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(y.options.projectId,E)})(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Ss(w0,x0,e),Ss(w0,x0,"esm2020")})();const TD={apiKey:"AIzaSyBLRqnLMkKv3yTqdmWDwnQh_wQqjDGxcp0",authDomain:"multiverse-diary.firebaseapp.com",projectId:"multiverse-diary",storageBucket:"multiverse-diary.firebasestorage.app",messagingSenderId:"944699167684",appId:"1:944699167684:web:6a88971587af8895180a91"},aT=eE(TD),tp=ZR(aT),SD=rD(aT),AD=new Cr,wD=async()=>{try{return{user:(await oR(tp,AD)).user,error:null}}catch(r){return console.error("Google sign-in error:",r),{user:null,error:r.message}}},xD=async()=>{try{return await Bx(tp),{error:null}}catch(r){return console.error("Sign-out error:",r),{error:r.message}}},RD=r=>zx(tp,r),ba=r=>iD(SD,"users",r),CD=(r,e)=>{const n=ba(r);return ED(n,async s=>{if(s.exists())e({data:s.data(),error:null});else{console.log("Creating initial user data for:",r);const o={entries:[],customPersonas:[],selectedPersonas:["teacher","friend"],hiddenPersonaIds:[],personaOrder:[],createdAt:va(),updatedAt:va()};try{await vD(n,o)}catch(u){console.error("Error creating initial user data:",u),e({data:null,error:u.message})}}},s=>{console.error("Error subscribing to user data:",s),e({data:null,error:s.message})})},ID=async(r,e)=>{try{const n=ba(r);return await xu(n,{entries:e,updatedAt:va()}),{error:null}}catch(n){return console.error("Error updating entries:",n),{error:n.message}}},b1=async(r,e)=>{try{const n=ba(r);return await xu(n,{customPersonas:e,updatedAt:va()}),{error:null}}catch(n){return console.error("Error updating custom personas:",n),{error:n.message}}},Am=async(r,e)=>{try{const n=ba(r);return await xu(n,{selectedPersonas:e,updatedAt:va()}),{error:null}}catch(n){return console.error("Error updating selected personas:",n),{error:n.message}}},ND=async(r,e)=>{try{const n=ba(r);return await xu(n,{hiddenPersonaIds:e,updatedAt:va()}),{error:null}}catch(n){return console.error("Error updating hidden persona IDs:",n),{error:n.message}}},wm=async(r,e)=>{try{const n=ba(r);return await xu(n,{personaOrder:e,updatedAt:va()}),{error:null}}catch(n){return console.error("Error updating persona order:",n),{error:n.message}}},DD=r=>{try{return localStorage.setItem("gemini_api_key",r),{error:null}}catch(e){return console.error("Error saving API key:",e),{error:e.message}}},OD=()=>{try{return localStorage.getItem("gemini_api_key")||""}catch(r){return console.error("Error getting API key:",r),""}},MD=()=>{try{localStorage.removeItem("gemini_api_key")}catch(r){console.error("Error removing API key:",r)}},VD=async r=>{try{const e=ba(r);return await _D(e),{error:null}}catch(e){return console.error("Error deleting user data:",e),{error:e.message}}},kD=({icon:r,className:e})=>S.jsx("div",{className:`persona-avatar ${e}`,children:r}),LD=({persona:r,text:e,index:n})=>S.jsxs("div",{className:"flex gap-2 sm:gap-3 mb-3 sm:mb-4 animate-fadeIn",style:{animationDelay:`${n*.1}s`},children:[S.jsx(kD,{icon:r.icon,className:r.color}),S.jsxs("div",{className:"comment-bubble p-3 sm:p-4 flex-1",children:[S.jsxs("div",{className:"flex justify-between items-center mb-1.5 sm:mb-2",children:[S.jsx("span",{className:"font-semibold text-xs sm:text-sm text-gray-800",children:r.name}),S.jsx("span",{className:"text-[10px] sm:text-xs text-gray-400 bg-gray-50 px-1.5 sm:px-2 py-0.5 rounded-full",children:r.role})]}),S.jsx("p",{className:"text-gray-700 text-xs sm:text-sm leading-relaxed",children:e})]})]}),UD=({analysis:r,onClose:e})=>S.jsxs("div",{className:"analysis-section p-5 animate-scaleIn",children:[S.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[S.jsxs("div",{className:"bg-white/70 p-4 rounded-xl border border-white/50",children:[S.jsx("div",{className:"text-xs text-purple-600 font-semibold mb-1.5 uppercase tracking-wide",children:""}),S.jsx("div",{className:"text-xl font-bold text-gray-800",children:r.emotional_weather})]}),S.jsxs("div",{className:"bg-white/70 p-4 rounded-xl border border-white/50",children:[S.jsx("div",{className:"text-xs text-purple-600 font-semibold mb-1.5 uppercase tracking-wide",children:""}),S.jsxs("div",{className:"flex items-end gap-1",children:[S.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:r.mood_score}),S.jsx("span",{className:"text-sm text-gray-400 mb-1",children:"/100"})]})]})]}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{className:"bg-white/70 p-4 rounded-xl border border-white/50",children:[S.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:" "}),S.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:r.hidden_emotions})]}),S.jsxs("div",{className:"bg-white/70 p-4 rounded-xl border border-white/50",children:[S.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:" "}),S.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:r.lucky_action})]}),S.jsxs("div",{className:"bg-gradient-to-r from-indigo-100/80 to-purple-100/80 p-4 rounded-xl",children:[S.jsx("div",{className:"text-xs font-semibold text-indigo-600 uppercase tracking-wide mb-2",children:" "}),S.jsxs("p",{className:"text-sm text-indigo-800 italic font-medium leading-relaxed",children:['"',r.deep_advice,'"']})]})]}),S.jsx("div",{className:"flex justify-end mt-4",children:S.jsxs("button",{onClick:e,className:"text-xs text-gray-400 hover:text-red-500 flex items-center gap-1 px-3 py-1.5 rounded-lg hover:bg-red-50 transition-colors",children:[S.jsx(jh,{size:14}),""]})})]}),PD=({selected:r,togglePersona:e,personas:n,onShowAddModal:s})=>S.jsxs("div",{className:"mb-6 sm:mb-8",children:[S.jsxs("h3",{className:"text-sm sm:text-base font-semibold text-gray-700 mb-3 sm:mb-4 flex items-center gap-2",children:[S.jsx(YA,{size:16,className:"text-indigo-500 sm:w-[18px] sm:h-[18px]"}),""]}),S.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[n.map(o=>{const u=r.includes(o.id);return S.jsxs("button",{onClick:()=>e(o.id),className:`persona-btn ${u?"persona-btn-active":"persona-btn-inactive"}`,children:[S.jsx("span",{className:"text-sm sm:text-base",children:o.icon}),S.jsx("span",{children:o.role})]},o.id)}),S.jsxs("button",{onClick:s,className:"persona-btn persona-btn-inactive !border-dashed !border-2",title:"",children:[S.jsx(B1,{size:14,className:"sm:w-[16px] sm:h-[16px]"}),S.jsx("span",{children:""})]})]})]}),jD=({onAdd:r,onCancel:e})=>{const[n,s]=j.useState(""),[o,u]=j.useState(""),[f,m]=j.useState(""),[p,y]=j.useState(X_[0].value),[E,T]=j.useState(""),C=()=>{if(!n.trim()||!o.trim()||!E.trim()){alert("");return}const M={id:`custom_${Date.now()}`,name:n.trim().slice(0,20),role:o.trim().slice(0,10),icon:f,color:p,desc:E.trim().slice(0,200),isDefault:!1};r(M)};return S.jsx("div",{className:"modal-overlay fixed inset-0 flex justify-center z-[100] p-4 pt-24 animate-fadeIn overflow-y-auto",children:S.jsxs("div",{className:"modal-content p-6 sm:p-8 mb-8 h-fit",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-3",children:[S.jsx("span",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-orange-500 rounded-xl flex items-center justify-center",children:S.jsx(K_,{className:"text-white",size:20})}),""]}),S.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 p-2 rounded-xl hover:bg-gray-100 transition-colors",children:S.jsx(H1,{size:20})})]}),S.jsxs("div",{className:"mb-5",children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),S.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 rounded-xl max-h-32 overflow-y-auto",children:cw.map(M=>S.jsx("button",{onClick:()=>m(M),className:`w-10 h-10 text-xl rounded-lg transition-all ${f===M?"bg-indigo-500 scale-110 shadow-lg":"bg-white hover:bg-gray-100"}`,children:M},M))})]}),S.jsxs("div",{className:"mb-5",children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),S.jsx("div",{className:"flex flex-wrap gap-2",children:X_.map(M=>S.jsx("button",{onClick:()=>y(M.value),className:`w-10 h-10 rounded-lg transition-all ${M.value} ${p===M.value?"ring-2 ring-indigo-500 ring-offset-2 scale-110":""}`,title:M.label,children:f},M.id))})]}),S.jsxs("div",{className:"mb-4",children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"20"}),S.jsx("input",{type:"text",value:n,onChange:M=>s(M.target.value.slice(0,20)),placeholder:"",className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 outline-none transition-all"})]}),S.jsxs("div",{className:"mb-4",children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"10"}),S.jsx("input",{type:"text",value:o,onChange:M=>u(M.target.value.slice(0,10)),placeholder:"",className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 outline-none transition-all"})]}),S.jsxs("div",{className:"mb-6",children:[S.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["200",S.jsx("span",{className:"font-normal text-gray-400 ml-2",children:"AI"})]}),S.jsx("textarea",{value:E,onChange:M=>T(M.target.value.slice(0,200)),placeholder:"",className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 outline-none transition-all h-24 resize-none"}),S.jsxs("div",{className:"text-right text-xs text-gray-400 mt-1",children:[E.length,"/200"]})]}),S.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl",children:[S.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-2",children:""}),S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-2xl ${p}`,children:f}),S.jsxs("div",{children:[S.jsx("div",{className:"font-semibold text-gray-800",children:n||""}),S.jsx("div",{className:"text-sm text-gray-500",children:o||""})]})]})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[S.jsx("button",{onClick:e,className:"btn-secondary order-2 sm:order-1 flex-1",children:""}),S.jsxs("button",{onClick:C,disabled:!n.trim()||!o.trim()||!E.trim(),className:"btn-primary order-1 sm:order-2 flex-1",children:[S.jsx(K_,{size:18}),""]})]})]})})},T1=(r,e)=>{try{const n=localStorage.getItem("multiverse_diary_collapsed_sections");if(n)return JSON.parse(n)[`${r}_${e}`]??!1}catch(n){console.error("Failed to load collapsed state",n)}return!1},S1=(r,e,n)=>{try{const s=localStorage.getItem("multiverse_diary_collapsed_sections"),o=s?JSON.parse(s):{};o[`${r}_${e}`]=n,localStorage.setItem("multiverse_diary_collapsed_sections",JSON.stringify(o))}catch(s){console.error("Failed to save collapsed state",s)}},zD=({entry:r,onDelete:e,onUpdate:n,apiKey:s,allPersonas:o})=>{const[u,f]=j.useState(!1),[m,p]=j.useState(!0),[y,E]=j.useState(!0),T=o||eu;j.useEffect(()=>{p(!T1(r.id,"comments")),E(!T1(r.id,"analysis"))},[r.id]);const C=()=>{const q=!m;p(q),S1(r.id,"comments",!q)},M=()=>{const q=!y;E(q),S1(r.id,"analysis",!q)},Q=async()=>{if(!s){alert("AIAPI");return}f(!0);const q=await gw(s,r.content);q?(n(r.id,{...r,analysis:q}),E(!0)):alert("API"),f(!1)},Y=()=>{const{analysis:q,...ne}=r;n(r.id,ne)};return S.jsxs("div",{className:"entry-wrapper mb-10 animate-slideUp",children:[S.jsxs("div",{className:"diary-card p-6 sm:p-8",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6 pb-5 border-b-2 border-gray-100",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-xl flex items-center justify-center",children:S.jsx(xA,{size:22,className:"text-indigo-500"})}),S.jsx("div",{children:S.jsx("span",{className:"text-gray-800 text-base font-semibold",children:r.date})})]}),S.jsx("button",{onClick:()=>e(r.id),className:"text-gray-300 hover:text-red-400 transition-colors p-2.5 rounded-xl hover:bg-red-50",title:"",children:S.jsx(jh,{size:20})})]}),S.jsx("div",{className:"mb-6",children:S.jsx("p",{className:"text-gray-800 whitespace-pre-wrap leading-loose text-base sm:text-lg",children:r.content})}),r.analysis?S.jsxs("div",{children:[S.jsxs("button",{onClick:M,className:"w-full flex items-center justify-between p-3 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl hover:from-indigo-100 hover:to-purple-100 transition-colors mb-2",children:[S.jsxs("span",{className:"flex items-center gap-2 text-sm font-semibold text-indigo-700",children:[S.jsx(q_,{size:18}),"AI"]}),y?S.jsx(G_,{size:18,className:"text-indigo-500"}):S.jsx(H_,{size:18,className:"text-indigo-500"})]}),y&&S.jsx(UD,{analysis:r.analysis,onClose:Y})]}):S.jsx("div",{className:"flex justify-end",children:S.jsxs("button",{onClick:Q,disabled:u,className:"text-sm font-semibold text-indigo-600 bg-indigo-50 hover:bg-indigo-100 px-5 py-2.5 rounded-xl transition-all flex items-center gap-2 hover:shadow-sm",children:[u?S.jsx(Gl,{size:18,className:"animate-spin"}):S.jsx(q_,{size:18}),u?"...":"AI"]})})]}),S.jsxs("div",{className:"comments-wrapper mt-4 ml-6 sm:ml-10 pl-6 sm:pl-8 border-l-4 border-indigo-200",children:[S.jsxs("button",{onClick:C,className:"w-full flex items-center justify-between py-2 mb-3 hover:opacity-80 transition-opacity",children:[S.jsxs("h4",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider flex items-center gap-2",children:[S.jsx(qA,{size:16,className:"text-pink-400"}),"",S.jsxs("span",{className:"text-xs font-normal text-gray-400 normal-case",children:["(",r.comments.length,")"]})]}),m?S.jsx(G_,{size:18,className:"text-gray-400"}):S.jsx(H_,{size:18,className:"text-gray-400"})]}),m&&S.jsx("div",{className:"space-y-4 animate-fadeIn",children:r.comments.map((q,ne)=>{const se=T.find(te=>te.id===q.personaId);return se?S.jsx(LD,{persona:se,text:q.text,index:ne},ne):null})})]})]})};var Hl=U1();function BD(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return j.useMemo(()=>s=>{e.forEach(o=>o(s))},e)}const lf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Uo(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function np(r){return"nodeType"in r}function Bn(r){var e,n;return r?Uo(r)?r:np(r)&&(e=(n=r.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function ip(r){const{Document:e}=Bn(r);return r instanceof e}function Ru(r){return Uo(r)?!1:r instanceof Bn(r).HTMLElement}function oT(r){return r instanceof Bn(r).SVGElement}function Po(r){return r?Uo(r)?r.document:np(r)?ip(r)?r:Ru(r)||oT(r)?r.ownerDocument:document:document:document}const sr=lf?j.useLayoutEffect:j.useEffect;function rp(r){const e=j.useRef(r);return sr(()=>{e.current=r}),j.useCallback(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e.current==null?void 0:e.current(...s)},[])}function qD(){const r=j.useRef(null),e=j.useCallback((s,o)=>{r.current=setInterval(s,o)},[]),n=j.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[e,n]}function fu(r,e){e===void 0&&(e=[r]);const n=j.useRef(r);return sr(()=>{n.current!==r&&(n.current=r)},e),n}function Cu(r,e){const n=j.useRef();return j.useMemo(()=>{const s=r(n.current);return n.current=s,s},[...e])}function kh(r){const e=rp(r),n=j.useRef(null),s=j.useCallback(o=>{o!==n.current&&e?.(o,n.current),n.current=o},[]);return[n,s]}function ng(r){const e=j.useRef();return j.useEffect(()=>{e.current=r},[r]),e.current}let xm={};function Iu(r,e){return j.useMemo(()=>{if(e)return e;const n=xm[r]==null?0:xm[r]+1;return xm[r]=n,r+"-"+n},[r,e])}function lT(r){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return s.reduce((u,f)=>{const m=Object.entries(f);for(const[p,y]of m){const E=u[p];E!=null&&(u[p]=E+r*y)}return u},{...e})}}const Eo=lT(1),du=lT(-1);function HD(r){return"clientX"in r&&"clientY"in r}function sp(r){if(!r)return!1;const{KeyboardEvent:e}=Bn(r.target);return e&&r instanceof e}function GD(r){if(!r)return!1;const{TouchEvent:e}=Bn(r.target);return e&&r instanceof e}function ig(r){if(GD(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:n}=r.touches[0];return{x:e,y:n}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:n}=r.changedTouches[0];return{x:e,y:n}}}return HD(r)?{x:r.clientX,y:r.clientY}:null}const mu=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:n}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:n}=r;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(r){if(r)return[mu.Translate.toString(r),mu.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:n,easing:s}=r;return e+" "+n+"ms "+s}}}),A1="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function FD(r){return r.matches(A1)?r:r.querySelector(A1)}const QD={display:"none"};function KD(r){let{id:e,value:n}=r;return jn.createElement("div",{id:e,style:QD},n)}function YD(r){let{id:e,announcement:n,ariaLiveType:s="assertive"}=r;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return jn.createElement("div",{id:e,style:o,role:"status","aria-live":s,"aria-atomic":!0},n)}function XD(){const[r,e]=j.useState("");return{announce:j.useCallback(s=>{s!=null&&e(s)},[]),announcement:r}}const uT=j.createContext(null);function $D(r){const e=j.useContext(uT);j.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function JD(){const[r]=j.useState(()=>new Set),e=j.useCallback(s=>(r.add(s),()=>r.delete(s)),[r]);return[j.useCallback(s=>{let{type:o,event:u}=s;r.forEach(f=>{var m;return(m=f[o])==null?void 0:m.call(f,u)})},[r]),e]}const ZD={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},WD={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:n}=r;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:n}=r;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function e4(r){let{announcements:e=WD,container:n,hiddenTextDescribedById:s,screenReaderInstructions:o=ZD}=r;const{announce:u,announcement:f}=XD(),m=Iu("DndLiveRegion"),[p,y]=j.useState(!1);if(j.useEffect(()=>{y(!0)},[]),$D(j.useMemo(()=>({onDragStart(T){let{active:C}=T;u(e.onDragStart({active:C}))},onDragMove(T){let{active:C,over:M}=T;e.onDragMove&&u(e.onDragMove({active:C,over:M}))},onDragOver(T){let{active:C,over:M}=T;u(e.onDragOver({active:C,over:M}))},onDragEnd(T){let{active:C,over:M}=T;u(e.onDragEnd({active:C,over:M}))},onDragCancel(T){let{active:C,over:M}=T;u(e.onDragCancel({active:C,over:M}))}}),[u,e])),!p)return null;const E=jn.createElement(jn.Fragment,null,jn.createElement(KD,{id:s,value:o.draggable}),jn.createElement(YD,{id:m,announcement:f}));return n?Hl.createPortal(E,n):E}var Ft;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(Ft||(Ft={}));function Lh(){}function Rm(r,e){return j.useMemo(()=>({sensor:r,options:e??{}}),[r,e])}function t4(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return j.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const Di=Object.freeze({x:0,y:0});function cT(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function hT(r,e){let{data:{value:n}}=r,{data:{value:s}}=e;return n-s}function n4(r,e){let{data:{value:n}}=r,{data:{value:s}}=e;return s-n}function w1(r){let{left:e,top:n,height:s,width:o}=r;return[{x:e,y:n},{x:e+o,y:n},{x:e,y:n+s},{x:e+o,y:n+s}]}function fT(r,e){if(!r||r.length===0)return null;const[n]=r;return n[e]}function x1(r,e,n){return e===void 0&&(e=r.left),n===void 0&&(n=r.top),{x:e+r.width*.5,y:n+r.height*.5}}const i4=r=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=r;const o=x1(e,e.left,e.top),u=[];for(const f of s){const{id:m}=f,p=n.get(m);if(p){const y=cT(x1(p),o);u.push({id:m,data:{droppableContainer:f,value:y}})}}return u.sort(hT)},r4=r=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=r;const o=w1(e),u=[];for(const f of s){const{id:m}=f,p=n.get(m);if(p){const y=w1(p),E=o.reduce((C,M,Q)=>C+cT(y[Q],M),0),T=Number((E/4).toFixed(4));u.push({id:m,data:{droppableContainer:f,value:T}})}}return u.sort(hT)};function s4(r,e){const n=Math.max(e.top,r.top),s=Math.max(e.left,r.left),o=Math.min(e.left+e.width,r.left+r.width),u=Math.min(e.top+e.height,r.top+r.height),f=o-s,m=u-n;if(s<o&&n<u){const p=e.width*e.height,y=r.width*r.height,E=f*m,T=E/(p+y-E);return Number(T.toFixed(4))}return 0}const a4=r=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=r;const o=[];for(const u of s){const{id:f}=u,m=n.get(f);if(m){const p=s4(m,e);p>0&&o.push({id:f,data:{droppableContainer:u,value:p}})}}return o.sort(n4)};function o4(r,e,n){return{...r,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function dT(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:Di}function l4(r){return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.reduce((f,m)=>({...f,top:f.top+r*m.y,bottom:f.bottom+r*m.y,left:f.left+r*m.x,right:f.right+r*m.x}),{...n})}}const u4=l4(1);function c4(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function h4(r,e,n){const s=c4(e);if(!s)return r;const{scaleX:o,scaleY:u,x:f,y:m}=s,p=r.left-f-(1-o)*parseFloat(n),y=r.top-m-(1-u)*parseFloat(n.slice(n.indexOf(" ")+1)),E=o?r.width/o:r.width,T=u?r.height/u:r.height;return{width:E,height:T,top:y,right:p+E,bottom:y+T,left:p}}const f4={ignoreTransform:!1};function jo(r,e){e===void 0&&(e=f4);let n=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:y,transformOrigin:E}=Bn(r).getComputedStyle(r);y&&(n=h4(n,y,E))}const{top:s,left:o,width:u,height:f,bottom:m,right:p}=n;return{top:s,left:o,width:u,height:f,bottom:m,right:p}}function R1(r){return jo(r,{ignoreTransform:!0})}function d4(r){const e=r.innerWidth,n=r.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function m4(r,e){return e===void 0&&(e=Bn(r).getComputedStyle(r)),e.position==="fixed"}function g4(r,e){e===void 0&&(e=Bn(r).getComputedStyle(r));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=e[o];return typeof u=="string"?n.test(u):!1})}function uf(r,e){const n=[];function s(o){if(e!=null&&n.length>=e||!o)return n;if(ip(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Ru(o)||oT(o)||n.includes(o))return n;const u=Bn(r).getComputedStyle(o);return o!==r&&g4(o,u)&&n.push(o),m4(o,u)?n:s(o.parentNode)}return r?s(r):n}function mT(r){const[e]=uf(r,1);return e??null}function Cm(r){return!lf||!r?null:Uo(r)?r:np(r)?ip(r)||r===Po(r).scrollingElement?window:Ru(r)?r:null:null}function gT(r){return Uo(r)?r.scrollX:r.scrollLeft}function pT(r){return Uo(r)?r.scrollY:r.scrollTop}function rg(r){return{x:gT(r),y:pT(r)}}var tn;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(tn||(tn={}));function yT(r){return!lf||!r?!1:r===document.scrollingElement}function vT(r){const e={x:0,y:0},n=yT(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},s={x:r.scrollWidth-n.width,y:r.scrollHeight-n.height},o=r.scrollTop<=e.y,u=r.scrollLeft<=e.x,f=r.scrollTop>=s.y,m=r.scrollLeft>=s.x;return{isTop:o,isLeft:u,isBottom:f,isRight:m,maxScroll:s,minScroll:e}}const p4={x:.2,y:.2};function y4(r,e,n,s,o){let{top:u,left:f,right:m,bottom:p}=n;s===void 0&&(s=10),o===void 0&&(o=p4);const{isTop:y,isBottom:E,isLeft:T,isRight:C}=vT(r),M={x:0,y:0},Q={x:0,y:0},Y={height:e.height*o.y,width:e.width*o.x};return!y&&u<=e.top+Y.height?(M.y=tn.Backward,Q.y=s*Math.abs((e.top+Y.height-u)/Y.height)):!E&&p>=e.bottom-Y.height&&(M.y=tn.Forward,Q.y=s*Math.abs((e.bottom-Y.height-p)/Y.height)),!C&&m>=e.right-Y.width?(M.x=tn.Forward,Q.x=s*Math.abs((e.right-Y.width-m)/Y.width)):!T&&f<=e.left+Y.width&&(M.x=tn.Backward,Q.x=s*Math.abs((e.left+Y.width-f)/Y.width)),{direction:M,speed:Q}}function v4(r){if(r===document.scrollingElement){const{innerWidth:u,innerHeight:f}=window;return{top:0,left:0,right:u,bottom:f,width:u,height:f}}const{top:e,left:n,right:s,bottom:o}=r.getBoundingClientRect();return{top:e,left:n,right:s,bottom:o,width:r.clientWidth,height:r.clientHeight}}function _T(r){return r.reduce((e,n)=>Eo(e,rg(n)),Di)}function _4(r){return r.reduce((e,n)=>e+gT(n),0)}function E4(r){return r.reduce((e,n)=>e+pT(n),0)}function b4(r,e){if(e===void 0&&(e=jo),!r)return;const{top:n,left:s,bottom:o,right:u}=e(r);mT(r)&&(o<=0||u<=0||n>=window.innerHeight||s>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const T4=[["x",["left","right"],_4],["y",["top","bottom"],E4]];class ap{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=uf(n),o=_T(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[u,f,m]of T4)for(const p of f)Object.defineProperty(this,p,{get:()=>{const y=m(s),E=o[u]-y;return this.rect[p]+E},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Jl{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var o;(o=this.target)==null||o.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function S4(r){const{EventTarget:e}=Bn(r);return r instanceof e?r:Po(r)}function Im(r,e){const n=Math.abs(r.x),s=Math.abs(r.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var yi;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(yi||(yi={}));function C1(r){r.preventDefault()}function A4(r){r.stopPropagation()}var Xe;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(Xe||(Xe={}));const ET={start:[Xe.Space,Xe.Enter],cancel:[Xe.Esc],end:[Xe.Space,Xe.Enter,Xe.Tab]},w4=(r,e)=>{let{currentCoordinates:n}=e;switch(r.code){case Xe.Right:return{...n,x:n.x+25};case Xe.Left:return{...n,x:n.x-25};case Xe.Down:return{...n,y:n.y+25};case Xe.Up:return{...n,y:n.y-25}}};class op{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Jl(Po(n)),this.windowListeners=new Jl(Bn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(yi.Resize,this.handleCancel),this.windowListeners.add(yi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(yi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&b4(s),n(Di)}handleKeyDown(e){if(sp(e)){const{active:n,context:s,options:o}=this.props,{keyboardCodes:u=ET,coordinateGetter:f=w4,scrollBehavior:m="smooth"}=o,{code:p}=e;if(u.end.includes(p)){this.handleEnd(e);return}if(u.cancel.includes(p)){this.handleCancel(e);return}const{collisionRect:y}=s.current,E=y?{x:y.left,y:y.top}:Di;this.referenceCoordinates||(this.referenceCoordinates=E);const T=f(e,{active:n,context:s.current,currentCoordinates:E});if(T){const C=du(T,E),M={x:0,y:0},{scrollableAncestors:Q}=s.current;for(const Y of Q){const q=e.code,{isTop:ne,isRight:se,isLeft:te,isBottom:ue,maxScroll:fe,minScroll:le}=vT(Y),R=v4(Y),w={x:Math.min(q===Xe.Right?R.right-R.width/2:R.right,Math.max(q===Xe.Right?R.left:R.left+R.width/2,T.x)),y:Math.min(q===Xe.Down?R.bottom-R.height/2:R.bottom,Math.max(q===Xe.Down?R.top:R.top+R.height/2,T.y))},I=q===Xe.Right&&!se||q===Xe.Left&&!te,O=q===Xe.Down&&!ue||q===Xe.Up&&!ne;if(I&&w.x!==T.x){const N=Y.scrollLeft+C.x,L=q===Xe.Right&&N<=fe.x||q===Xe.Left&&N>=le.x;if(L&&!C.y){Y.scrollTo({left:N,behavior:m});return}L?M.x=Y.scrollLeft-N:M.x=q===Xe.Right?Y.scrollLeft-fe.x:Y.scrollLeft-le.x,M.x&&Y.scrollBy({left:-M.x,behavior:m});break}else if(O&&w.y!==T.y){const N=Y.scrollTop+C.y,L=q===Xe.Down&&N<=fe.y||q===Xe.Up&&N>=le.y;if(L&&!C.x){Y.scrollTo({top:N,behavior:m});return}L?M.y=Y.scrollTop-N:M.y=q===Xe.Down?Y.scrollTop-fe.y:Y.scrollTop-le.y,M.y&&Y.scrollBy({top:-M.y,behavior:m});break}}this.handleMove(e,Eo(du(T,this.referenceCoordinates),M))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}op.activators=[{eventName:"onKeyDown",handler:(r,e,n)=>{let{keyboardCodes:s=ET,onActivation:o}=e,{active:u}=n;const{code:f}=r.nativeEvent;if(s.start.includes(f)){const m=u.activatorNode.current;return m&&r.target!==m?!1:(r.preventDefault(),o?.({event:r.nativeEvent}),!0)}return!1}}];function I1(r){return!!(r&&"distance"in r)}function N1(r){return!!(r&&"delay"in r)}class lp{constructor(e,n,s){var o;s===void 0&&(s=S4(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:u}=e,{target:f}=u;this.props=e,this.events=n,this.document=Po(f),this.documentListeners=new Jl(this.document),this.listeners=new Jl(s),this.windowListeners=new Jl(Bn(f)),this.initialCoordinates=(o=ig(u))!=null?o:Di,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(yi.Resize,this.handleCancel),this.windowListeners.add(yi.DragStart,C1),this.windowListeners.add(yi.VisibilityChange,this.handleCancel),this.windowListeners.add(yi.ContextMenu,C1),this.documentListeners.add(yi.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(N1(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(I1(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:s,onPending:o}=this.props;o(s,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(yi.Click,A4,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(yi.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:o,props:u}=this,{onMove:f,options:{activationConstraint:m}}=u;if(!o)return;const p=(n=ig(e))!=null?n:Di,y=du(o,p);if(!s&&m){if(I1(m)){if(m.tolerance!=null&&Im(y,m.tolerance))return this.handleCancel();if(Im(y,m.distance))return this.handleStart()}if(N1(m)&&Im(y,m.tolerance))return this.handleCancel();this.handlePending(m,y);return}e.cancelable&&e.preventDefault(),f(p)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Xe.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const x4={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class up extends lp{constructor(e){const{event:n}=e,s=Po(n.target);super(e,x4,s)}}up.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:n}=r,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const R4={move:{name:"mousemove"},end:{name:"mouseup"}};var sg;(function(r){r[r.RightClick=2]="RightClick"})(sg||(sg={}));class C4 extends lp{constructor(e){super(e,R4,Po(e.event.target))}}C4.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:n}=r,{onActivation:s}=e;return n.button===sg.RightClick?!1:(s?.({event:n}),!0)}}];const Nm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class bT extends lp{constructor(e){super(e,Nm)}static setup(){return window.addEventListener(Nm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Nm.move.name,e)};function e(){}}}bT.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:n}=r,{onActivation:s}=e;const{touches:o}=n;return o.length>1?!1:(s?.({event:n}),!0)}}];var Zl;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(Zl||(Zl={}));var Uh;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(Uh||(Uh={}));function I4(r){let{acceleration:e,activator:n=Zl.Pointer,canScroll:s,draggingRect:o,enabled:u,interval:f=5,order:m=Uh.TreeOrder,pointerCoordinates:p,scrollableAncestors:y,scrollableAncestorRects:E,delta:T,threshold:C}=r;const M=D4({delta:T,disabled:!u}),[Q,Y]=qD(),q=j.useRef({x:0,y:0}),ne=j.useRef({x:0,y:0}),se=j.useMemo(()=>{switch(n){case Zl.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case Zl.DraggableRect:return o}},[n,o,p]),te=j.useRef(null),ue=j.useCallback(()=>{const le=te.current;if(!le)return;const R=q.current.x*ne.current.x,w=q.current.y*ne.current.y;le.scrollBy(R,w)},[]),fe=j.useMemo(()=>m===Uh.TreeOrder?[...y].reverse():y,[m,y]);j.useEffect(()=>{if(!u||!y.length||!se){Y();return}for(const le of fe){if(s?.(le)===!1)continue;const R=y.indexOf(le),w=E[R];if(!w)continue;const{direction:I,speed:O}=y4(le,w,se,e,C);for(const N of["x","y"])M[N][I[N]]||(O[N]=0,I[N]=0);if(O.x>0||O.y>0){Y(),te.current=le,Q(ue,f),q.current=O,ne.current=I;return}}q.current={x:0,y:0},ne.current={x:0,y:0},Y()},[e,ue,s,Y,u,f,JSON.stringify(se),JSON.stringify(M),Q,y,fe,E,JSON.stringify(C)])}const N4={x:{[tn.Backward]:!1,[tn.Forward]:!1},y:{[tn.Backward]:!1,[tn.Forward]:!1}};function D4(r){let{delta:e,disabled:n}=r;const s=ng(e);return Cu(o=>{if(n||!s||!o)return N4;const u={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[tn.Backward]:o.x[tn.Backward]||u.x===-1,[tn.Forward]:o.x[tn.Forward]||u.x===1},y:{[tn.Backward]:o.y[tn.Backward]||u.y===-1,[tn.Forward]:o.y[tn.Forward]||u.y===1}}},[n,e,s])}function O4(r,e){const n=e!=null?r.get(e):void 0,s=n?n.node.current:null;return Cu(o=>{var u;return e==null?null:(u=s??o)!=null?u:null},[s,e])}function M4(r,e){return j.useMemo(()=>r.reduce((n,s)=>{const{sensor:o}=s,u=o.activators.map(f=>({eventName:f.eventName,handler:e(f.handler,s)}));return[...n,...u]},[]),[r,e])}var gu;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(gu||(gu={}));var ag;(function(r){r.Optimized="optimized"})(ag||(ag={}));const D1=new Map;function V4(r,e){let{dragging:n,dependencies:s,config:o}=e;const[u,f]=j.useState(null),{frequency:m,measure:p,strategy:y}=o,E=j.useRef(r),T=q(),C=fu(T),M=j.useCallback(function(ne){ne===void 0&&(ne=[]),!C.current&&f(se=>se===null?ne:se.concat(ne.filter(te=>!se.includes(te))))},[C]),Q=j.useRef(null),Y=Cu(ne=>{if(T&&!n)return D1;if(!ne||ne===D1||E.current!==r||u!=null){const se=new Map;for(let te of r){if(!te)continue;if(u&&u.length>0&&!u.includes(te.id)&&te.rect.current){se.set(te.id,te.rect.current);continue}const ue=te.node.current,fe=ue?new ap(p(ue),ue):null;te.rect.current=fe,fe&&se.set(te.id,fe)}return se}return ne},[r,u,n,T,p]);return j.useEffect(()=>{E.current=r},[r]),j.useEffect(()=>{T||M()},[n,T]),j.useEffect(()=>{u&&u.length>0&&f(null)},[JSON.stringify(u)]),j.useEffect(()=>{T||typeof m!="number"||Q.current!==null||(Q.current=setTimeout(()=>{M(),Q.current=null},m))},[m,T,M,...s]),{droppableRects:Y,measureDroppableContainers:M,measuringScheduled:u!=null};function q(){switch(y){case gu.Always:return!1;case gu.BeforeDragging:return n;default:return!n}}}function TT(r,e){return Cu(n=>r?n||(typeof e=="function"?e(r):r):null,[e,r])}function k4(r,e){return TT(r,e)}function L4(r){let{callback:e,disabled:n}=r;const s=rp(e),o=j.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(s)},[s,n]);return j.useEffect(()=>()=>o?.disconnect(),[o]),o}function cf(r){let{callback:e,disabled:n}=r;const s=rp(e),o=j.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(s)},[n]);return j.useEffect(()=>()=>o?.disconnect(),[o]),o}function U4(r){return new ap(jo(r),r)}function O1(r,e,n){e===void 0&&(e=U4);const[s,o]=j.useState(null);function u(){o(p=>{if(!r)return null;if(r.isConnected===!1){var y;return(y=p??n)!=null?y:null}const E=e(r);return JSON.stringify(p)===JSON.stringify(E)?p:E})}const f=L4({callback(p){if(r)for(const y of p){const{type:E,target:T}=y;if(E==="childList"&&T instanceof HTMLElement&&T.contains(r)){u();break}}}}),m=cf({callback:u});return sr(()=>{u(),r?(m?.observe(r),f?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),f?.disconnect())},[r]),s}function P4(r){const e=TT(r);return dT(r,e)}const M1=[];function j4(r){const e=j.useRef(r),n=Cu(s=>r?s&&s!==M1&&r&&e.current&&r.parentNode===e.current.parentNode?s:uf(r):M1,[r]);return j.useEffect(()=>{e.current=r},[r]),n}function z4(r){const[e,n]=j.useState(null),s=j.useRef(r),o=j.useCallback(u=>{const f=Cm(u.target);f&&n(m=>m?(m.set(f,rg(f)),new Map(m)):null)},[]);return j.useEffect(()=>{const u=s.current;if(r!==u){f(u);const m=r.map(p=>{const y=Cm(p);return y?(y.addEventListener("scroll",o,{passive:!0}),[y,rg(y)]):null}).filter(p=>p!=null);n(m.length?new Map(m):null),s.current=r}return()=>{f(r),f(u)};function f(m){m.forEach(p=>{const y=Cm(p);y?.removeEventListener("scroll",o)})}},[o,r]),j.useMemo(()=>r.length?e?Array.from(e.values()).reduce((u,f)=>Eo(u,f),Di):_T(r):Di,[r,e])}function V1(r,e){e===void 0&&(e=[]);const n=j.useRef(null);return j.useEffect(()=>{n.current=null},e),j.useEffect(()=>{const s=r!==Di;s&&!n.current&&(n.current=r),!s&&n.current&&(n.current=null)},[r]),n.current?du(r,n.current):Di}function B4(r){j.useEffect(()=>{if(!lf)return;const e=r.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n?.()}},r.map(e=>{let{sensor:n}=e;return n}))}function q4(r,e){return j.useMemo(()=>r.reduce((n,s)=>{let{eventName:o,handler:u}=s;return n[o]=f=>{u(f,e)},n},{}),[r,e])}function ST(r){return j.useMemo(()=>r?d4(r):null,[r])}const k1=[];function H4(r,e){e===void 0&&(e=jo);const[n]=r,s=ST(n?Bn(n):null),[o,u]=j.useState(k1);function f(){u(()=>r.length?r.map(p=>yT(p)?s:new ap(e(p),p)):k1)}const m=cf({callback:f});return sr(()=>{m?.disconnect(),f(),r.forEach(p=>m?.observe(p))},[r]),o}function G4(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return Ru(e)?e:r}function F4(r){let{measure:e}=r;const[n,s]=j.useState(null),o=j.useCallback(y=>{for(const{target:E}of y)if(Ru(E)){s(T=>{const C=e(E);return T?{...T,width:C.width,height:C.height}:C});break}},[e]),u=cf({callback:o}),f=j.useCallback(y=>{const E=G4(y);u?.disconnect(),E&&u?.observe(E),s(E?e(E):null)},[e,u]),[m,p]=kh(f);return j.useMemo(()=>({nodeRef:m,rect:n,setRef:p}),[n,m,p])}const Q4=[{sensor:up,options:{}},{sensor:op,options:{}}],K4={current:{}},gh={draggable:{measure:R1},droppable:{measure:R1,strategy:gu.WhileDragging,frequency:ag.Optimized},dragOverlay:{measure:jo}};class Wl extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const Y4={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Wl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Lh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:gh,measureDroppableContainers:Lh,windowRect:null,measuringScheduled:!1},X4={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Lh,draggableNodes:new Map,over:null,measureDroppableContainers:Lh},hf=j.createContext(X4),AT=j.createContext(Y4);function $4(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Wl}}}function J4(r,e){switch(e.type){case Ft.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ft.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}};case Ft.DragEnd:case Ft.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ft.RegisterDroppable:{const{element:n}=e,{id:s}=n,o=new Wl(r.droppable.containers);return o.set(s,n),{...r,droppable:{...r.droppable,containers:o}}}case Ft.SetDroppableDisabled:{const{id:n,key:s,disabled:o}=e,u=r.droppable.containers.get(n);if(!u||s!==u.key)return r;const f=new Wl(r.droppable.containers);return f.set(n,{...u,disabled:o}),{...r,droppable:{...r.droppable,containers:f}}}case Ft.UnregisterDroppable:{const{id:n,key:s}=e,o=r.droppable.containers.get(n);if(!o||s!==o.key)return r;const u=new Wl(r.droppable.containers);return u.delete(n),{...r,droppable:{...r.droppable,containers:u}}}default:return r}}function Z4(r){let{disabled:e}=r;const{active:n,activatorEvent:s,draggableNodes:o}=j.useContext(hf),u=ng(s),f=ng(n?.id);return j.useEffect(()=>{if(!e&&!s&&u&&f!=null){if(!sp(u)||document.activeElement===u.target)return;const m=o.get(f);if(!m)return;const{activatorNode:p,node:y}=m;if(!p.current&&!y.current)return;requestAnimationFrame(()=>{for(const E of[p.current,y.current]){if(!E)continue;const T=FD(E);if(T){T.focus();break}}})}},[s,e,o,f,u]),null}function W4(r,e){let{transform:n,...s}=e;return r!=null&&r.length?r.reduce((o,u)=>u({transform:o,...s}),n):n}function eO(r){return j.useMemo(()=>({draggable:{...gh.draggable,...r?.draggable},droppable:{...gh.droppable,...r?.droppable},dragOverlay:{...gh.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function tO(r){let{activeNode:e,measure:n,initialRect:s,config:o=!0}=r;const u=j.useRef(!1),{x:f,y:m}=typeof o=="boolean"?{x:o,y:o}:o;sr(()=>{if(!f&&!m||!e){u.current=!1;return}if(u.current||!s)return;const y=e?.node.current;if(!y||y.isConnected===!1)return;const E=n(y),T=dT(E,s);if(f||(T.x=0),m||(T.y=0),u.current=!0,Math.abs(T.x)>0||Math.abs(T.y)>0){const C=mT(y);C&&C.scrollBy({top:T.y,left:T.x})}},[e,f,m,s,n])}const wT=j.createContext({...Di,scaleX:1,scaleY:1});var ps;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(ps||(ps={}));const nO=j.memo(function(e){var n,s,o,u;let{id:f,accessibility:m,autoScroll:p=!0,children:y,sensors:E=Q4,collisionDetection:T=a4,measuring:C,modifiers:M,...Q}=e;const Y=j.useReducer(J4,void 0,$4),[q,ne]=Y,[se,te]=JD(),[ue,fe]=j.useState(ps.Uninitialized),le=ue===ps.Initialized,{draggable:{active:R,nodes:w,translate:I},droppable:{containers:O}}=q,N=R!=null?w.get(R):null,L=j.useRef({initial:null,translated:null}),x=j.useMemo(()=>{var Ue;return R!=null?{id:R,data:(Ue=N?.data)!=null?Ue:K4,rect:L}:null},[R,N]),Ae=j.useRef(null),[ze,K]=j.useState(null),[ie,me]=j.useState(null),xe=fu(Q,Object.values(Q)),ke=Iu("DndDescribedBy",f),V=j.useMemo(()=>O.getEnabled(),[O]),X=eO(C),{droppableRects:re,measureDroppableContainers:oe,measuringScheduled:_e}=V4(V,{dragging:le,dependencies:[I.x,I.y],config:X.droppable}),ye=O4(w,R),Me=j.useMemo(()=>ie?ig(ie):null,[ie]),tt=ur(),Be=k4(ye,X.draggable.measure);tO({activeNode:R!=null?w.get(R):null,config:tt.layoutShiftCompensation,initialRect:Be,measure:X.draggable.measure});const Le=O1(ye,X.draggable.measure,Be),In=O1(ye?ye.parentElement:null),ce=j.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),be=O.getNodeFor((n=ce.current.over)==null?void 0:n.id),Ce=F4({measure:X.dragOverlay.measure}),Ke=(s=Ce.nodeRef.current)!=null?s:ye,dt=le?(o=Ce.rect)!=null?o:Le:null,Tn=!!(Ce.nodeRef.current&&Ce.rect),Oi=P4(Tn?null:Le),yt=ST(Ke?Bn(Ke):null),at=j4(le?be??ye:null),qn=H4(at),Ur=W4(M,{transform:{x:I.x-Oi.x,y:I.y-Oi.y,scaleX:1,scaleY:1},activatorEvent:ie,active:x,activeNodeRect:Le,containerNodeRect:In,draggingNodeRect:dt,over:ce.current.over,overlayNodeRect:Ce.rect,scrollableAncestors:at,scrollableAncestorRects:qn,windowRect:yt}),Ms=Me?Eo(Me,I):null,Xt=z4(at),ar=V1(Xt),Vs=V1(Xt,[Le]),ii=Eo(Ur,ar),Sn=dt?u4(dt,Ur):null,or=x&&Sn?T({active:x,collisionRect:Sn,droppableRects:re,droppableContainers:V,pointerCoordinates:Ms}):null,ks=fT(or,"id"),[Hn,Ls]=j.useState(null),Gn=Tn?Ur:Eo(Ur,Vs),Ht=o4(Gn,(u=Hn?.rect)!=null?u:null,Le),fn=j.useRef(null),vt=j.useCallback((Ue,_t)=>{let{sensor:Et,options:Mt}=_t;if(Ae.current==null)return;const dn=w.get(Ae.current);if(!dn)return;const $t=Ue.nativeEvent,Rt=new Et({active:Ae.current,activeNode:dn,event:$t,options:Mt,context:ce,onAbort(Ct){if(!w.get(Ct))return;const{onDragAbort:gn}=xe.current,An={id:Ct};gn?.(An),se({type:"onDragAbort",event:An})},onPending(Ct,mn,gn,An){if(!w.get(Ct))return;const{onDragPending:wn}=xe.current,Qn={id:Ct,constraint:mn,initialCoordinates:gn,offset:An};wn?.(Qn),se({type:"onDragPending",event:Qn})},onStart(Ct){const mn=Ae.current;if(mn==null)return;const gn=w.get(mn);if(!gn)return;const{onDragStart:An}=xe.current,Fn={activatorEvent:$t,active:{id:mn,data:gn.data,rect:L}};Hl.unstable_batchedUpdates(()=>{An?.(Fn),fe(ps.Initializing),ne({type:Ft.DragStart,initialCoordinates:Ct,active:mn}),se({type:"onDragStart",event:Fn}),K(fn.current),me($t)})},onMove(Ct){ne({type:Ft.DragMove,coordinates:Ct})},onEnd:Nn(Ft.DragEnd),onCancel:Nn(Ft.DragCancel)});fn.current=Rt;function Nn(Ct){return async function(){const{active:gn,collisions:An,over:Fn,scrollAdjustedTranslate:wn}=ce.current;let Qn=null;if(gn&&wn){const{cancelDrop:nn}=xe.current;Qn={activatorEvent:$t,active:gn,collisions:An,delta:wn,over:Fn},Ct===Ft.DragEnd&&typeof nn=="function"&&await Promise.resolve(nn(Qn))&&(Ct=Ft.DragCancel)}Ae.current=null,Hl.unstable_batchedUpdates(()=>{ne({type:Ct}),fe(ps.Uninitialized),Ls(null),K(null),me(null),fn.current=null;const nn=Ct===Ft.DragEnd?"onDragEnd":"onDragCancel";if(Qn){const xn=xe.current[nn];xn?.(Qn),se({type:nn,event:Qn})}})}}},[w]),Ta=j.useCallback((Ue,_t)=>(Et,Mt)=>{const dn=Et.nativeEvent,$t=w.get(Mt);if(Ae.current!==null||!$t||dn.dndKit||dn.defaultPrevented)return;const Rt={active:$t};Ue(Et,_t.options,Rt)===!0&&(dn.dndKit={capturedBy:_t.sensor},Ae.current=Mt,vt(Et,_t))},[w,vt]),lr=M4(E,Ta);B4(E),sr(()=>{Le&&ue===ps.Initializing&&fe(ps.Initialized)},[Le,ue]),j.useEffect(()=>{const{onDragMove:Ue}=xe.current,{active:_t,activatorEvent:Et,collisions:Mt,over:dn}=ce.current;if(!_t||!Et)return;const $t={active:_t,activatorEvent:Et,collisions:Mt,delta:{x:ii.x,y:ii.y},over:dn};Hl.unstable_batchedUpdates(()=>{Ue?.($t),se({type:"onDragMove",event:$t})})},[ii.x,ii.y]),j.useEffect(()=>{const{active:Ue,activatorEvent:_t,collisions:Et,droppableContainers:Mt,scrollAdjustedTranslate:dn}=ce.current;if(!Ue||Ae.current==null||!_t||!dn)return;const{onDragOver:$t}=xe.current,Rt=Mt.get(ks),Nn=Rt&&Rt.rect.current?{id:Rt.id,rect:Rt.rect.current,data:Rt.data,disabled:Rt.disabled}:null,Ct={active:Ue,activatorEvent:_t,collisions:Et,delta:{x:dn.x,y:dn.y},over:Nn};Hl.unstable_batchedUpdates(()=>{Ls(Nn),$t?.(Ct),se({type:"onDragOver",event:Ct})})},[ks]),sr(()=>{ce.current={activatorEvent:ie,active:x,activeNode:ye,collisionRect:Sn,collisions:or,droppableRects:re,draggableNodes:w,draggingNode:Ke,draggingNodeRect:dt,droppableContainers:O,over:Hn,scrollableAncestors:at,scrollAdjustedTranslate:ii},L.current={initial:dt,translated:Sn}},[x,ye,or,Sn,w,Ke,dt,re,O,Hn,at,ii]),I4({...tt,delta:I,draggingRect:Sn,pointerCoordinates:Ms,scrollableAncestors:at,scrollableAncestorRects:qn});const Sa=j.useMemo(()=>({active:x,activeNode:ye,activeNodeRect:Le,activatorEvent:ie,collisions:or,containerNodeRect:In,dragOverlay:Ce,draggableNodes:w,droppableContainers:O,droppableRects:re,over:Hn,measureDroppableContainers:oe,scrollableAncestors:at,scrollableAncestorRects:qn,measuringConfiguration:X,measuringScheduled:_e,windowRect:yt}),[x,ye,Le,ie,or,In,Ce,w,O,re,Hn,oe,at,qn,X,_e,yt]),ri=j.useMemo(()=>({activatorEvent:ie,activators:lr,active:x,activeNodeRect:Le,ariaDescribedById:{draggable:ke},dispatch:ne,draggableNodes:w,over:Hn,measureDroppableContainers:oe}),[ie,lr,x,Le,ne,ke,w,Hn,oe]);return jn.createElement(uT.Provider,{value:te},jn.createElement(hf.Provider,{value:ri},jn.createElement(AT.Provider,{value:Sa},jn.createElement(wT.Provider,{value:Ht},y)),jn.createElement(Z4,{disabled:m?.restoreFocus===!1})),jn.createElement(e4,{...m,hiddenTextDescribedById:ke}));function ur(){const Ue=ze?.autoScrollEnabled===!1,_t=typeof p=="object"?p.enabled===!1:p===!1,Et=le&&!Ue&&!_t;return typeof p=="object"?{...p,enabled:Et}:{enabled:Et}}}),iO=j.createContext(null),L1="button",rO="Draggable";function sO(r){let{id:e,data:n,disabled:s=!1,attributes:o}=r;const u=Iu(rO),{activators:f,activatorEvent:m,active:p,activeNodeRect:y,ariaDescribedById:E,draggableNodes:T,over:C}=j.useContext(hf),{role:M=L1,roleDescription:Q="draggable",tabIndex:Y=0}=o??{},q=p?.id===e,ne=j.useContext(q?wT:iO),[se,te]=kh(),[ue,fe]=kh(),le=q4(f,e),R=fu(n);sr(()=>(T.set(e,{id:e,key:u,node:se,activatorNode:ue,data:R}),()=>{const I=T.get(e);I&&I.key===u&&T.delete(e)}),[T,e]);const w=j.useMemo(()=>({role:M,tabIndex:Y,"aria-disabled":s,"aria-pressed":q&&M===L1?!0:void 0,"aria-roledescription":Q,"aria-describedby":E.draggable}),[s,M,Y,q,Q,E.draggable]);return{active:p,activatorEvent:m,activeNodeRect:y,attributes:w,isDragging:q,listeners:s?void 0:le,node:se,over:C,setNodeRef:te,setActivatorNodeRef:fe,transform:ne}}function aO(){return j.useContext(AT)}const oO="Droppable",lO={timeout:25};function uO(r){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:o}=r;const u=Iu(oO),{active:f,dispatch:m,over:p,measureDroppableContainers:y}=j.useContext(hf),E=j.useRef({disabled:n}),T=j.useRef(!1),C=j.useRef(null),M=j.useRef(null),{disabled:Q,updateMeasurementsFor:Y,timeout:q}={...lO,...o},ne=fu(Y??s),se=j.useCallback(()=>{if(!T.current){T.current=!0;return}M.current!=null&&clearTimeout(M.current),M.current=setTimeout(()=>{y(Array.isArray(ne.current)?ne.current:[ne.current]),M.current=null},q)},[q]),te=cf({callback:se,disabled:Q||!f}),ue=j.useCallback((w,I)=>{te&&(I&&(te.unobserve(I),T.current=!1),w&&te.observe(w))},[te]),[fe,le]=kh(ue),R=fu(e);return j.useEffect(()=>{!te||!fe.current||(te.disconnect(),T.current=!1,te.observe(fe.current))},[fe,te]),j.useEffect(()=>(m({type:Ft.RegisterDroppable,element:{id:s,key:u,disabled:n,node:fe,rect:C,data:R}}),()=>m({type:Ft.UnregisterDroppable,key:u,id:s})),[s]),j.useEffect(()=>{n!==E.current.disabled&&(m({type:Ft.SetDroppableDisabled,id:s,key:u,disabled:n}),E.current.disabled=n)},[s,u,n,m]),{active:f,rect:C,isOver:p?.id===s,node:fe,over:p,setNodeRef:le}}function cp(r,e,n){const s=r.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function cO(r,e){return r.reduce((n,s,o)=>{const u=e.get(s);return u&&(n[o]=u),n},Array(r.length))}function ih(r){return r!==null&&r>=0}function hO(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!==e[n])return!1;return!0}function fO(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const xT=r=>{let{rects:e,activeIndex:n,overIndex:s,index:o}=r;const u=cp(e,s,n),f=e[o],m=u[o];return!m||!f?null:{x:m.left-f.left,y:m.top-f.top,scaleX:m.width/f.width,scaleY:m.height/f.height}},rh={scaleX:1,scaleY:1},dO=r=>{var e;let{activeIndex:n,activeNodeRect:s,index:o,rects:u,overIndex:f}=r;const m=(e=u[n])!=null?e:s;if(!m)return null;if(o===n){const y=u[f];return y?{x:0,y:n<f?y.top+y.height-(m.top+m.height):y.top-m.top,...rh}:null}const p=mO(u,o,n);return o>n&&o<=f?{x:0,y:-m.height-p,...rh}:o<n&&o>=f?{x:0,y:m.height+p,...rh}:{x:0,y:0,...rh}};function mO(r,e,n){const s=r[e],o=r[e-1],u=r[e+1];return s?n<e?o?s.top-(o.top+o.height):u?u.top-(s.top+s.height):0:u?u.top-(s.top+s.height):o?s.top-(o.top+o.height):0:0}const RT="Sortable",CT=jn.createContext({activeIndex:-1,containerId:RT,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:xT,disabled:{draggable:!1,droppable:!1}});function gO(r){let{children:e,id:n,items:s,strategy:o=xT,disabled:u=!1}=r;const{active:f,dragOverlay:m,droppableRects:p,over:y,measureDroppableContainers:E}=aO(),T=Iu(RT,n),C=m.rect!==null,M=j.useMemo(()=>s.map(le=>typeof le=="object"&&"id"in le?le.id:le),[s]),Q=f!=null,Y=f?M.indexOf(f.id):-1,q=y?M.indexOf(y.id):-1,ne=j.useRef(M),se=!hO(M,ne.current),te=q!==-1&&Y===-1||se,ue=fO(u);sr(()=>{se&&Q&&E(M)},[se,M,Q,E]),j.useEffect(()=>{ne.current=M},[M]);const fe=j.useMemo(()=>({activeIndex:Y,containerId:T,disabled:ue,disableTransforms:te,items:M,overIndex:q,useDragOverlay:C,sortedRects:cO(M,p),strategy:o}),[Y,T,ue.draggable,ue.droppable,te,M,q,p,C,o]);return jn.createElement(CT.Provider,{value:fe},e)}const pO=r=>{let{id:e,items:n,activeIndex:s,overIndex:o}=r;return cp(n,s,o).indexOf(e)},yO=r=>{let{containerId:e,isSorting:n,wasDragging:s,index:o,items:u,newIndex:f,previousItems:m,previousContainerId:p,transition:y}=r;return!y||!s||m!==u&&o===f?!1:n?!0:f!==o&&e===p},vO={duration:200,easing:"ease"},IT="transform",_O=mu.Transition.toString({property:IT,duration:0,easing:"linear"}),EO={roleDescription:"sortable"};function bO(r){let{disabled:e,index:n,node:s,rect:o}=r;const[u,f]=j.useState(null),m=j.useRef(n);return sr(()=>{if(!e&&n!==m.current&&s.current){const p=o.current;if(p){const y=jo(s.current,{ignoreTransform:!0}),E={x:p.left-y.left,y:p.top-y.top,scaleX:p.width/y.width,scaleY:p.height/y.height};(E.x||E.y)&&f(E)}}n!==m.current&&(m.current=n)},[e,n,s,o]),j.useEffect(()=>{u&&f(null)},[u]),u}function TO(r){let{animateLayoutChanges:e=yO,attributes:n,disabled:s,data:o,getNewIndex:u=pO,id:f,strategy:m,resizeObserverConfig:p,transition:y=vO}=r;const{items:E,containerId:T,activeIndex:C,disabled:M,disableTransforms:Q,sortedRects:Y,overIndex:q,useDragOverlay:ne,strategy:se}=j.useContext(CT),te=SO(s,M),ue=E.indexOf(f),fe=j.useMemo(()=>({sortable:{containerId:T,index:ue,items:E},...o}),[T,o,ue,E]),le=j.useMemo(()=>E.slice(E.indexOf(f)),[E,f]),{rect:R,node:w,isOver:I,setNodeRef:O}=uO({id:f,data:fe,disabled:te.droppable,resizeObserverConfig:{updateMeasurementsFor:le,...p}}),{active:N,activatorEvent:L,activeNodeRect:x,attributes:Ae,setNodeRef:ze,listeners:K,isDragging:ie,over:me,setActivatorNodeRef:xe,transform:ke}=sO({id:f,data:fe,attributes:{...EO,...n},disabled:te.draggable}),V=BD(O,ze),X=!!N,re=X&&!Q&&ih(C)&&ih(q),oe=!ne&&ie,_e=oe&&re?ke:null,Me=re?_e??(m??se)({rects:Y,activeNodeRect:x,activeIndex:C,overIndex:q,index:ue}):null,tt=ih(C)&&ih(q)?u({id:f,items:E,activeIndex:C,overIndex:q}):ue,Be=N?.id,Le=j.useRef({activeId:Be,items:E,newIndex:tt,containerId:T}),In=E!==Le.current.items,ce=e({active:N,containerId:T,isDragging:ie,isSorting:X,id:f,index:ue,items:E,newIndex:Le.current.newIndex,previousItems:Le.current.items,previousContainerId:Le.current.containerId,transition:y,wasDragging:Le.current.activeId!=null}),be=bO({disabled:!ce,index:ue,node:w,rect:R});return j.useEffect(()=>{X&&Le.current.newIndex!==tt&&(Le.current.newIndex=tt),T!==Le.current.containerId&&(Le.current.containerId=T),E!==Le.current.items&&(Le.current.items=E)},[X,tt,T,E]),j.useEffect(()=>{if(Be===Le.current.activeId)return;if(Be!=null&&Le.current.activeId==null){Le.current.activeId=Be;return}const Ke=setTimeout(()=>{Le.current.activeId=Be},50);return()=>clearTimeout(Ke)},[Be]),{active:N,activeIndex:C,attributes:Ae,data:fe,rect:R,index:ue,newIndex:tt,items:E,isOver:I,isSorting:X,isDragging:ie,listeners:K,node:w,overIndex:q,over:me,setNodeRef:V,setActivatorNodeRef:xe,setDroppableNodeRef:O,setDraggableNodeRef:ze,transform:be??Me,transition:Ce()};function Ce(){if(be||In&&Le.current.newIndex===ue)return _O;if(!(oe&&!sp(L)||!y)&&(X||ce))return mu.Transition.toString({...y,property:IT})}}function SO(r,e){var n,s;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(n=r?.draggable)!=null?n:e.draggable,droppable:(s=r?.droppable)!=null?s:e.droppable}}function Ph(r){if(!r)return!1;const e=r.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const AO=[Xe.Down,Xe.Right,Xe.Up,Xe.Left],wO=(r,e)=>{let{context:{active:n,collisionRect:s,droppableRects:o,droppableContainers:u,over:f,scrollableAncestors:m}}=e;if(AO.includes(r.code)){if(r.preventDefault(),!n||!s)return;const p=[];u.getEnabled().forEach(T=>{if(!T||T!=null&&T.disabled)return;const C=o.get(T.id);if(C)switch(r.code){case Xe.Down:s.top<C.top&&p.push(T);break;case Xe.Up:s.top>C.top&&p.push(T);break;case Xe.Left:s.left>C.left&&p.push(T);break;case Xe.Right:s.left<C.left&&p.push(T);break}});const y=r4({collisionRect:s,droppableRects:o,droppableContainers:p});let E=fT(y,"id");if(E===f?.id&&y.length>1&&(E=y[1].id),E!=null){const T=u.get(n.id),C=u.get(E),M=C?o.get(C.id):null,Q=C?.node.current;if(Q&&M&&T&&C){const q=uf(Q).some((le,R)=>m[R]!==le),ne=NT(T,C),se=xO(T,C),te=q||!ne?{x:0,y:0}:{x:se?s.width-M.width:0,y:se?s.height-M.height:0},ue={x:M.left,y:M.top};return te.x&&te.y?ue:du(ue,te)}}}};function NT(r,e){return!Ph(r)||!Ph(e)?!1:r.data.current.sortable.containerId===e.data.current.sortable.containerId}function xO(r,e){return!Ph(r)||!Ph(e)||!NT(r,e)?!1:r.data.current.sortable.index<e.data.current.sortable.index}const RO=({persona:r,isHidden:e,isCustom:n,onToggleVisibility:s,onDelete:o})=>{const{attributes:u,listeners:f,setNodeRef:m,transform:p,transition:y,isDragging:E}=TO({id:r.id}),T={transform:mu.Transform.toString(p),transition:y,opacity:E?.5:1,zIndex:E?1e3:"auto"};return S.jsxs("div",{ref:m,style:T,className:`flex items-center justify-between p-3 rounded-lg group transition-colors ${E?"bg-indigo-100 shadow-lg":e?"bg-gray-100 opacity-60":"bg-gray-50"}`,children:[S.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[S.jsx("button",{...u,...f,className:"p-1 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing touch-none",title:"",children:S.jsx(zA,{size:18})}),S.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg flex-shrink-0 ${r.color||"bg-gray-200"}`,children:r.icon}),S.jsxs("div",{className:"min-w-0",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:`text-sm font-medium truncate ${e?"text-gray-400":"text-gray-700"}`,children:r.name}),n&&S.jsx("span",{className:"text-xs bg-pink-100 text-pink-600 px-1.5 py-0.5 rounded",children:""})]}),S.jsx("div",{className:"text-xs text-gray-400 truncate",children:r.role})]})]}),S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx("button",{onClick:()=>s?.(r.id),className:`p-2 rounded-lg transition-colors ${e?"text-gray-400 hover:text-indigo-500 hover:bg-indigo-50":"text-indigo-500 hover:text-indigo-600 hover:bg-indigo-50"}`,title:e?"":"",children:e?S.jsx(LA,{size:18}):S.jsx(PA,{size:18})}),n&&S.jsx("button",{onClick:()=>o(r.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"",children:S.jsx(jh,{size:16})})]})]})},CO=({savedKey:r,onSave:e,onCancel:n,entriesCount:s,onClearAllData:o,onExportData:u,customPersonas:f,onDeleteCustomPersona:m,allPersonas:p,hiddenPersonaIds:y,onTogglePersonaVisibility:E,onMovePersona:T,onReorderPersonas:C,onAddPersona:M,user:Q,onSignOut:Y})=>{const[q,ne]=j.useState(r||""),[se,te]=j.useState(!1),[ue,fe]=j.useState("api"),[le,R]=j.useState(lg()),w=x=>{R(x),fw(x)},I=t4(Rm(up,{activationConstraint:{distance:5}}),Rm(bT,{activationConstraint:{delay:150,tolerance:5}}),Rm(op,{coordinateGetter:wO})),O=j.useMemo(()=>(p||[...eu,...f||[]]).map(x=>x.id),[p,f]),N=x=>{const{active:Ae,over:ze}=x;if(ze&&Ae.id!==ze.id){const K=O.indexOf(Ae.id),ie=O.indexOf(ze.id),me=cp(O,K,ie);C?.(me)}},L=()=>{o(),te(!1)};return S.jsx("div",{className:"modal-overlay fixed inset-0 flex items-center justify-center z-50 p-4 animate-fadeIn",children:S.jsxs("div",{className:"modal-content p-6 sm:p-8 max-h-[90vh] overflow-y-auto",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-3",children:[S.jsx("span",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-xl flex items-center justify-center",children:S.jsx(q1,{className:"text-white",size:20})}),""]}),S.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 p-2 rounded-xl hover:bg-gray-100 transition-colors",children:S.jsx(H1,{size:20})})]}),S.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200 overflow-x-auto",children:[S.jsx("button",{onClick:()=>fe("api"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${ue==="api"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:S.jsxs("span",{className:"flex items-center gap-2",children:[S.jsx(z1,{size:16}),"API"]})}),S.jsx("button",{onClick:()=>fe("personas"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${ue==="personas"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:S.jsxs("span",{className:"flex items-center gap-2",children:[S.jsx(lw,{size:16}),""]})}),S.jsx("button",{onClick:()=>fe("data"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${ue==="data"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:S.jsxs("span",{className:"flex items-center gap-2",children:[S.jsx(F_,{size:16}),""]})}),S.jsx("button",{onClick:()=>fe("account"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${ue==="account"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:S.jsxs("span",{className:"flex items-center gap-2",children:[S.jsx(Y_,{size:16}),""]})})]}),ue==="api"&&S.jsxs("div",{className:"animate-fadeIn",children:[S.jsx("p",{className:"text-sm text-gray-600 mb-5 leading-relaxed",children:"AIGeminiGoogle AI StudioAPI"}),S.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-indigo-600 text-sm font-medium mb-5 hover:text-indigo-700 transition-colors",children:["API",S.jsx(j1,{size:16})]}),S.jsx("input",{type:"password",value:q,onChange:x=>ne(x.target.value),placeholder:"AIzaSy...",className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 outline-none mb-5 font-mono text-sm transition-all"}),S.jsxs("div",{className:"mb-5",children:[S.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[S.jsx(DA,{size:16,className:"text-indigo-500"}),"AI"]}),S.jsx("div",{className:"space-y-2",children:Object.entries(tu).map(([x,Ae])=>S.jsx("button",{onClick:()=>w(x),className:`w-full p-3 rounded-xl border-2 text-left transition-all ${le===x?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("div",{className:`font-medium ${le===x?"text-indigo-700":"text-gray-700"}`,children:Ae.name}),S.jsx("div",{className:"text-xs text-gray-500",children:Ae.description})]}),le===x&&S.jsx("div",{className:"w-5 h-5 bg-indigo-500 rounded-full flex items-center justify-center",children:S.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},x))}),S.jsx("p",{className:"text-xs text-gray-400 mt-2",children:" Flash: 11,500/ Pro: 150"})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[S.jsx("button",{onClick:n,className:"btn-secondary order-2 sm:order-1 flex-1",children:""}),S.jsx("button",{onClick:()=>e(q),disabled:!q.trim(),className:"btn-primary order-1 sm:order-2 flex-1",children:""})]}),S.jsx("p",{className:"text-xs text-gray-400 mt-5 text-center",children:" API"})]}),ue==="personas"&&S.jsxs("div",{className:"animate-fadeIn",children:[S.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"/"}),S.jsx(nO,{sensors:I,collisionDetection:i4,onDragEnd:N,children:S.jsx(gO,{items:O,strategy:dO,children:S.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:(p||[...eu,...f||[]]).map(x=>{const Ae=y?.includes(x.id),ze=!x.isDefault;return S.jsx(RO,{persona:x,isHidden:Ae,isCustom:ze,onToggleVisibility:E,onDelete:m},x.id)})})})}),S.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:S.jsx("p",{className:"text-xs text-blue-600",children:" "})}),S.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100 flex flex-col sm:flex-row gap-3",children:[S.jsx("button",{onClick:n,className:"btn-secondary flex-1 order-2 sm:order-1",children:""}),S.jsxs("button",{onClick:()=>{n(),M?.()},className:"btn-primary flex-1 order-1 sm:order-2",children:[S.jsx(B1,{size:18}),""]})]})]}),ue==="data"&&S.jsxs("div",{className:"animate-fadeIn",children:[S.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 mb-6",children:[S.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[S.jsx(F_,{size:16,className:"text-indigo-500"}),""]}),S.jsxs("div",{className:"space-y-2 text-sm",children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-500",children:""}),S.jsxs("span",{className:"font-semibold text-gray-800",children:[s," "]})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-500",children:"API"}),S.jsx("span",{className:`font-semibold ${r?"text-green-600":"text-gray-400"}`,children:r?"":""})]})]})]}),S.jsxs("button",{onClick:u,disabled:s===0,className:"w-full mb-4 p-4 border-2 border-gray-200 rounded-xl text-left hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-4",children:[S.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:S.jsx(VA,{size:20,className:"text-blue-600"})}),S.jsxs("div",{children:[S.jsx("div",{className:"font-semibold text-gray-800",children:""}),S.jsx("div",{className:"text-xs text-gray-500",children:"JSON"})]})]}),se?S.jsxs("div",{className:"border-2 border-red-300 bg-red-50 rounded-xl p-5 animate-scaleIn",children:[S.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[S.jsx(rw,{size:24,className:"text-red-500 flex-shrink-0 mt-0.5"}),S.jsxs("div",{children:[S.jsx("div",{className:"font-bold text-red-800 mb-1",children:""}),S.jsxs("p",{className:"text-sm text-red-700",children:["",s,"API"]})]})]}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:()=>te(!1),className:"flex-1 py-2.5 px-4 bg-white border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:""}),S.jsx("button",{onClick:L,className:"flex-1 py-2.5 px-4 bg-red-600 rounded-lg text-white font-medium hover:bg-red-700 transition-colors",children:""})]})]}):S.jsxs("button",{onClick:()=>te(!0),className:"w-full p-4 border-2 border-red-200 rounded-xl text-left hover:bg-red-50 transition-colors flex items-center gap-4",children:[S.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0",children:S.jsx(jh,{size:20,className:"text-red-600"})}),S.jsxs("div",{children:[S.jsx("div",{className:"font-semibold text-red-700",children:""}),S.jsx("div",{className:"text-xs text-gray-500",children:"API"})]})]}),S.jsx("p",{className:"text-xs text-gray-400 mt-6 text-center",children:" "})]}),ue==="account"&&S.jsxs("div",{className:"animate-fadeIn",children:[Q&&S.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 mb-6",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Q.photoURL?S.jsx("img",{src:Q.photoURL,alt:Q.displayName,className:"w-14 h-14 rounded-full border-2 border-white shadow-md"}):S.jsx("div",{className:"w-14 h-14 rounded-full bg-indigo-100 flex items-center justify-center",children:S.jsx(Y_,{size:24,className:"text-indigo-500"})}),S.jsxs("div",{children:[S.jsx("div",{className:"font-semibold text-gray-800",children:Q.displayName||""}),S.jsx("div",{className:"text-sm text-gray-500",children:Q.email})]})]}),S.jsxs("div",{className:"text-xs text-gray-400 bg-white rounded-lg p-3",children:[S.jsx("p",{children:" Google"}),S.jsx("p",{className:"mt-1",children:" "})]})]}),S.jsxs("button",{onClick:()=>{n(),Y?.()},className:"w-full p-4 border-2 border-gray-200 rounded-xl text-left hover:bg-gray-50 transition-colors flex items-center gap-4",children:[S.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:S.jsx(QA,{size:20,className:"text-gray-600"})}),S.jsxs("div",{children:[S.jsx("div",{className:"font-semibold text-gray-800",children:""}),S.jsx("div",{className:"text-xs text-gray-500",children:""})]})]}),S.jsx("p",{className:"text-xs text-gray-400 mt-6 text-center",children:" "})]})]})})},IO=({onGoogleSignIn:r,isLoading:e,error:n})=>S.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:S.jsxs("div",{className:"diary-card p-8 sm:p-12 max-w-md w-full text-center",children:[S.jsxs("div",{className:"mb-8",children:[S.jsx("span",{className:"text-5xl sm:text-6xl block mb-4",children:""}),S.jsx("h1",{className:"text-2xl sm:text-3xl font-bold app-logo mb-2",children:"Multiverse Diary"}),S.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:"AI"})]}),n&&S.jsx("div",{className:"mb-6 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:n}),S.jsxs("button",{onClick:r,disabled:e,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-white border-2 border-gray-200 rounded-xl font-semibold text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e?S.jsx(Gl,{size:20,className:"animate-spin"}):S.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[S.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),S.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),S.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),S.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),S.jsx("span",{children:e?"...":"Google"})]}),S.jsxs("p",{className:"mt-6 text-xs text-gray-400 leading-relaxed",children:["",S.jsx("br",{}),""]})]})});function NO(){const[r,e]=j.useState(null),[n,s]=j.useState(!0),[o,u]=j.useState(null),[f,m]=j.useState([]),[p,y]=j.useState(""),[E,T]=j.useState(["teacher","friend"]),[C,M]=j.useState(!1),[Q,Y]=j.useState("list"),[q,ne]=j.useState(""),[se,te]=j.useState(!1),[ue,fe]=j.useState(!1),[le,R]=j.useState([]),[w,I]=j.useState([]),[O,N]=j.useState([]),[L,x]=j.useState(!1),Ae=[...eu,...le],ze=O.length>0?O.map(ce=>Ae.find(be=>be.id===ce)).filter(Boolean).concat(Ae.filter(ce=>!O.includes(ce.id))):Ae,K=ze.filter(ce=>!w.includes(ce.id));j.useEffect(()=>{const ce=RD(be=>{e(be),s(!1)});return()=>ce()},[]),j.useEffect(()=>{if(!r){m([]),R([]),T(["teacher","friend"]),I([]),N([]),ne("");return}x(!0);const ce=CD(r.uid,({data:be,error:Ce})=>{if(Ce){console.error("Data sync error:",Ce),x(!1);return}be&&(m(be.entries||[]),R(be.customPersonas||[]),T(be.selectedPersonas||["teacher","friend"]),I(be.hiddenPersonaIds||[]),N(be.personaOrder||[]),ne(OD())),x(!1)});return()=>ce()},[r]);const ie=async()=>{u(null),s(!0);const{user:ce,error:be}=await wD();be&&u(be),s(!1)},me=async()=>{window.confirm("")&&await xD()},xe=ce=>{ne(ce),DD(ce),te(!1)},ke=async ce=>{m(ce),r&&await ID(r.uid,ce)},V=async ce=>{const be=[...le,ce];R(be),r&&await b1(r.uid,be)},X=async ce=>{const be=le.filter(dt=>dt.id!==ce),Ce=E.filter(dt=>dt!==ce),Ke=O.filter(dt=>dt!==ce);R(be),T(Ce),N(Ke),r&&(await b1(r.uid,be),await Am(r.uid,Ce),await wm(r.uid,Ke))},re=async ce=>{const be=w.includes(ce)?w.filter(Ce=>Ce!==ce):[...w,ce];if(I(be),!w.includes(ce)){const Ce=E.filter(Ke=>Ke!==ce);T(Ce),r&&await Am(r.uid,Ce)}r&&await ND(r.uid,be)},oe=async(ce,be)=>{const Ce=O.length>0?O:Ae.map(Oi=>Oi.id),Ke=Ce.indexOf(ce);if(Ke===-1)return;const dt=be==="up"?Ke-1:Ke+1;if(dt<0||dt>=Ce.length)return;const Tn=[...Ce];[Tn[Ke],Tn[dt]]=[Tn[dt],Tn[Ke]],N(Tn),r&&await wm(r.uid,Tn)},_e=async ce=>{N(ce),r&&await wm(r.uid,ce)},ye=async()=>{r&&await VD(r.uid),MD(),m([]),ne(""),R([]),T(["teacher","friend"]),I([]),N([]),te(!1)},Me=()=>{const ce={exportDate:new Date().toISOString(),appName:"Multiverse Diary",entries:f},be=new Blob([JSON.stringify(ce,null,2)],{type:"application/json"}),Ce=URL.createObjectURL(be),Ke=document.createElement("a");Ke.href=Ce,Ke.download=`multiverse-diary-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ke),Ke.click(),document.body.removeChild(Ke),URL.revokeObjectURL(Ce)},tt=async ce=>{const be=E.includes(ce)?E.filter(Ce=>Ce!==ce):[...E,ce];T(be),r&&await Am(r.uid,be)},Be=async(ce,be)=>{const Ce=f.map(Ke=>Ke.id===ce?be:Ke);await ke(Ce)},Le=async()=>{if(!p.trim())return;if(E.length===0){alert("");return}if(!q){te(!0);return}M(!0);const be=(await mw(q,p,E,ze)).map(Ke=>({personaId:Ke.id,text:Ke.comment})),Ce={id:Date.now(),date:new Date().toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",weekday:"short"}),content:p,comments:be};await ke([Ce,...f]),y(""),M(!1),Y("list")},In=async ce=>{window.confirm("")&&await ke(f.filter(be=>be.id!==ce))};return n?S.jsx("div",{className:"min-h-screen flex items-center justify-center",children:S.jsxs("div",{className:"text-center",children:[S.jsx(Gl,{size:40,className:"animate-spin text-indigo-500 mx-auto mb-4"}),S.jsx("p",{className:"text-gray-500",children:"..."})]})}):r?L?S.jsx("div",{className:"min-h-screen flex items-center justify-center",children:S.jsxs("div",{className:"text-center",children:[S.jsx(Gl,{size:40,className:"animate-spin text-indigo-500 mx-auto mb-4"}),S.jsx("p",{className:"text-gray-500",children:"..."})]})}):S.jsxs("div",{className:"min-h-screen pb-16",children:[S.jsx("header",{className:"app-header py-3 px-4 sm:py-5 sm:px-8 sticky top-0 z-10",children:S.jsxs("div",{className:"max-w-3xl mx-auto flex justify-between items-center",children:[S.jsxs("h1",{className:"text-lg sm:text-2xl font-bold tracking-tight flex items-center gap-2 sm:gap-3 cursor-pointer",onClick:()=>Y("list"),children:[S.jsx("span",{className:"text-2xl sm:text-3xl",children:""}),S.jsx("span",{className:"app-logo",children:"Multiverse Diary"})]}),S.jsxs("div",{className:"flex gap-2 items-center",children:[r.photoURL&&S.jsx("img",{src:r.photoURL,alt:r.displayName,className:"w-8 h-8 rounded-full border-2 border-white shadow-sm",title:r.displayName}),S.jsx("button",{onClick:()=>te(!0),className:"p-2 sm:p-2.5 rounded-lg sm:rounded-xl transition-all hover:bg-gray-100",title:"",children:S.jsx(q1,{size:20,className:"sm:w-[22px] sm:h-[22px]",style:{color:q?"#6366f1":"#ef4444"}})}),Q==="list"&&S.jsxs("button",{onClick:()=>Y("new"),className:"btn-primary !py-2 !px-3 sm:!py-2.5 sm:!px-5",children:[S.jsx(JA,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),S.jsx("span",{className:"hidden sm:inline",children:""})]}),Q==="new"&&S.jsx("button",{onClick:()=>Y("list"),className:"btn-secondary !py-2",children:""})]})]})}),S.jsxs("main",{className:"max-w-3xl mx-auto px-4 sm:px-8 pt-6 sm:pt-10",children:[!q&&Q==="list"&&S.jsxs("div",{onClick:()=>te(!0),className:"api-banner text-white p-4 sm:p-6 mb-6 sm:mb-10 cursor-pointer flex items-center justify-between gap-3 sm:gap-4",children:[S.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[S.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white/20 rounded-lg sm:rounded-xl flex items-center justify-center",children:S.jsx(z1,{size:20,className:"sm:w-[24px] sm:h-[24px]"})}),S.jsxs("div",{children:[S.jsx("div",{className:"font-bold text-base sm:text-lg",children:"API"}),S.jsx("div",{className:"text-xs sm:text-sm text-white/80",children:"Gemini API"})]})]}),S.jsx(j1,{size:24,className:"text-white/60 sm:w-[28px] sm:h-[28px]"})]}),Q==="new"&&S.jsx("div",{className:"animate-slideUp",children:S.jsxs("div",{className:"diary-card p-5 sm:p-8",children:[S.jsxs("label",{className:"block text-gray-800 font-bold mb-4 text-lg sm:text-xl flex items-center gap-2 sm:gap-3",children:[S.jsx("span",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-lg sm:rounded-xl flex items-center justify-center",children:S.jsx(Q_,{size:18,className:"text-indigo-500 sm:w-[20px] sm:h-[20px]"})}),""]}),S.jsx("textarea",{className:"textarea-diary mb-2",placeholder:`

OK`,value:p,onChange:ce=>y(ce.target.value.slice(0,2e3)),maxLength:2e3,autoFocus:!0}),S.jsxs("div",{className:"text-right text-sm text-gray-400 mb-4",children:[p.length," / 2000"]}),S.jsx(PD,{selected:E,togglePersona:tt,personas:K,onShowAddModal:()=>fe(!0)}),S.jsx("div",{className:"flex justify-end mt-8 pt-6 border-t border-gray-100",children:S.jsx("button",{onClick:Le,disabled:C||!p.trim(),className:"btn-primary w-full sm:w-auto",children:C?S.jsxs(S.Fragment,{children:[S.jsx(Gl,{size:20,className:"animate-spin"}),S.jsx("span",{children:"AI..."})]}):S.jsxs(S.Fragment,{children:[S.jsx(tw,{size:20}),S.jsx("span",{children:""})]})})})]})}),Q==="list"&&S.jsx("div",{children:f.length===0?S.jsxs("div",{className:"empty-state text-center animate-fadeIn",children:[S.jsx("div",{className:"empty-state-icon",children:S.jsx(SA,{size:32,className:"sm:w-[40px] sm:h-[40px]",strokeWidth:1.5})}),S.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4",children:""}),S.jsxs("p",{className:"text-gray-500 mb-6 sm:mb-10 text-sm sm:text-base leading-relaxed max-w-sm mx-auto",children:["",S.jsx("br",{}),"AI"]}),S.jsxs("button",{onClick:()=>Y("new"),className:"btn-primary",children:[S.jsx(Q_,{size:18}),""]})]}):S.jsx("div",{children:f.map((ce,be)=>S.jsx("div",{style:{animationDelay:`${be*.1}s`},children:S.jsx(zD,{entry:ce,onDelete:In,onUpdate:Be,apiKey:q,allPersonas:ze})},ce.id))})})]}),se&&S.jsx(CO,{savedKey:q,onSave:xe,onCancel:()=>te(!1),entriesCount:f.length,onClearAllData:ye,onExportData:Me,customPersonas:le,onDeleteCustomPersona:X,allPersonas:ze,hiddenPersonaIds:w,onTogglePersonaVisibility:re,onMovePersona:oe,onReorderPersonas:_e,onAddPersona:()=>fe(!0),user:r,onSignOut:me}),ue&&S.jsx(jD,{onAdd:ce=>{V(ce),fe(!1)},onCancel:()=>fe(!1)})]}):S.jsx(IO,{onGoogleSignIn:ie,isLoading:n,error:o})}pA.createRoot(document.getElementById("root")).render(S.jsx(j.StrictMode,{children:S.jsx(NO,{})}));
